"use strict";var t=require("@vue/composition-api");function e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function n(t,e){return function(n){n&&(t[e]=n)}}function r(t,e,n){return function(r){r&&(t[e][n]=r)}}function o(t,e){return function(n){var r=n.prototype;t.forEach((function(t){e(r,t)}))}}var i=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,o=n.indexOf(t),i=-1===o?n.length:o;n[i]=t,r[i]=e},t}(),a=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),s="function"==typeof Map,u=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var c=function(){function t(t,e,n,r,o,i,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=o,this.maintained=i,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],r=[];return t.forEach((function(t){var e=t[0],o=t[1],i=new u;n[e]=i,r[o]=i})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var o=t[0],i=t[1];if(o===i)return[0,0];var a=n[o],s=r[i-1],u=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,n[0]),[u,a.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,r){var o=t[0],i=t[1],a=e[r],s=a[0],u=a[1];if(o!==i)return n.push([s,u]),!0})),this.cachePureChanged=n},t}();function l(t,e,n){var r=s?Map:n?a:i,o=n||function(t){return t},u=[],l=[],f=[],p=t.map(o),d=e.map(o),h=new r,v=new r,g=[],m=[],b={},y=[],x=0,E=0;return p.forEach((function(t,e){h.set(t,e)})),d.forEach((function(t,e){v.set(t,e)})),p.forEach((function(t,e){var n=v.get(t);void 0===n?(++E,l.push(e)):b[n]=E})),d.forEach((function(t,e){var n=h.get(t);void 0===n?(u.push(e),++x):(f.push([n,e]),E=b[e]||0,g.push([n-E,e-x]),m.push(e===n),n!==e&&y.push([n,e]))})),l.reverse(),new c(t,e,u,l,y,f,g,m)}var f=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=l(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),p=['"',"'",'\\"',"\\'"],d={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function h(t){return void 0===t}function v(t){return t&&"object"==typeof t}function g(t){return Array.isArray(t)}function m(t){return"string"==typeof t}function b(t){return"number"==typeof t}function y(t){return"function"==typeof t}function x(t,e,n,r){for(var o=n;o<r;++o){var i=e[o].trim();if(i===t)return o;var a=o;if("("===i?a=x(")",e,o+1,r):p.indexOf(i)>-1&&(a=x(i,e,o+1,r)),-1===a)break;o=a}return-1}function E(t,e){for(var n=new RegExp("(\\s*"+(e||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),r=t.split(n).filter(Boolean),o=r.length,i=[],a=[],s=0;s<o;++s){var u=r[s].trim(),c=s;if("("===u)c=x(")",r,s+1,o);else{if(")"===u)throw new Error("invalid format");if(p.indexOf(u)>-1)c=x(u,r,s+1,o);else if(u===e){a.length&&(i.push(a.join("")),a=[]);continue}}-1===c&&(c=o-1),a.push(r.slice(s,c+1).join("")),s=c}return a.length&&i.push(a.join("")),i}function w(t){return E(t,"")}function C(t){return E(t,",")}function S(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function _(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function A(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,n,r){return""+n+e+r.toLowerCase()}))}function M(){return Date.now?Date.now():(new Date).getTime()}function D(t,e,n){void 0===n&&(n=-1);for(var r=t.length,o=0;o<r;++o)if(e(t[o],o,t))return o;return n}function R(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function k(t,e){var n=_(t),r=n.value,o=n.unit;if(v(e)){var i=e[o];if(i){if(y(i))return i(r);if(d[o])return d[o](r,i)}}else if("%"===o)return r*e/100;return d[o]?d[o](r):r}function O(t,e){return e?Math.round(t/e)*e:t}function P(t,e,n){return[[O(e[0],1e-7),O(e[0]*t[1]/t[0],1e-7)],[O(e[1]*t[0]/t[1],1e-7),O(e[1],1e-7)]].filter((function(t){return t.every((function(t,r){return n?t<=e[r]:t>=e[r]}))}))[0]||t}function B(t,e,n,r){if(!r)return t.map((function(t,r){return function(t,e,n){return Math.max(e,Math.min(t,n))}(t,e[r],n[r])}));var o=t[0],i=t[1],a=P(t,e,!1),s=a[0],u=a[1],c=P(t,n,!0),l=c[0],f=c[1];return o<s||i<u?(o=s,i=u):(o>l||i>f)&&(o=l,i=f),[o,i]}function T(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function I(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=Math.atan2(r,n);return o>=0?o:o+2*Math.PI}function N(t){var e=function(t){return[0,1].map((function(e){return T(t.map((function(t){return t[e]})))}))}(t),n=I(e,t[0]),r=I(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function z(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function j(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function F(t,e,n,r){t.addEventListener(e,n,r)}function G(t,e,n){t.removeEventListener(e,n)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var L=function(t,e){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function q(t,e){function n(){this.constructor=t}L(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Y=function(){return(Y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function X(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function W(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function H(t,e){var n=Object.keys(t),r=Object.keys(e),o=l(n,r,(function(t){return t})),i={},a={},s={};return o.added.forEach((function(t){var n=r[t];i[n]=e[n]})),o.removed.forEach((function(e){var r=n[e];a[r]=t[r]})),o.maintained.forEach((function(r){var o=r[0],i=n[o],a=[t[i],e[i]];t[i]!==e[i]&&(s[i]=a)})),{added:i,removed:a,changed:s}}function U(t){t.forEach((function(t){t()}))}function V(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function $(t,e,n,r){return m(t)||b(t)?new nt("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?rt:t.type.prototype.render?ut:at)(t.type,e,n,r,t.ref,t.props)}function K(t){var e=[];return t.forEach((function(t){e=e.concat(g(t)?K(t):t)})),e}function J(t){var e=t.className,n=X(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function Z(t,e){if(!e)return t;for(var n in e)h(t[n])&&(t[n]=e[n]);return t}function Q(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e||{},i=o.key,a=o.ref,s=X(o,["key","ref"]);return{type:t,key:i,ref:a,props:Y(Y({},s),{children:K(n).filter((function(t){return null!=t&&!1!==t}))})}}var tt=function(){function t(t,e,n,r,o,i){void 0===i&&(i={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=o,this.props=i,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!m(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var o=this.props;return m(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?o:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function et(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}q(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){n?e._mounted():e._updated()})),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(tt),rt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e}q(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return W(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;r&&(this.base=document.createElement(this.type)),dt(this,this._providers,this.props.children,t,null);var o=this.base,i=et(e),a=i.attributes,s=i.events,u=et(this.props),c=u.attributes,l=u.events;return function(t,e,n){var r=H(t,e),o=r.added,i=r.removed,a=r.changed;for(var s in o)n.setAttribute(s,o[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in i)n.removeAttribute(s)}(J(a),J(c),o),function(t,e,n){var r=H(t,e),o=r.added,i=r.removed,a=r.changed;for(var s in i)n.removeEventListener(s);for(var s in o)n.addEventListener(s,o[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in i)n.removeEventListener(s)}(s,l,this),function(t,e,n){var r=n.style,o=H(t,e),i=o.added,a=o.removed,s=o.changed;for(var u in i){var c=A(u,"-");r.setProperty?r.setProperty(c,i[u]):r[c]=i[u]}for(var u in s)c=A(u,"-"),r.setProperty?r.setProperty(c,s[u][1]):r[c]=s[u][1];for(var u in a)c=A(u,"-"),r.removeProperty?r.removeProperty(c):r[c]=""}(e.style||{},this.props.style||{},o),t.push((function(){r?n._mounted():n._updated()})),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach((function(t){t._unmount()})),this.events={},e.parentNode.removeChild(e)},e}(tt);function ot(t){if(!t)return null;var e=t.base;return e instanceof Node?e:ot(t.container)}function it(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?it(e[0].base):null}var at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}q(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return dt(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(tt),st=function(t){function e(e){var n=t.call(this,"container","container",0,null)||this;return n.base=e,n}q(e,t);var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(tt),ut=function(t){function e(e,n,r,o,i,a){return void 0===a&&(a={}),t.call(this,e,n,r,o,i,Z(a,e.defaultProps))||this}q(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(Z(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e,n){var r=this;this.props=Z(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var i=this.base,a=i.state,s=i.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),dt(this,this._providers,s?[s]:[],t,n,null),t.push((function(){o?(r._mounted(),i.componentDidMount()):(r._updated(),i.componentDidUpdate(e,a))}))},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach((function(t){t._unmount()})),this.base.componentWillUnmount()},e}(tt),ct=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=[],o=this._provider;dt(o.container,[o],[o.original],r,Y(Y({},this.state),t),n)&&(e&&r.push(e),U(r))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return q(e,t),e.prototype.shouldComponentUpdate=function(t,e){return W(this.props,t)||W(this.state,e)},e}(ct),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}q(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new st(n),ht(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;ht(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){ht(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(lt);function pt(t,e,n){var r=n.map((function(t){return m(t)?null:t.key})),o=l(V(e.map((function(t){return t.key}))),V(r),(function(t){return t}));o.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),o.ordered.forEach((function(t){var n=t[0],r=t[1],o=e.splice(n,1)[0];e.splice(r,0,o);var i=it(o.base),a=it(e[r+1]&&e[r+1].base);i&&i.parentNode.insertBefore(i,a)})),o.added.forEach((function(o){e.splice(o,0,$(n[o],r[o],o,t))}));var i=o.maintained.filter((function(o){o[0];var i=o[1],a=n[i],s=e[i];return(m(a)?"text_"+a:a.type)!==s.type?(s._unmount(),e.splice(i,1,$(a,r[i],i,t)),!0):(s.index=i,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(o.added,i.map((function(t){t[0];return t[1]})))}function dt(t,e,n,r,o,i){var a=pt(t,e,n),s=e.filter((function(t,e){return t._update(r,n[e],o,i)})),u=ot(t);return u&&a.reverse().forEach((function(n){var r=e[n],o=it(r.base);if(o&&u!==o&&!o.parentNode){var i=function(t,e){for(var n=t._providers,r=n.length,o=e.index+1;o<r;++o){var i=it(n[o].base);if(i)return i}return null}(t,r);u.insertBefore(o,i)}})),s.length>0}function ht(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new st(e)),function(t,e,n){var r=[];dt(t,t._providers,e,r,n),U(r)}(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function vt(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),ht(t,e,r),n&&n()}function gt(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function mt(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function bt(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function yt(t){return t.replace(/_/g,".")}function xt(t,e){var n=null,r="-1";return gt(t,(function(t){var o=bt("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!o||t.brand)&&(n=t,r=o[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(r=function(t,e){var n=bt("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return n?n[3]:""}(t.versionTest.toLowerCase(),e)||r),r=yt(r),!0)})),{preset:n,version:r}}function Et(t,e){return mt(t,(function(t){var n=t.brand;return bt(""+e.test,n.toLowerCase())}))}var wt=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Ct=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",brand:!0}],St=[{test:"applewebkit",id:"webkit"}],_t=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],At=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Mt(t){var e=function(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!xt(_t,e).preset,chromium:!!xt(Ct,e).preset,webkit:!1},o={name:"unknown",version:"-1",majorVersion:-1},i=xt(wt,e),a=i.preset,s=i.version,u=xt(At,e),c=u.preset,l=u.version;return r.webkit=!r.chromium&&!!xt(St,e).preset,c&&(o.name=c.id,o.version=l,o.majorVersion=parseInt(l,10)),a&&(r.name=a.id,r.version=s,r.webview&&"ios"===o.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:o,isMobile:n,isHints:!1}}function Dt(t,e,n,r,o,i){for(var a=0;a<o;++a){var s=n+a*o,u=r+a*o;t[s]+=t[u]*i,e[s]+=e[u]*i}}function Rt(t,e,n,r,o){for(var i=0;i<o;++i){var a=n+i*o,s=r+i*o,u=t[a],c=e[a];t[a]=t[s],t[s]=u,e[a]=e[s],e[s]=c}}function kt(t,e,n,r,o){for(var i=0;i<r;++i){var a=n+i*r;t[a]/=o,e[a]/=o}}function Ot(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),o=0;o<n;++o)r[o*n+e-1]=0,r[(e-1)*n+o]=0;return r[(e-1)*(n+1)]=1,r}function Pt(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=$t(e),o=0;o<e;++o){var i=e*o+o;if(!O(n[i],1e-7))for(var a=o+1;a<e;++a)if(n[e*o+a]){Rt(n,r,o,a,e);break}if(!O(n[i],1e-7))return[];kt(n,r,o,e,n[i]);for(a=0;a<e;++a){var s=a,u=n[a+o*e];O(u,1e-7)&&o!==a&&Dt(n,r,s,o,e,-u)}}return r}function Bt(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Tt(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=$t(n),o=Math.min(e,n),i=0;i<o-1;++i){for(var a=0;a<o-1;++a)r[i*n+a]=t[i*e+a];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function It(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=$t(t);return e.forEach((function(e){r=Nt(r,e,t)})),r}function Nt(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],o=t.length/n,i=e.length/o;if(!o)return e;if(!i)return t;for(var a=0;a<n;++a)for(var s=0;s<i;++s){r[s*n+a]=0;for(var u=0;u<o;++u)r[s*n+a]+=t[u*n+a]*e[s*o+u]}return r}function zt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),o=0;o<n;++o)r[o]=r[o]+e[o];return r}function jt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),o=0;o<n;++o)r[o]=r[o]-e[o];return r}function Ft(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Gt(t,e,n){void 0===n&&(n=e.length);var r=Nt(t,e,n),o=r[n-1];return r.map((function(t){return t/o}))}function Lt(t,e){return Nt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function qt(t,e){return Nt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Yt(t,e){return Nt(t,Vt(e,4))}function Xt(t,e){var n=e[0],r=void 0===n?1:n,o=e[1],i=void 0===o?1:o,a=e[2];return Nt(t,[r,0,0,0,0,i,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function Wt(t,e){return Gt(Vt(e,3),Bt(t,3))}function Ht(t,e){var n=e[0],r=void 0===n?0:n,o=e[1],i=void 0===o?0:o,a=e[2];return Nt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,i,void 0===a?0:a,1],4)}function Ut(t,e){return Nt(t,e,4)}function Vt(t,e){var n=Math.cos(t),r=Math.sin(t),o=$t(e);return o[0]=n,o[1]=r,o[e]=-r,o[e+1]=n,o}function $t(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Kt(t,e){for(var n=$t(e),r=Math.min(t.length,e-1),o=0;o<r;++o)n[(e+1)*o]=t[o];return n}function Jt(t,e){for(var n=$t(e),r=Math.min(t.length,e-1),o=0;o<r;++o)n[e*(e-1)+o]=t[o];return n}function Zt(t,e,n,r,o,i,a,s){var u=t[0],c=t[1],l=e[0],f=e[1],p=n[0],d=n[1],h=r[0],v=r[1],g=o[0],m=o[1],b=i[0],y=i[1],x=a[0],E=a[1],w=s[0],C=s[1],S=Pt([u,0,l,0,p,0,h,0,c,0,f,0,d,0,v,0,1,0,1,0,1,0,1,0,0,u,0,l,0,p,0,h,0,c,0,f,0,d,0,v,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*l,-y*l,-x*p,-E*p,-w*h,-C*h,-g*c,-m*c,-b*f,-y*f,-x*d,-E*d,-w*v,-C*v],8);if(!S.length)return[];var _=Nt(S,[g,m,b,y,x,E,w,C],8);return _[8]=1,Tt(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var o=0;o<e;++o)n[o*e+r]=t[e*r+o];return n}(_),3,4)}function Qt(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var n=t.matrixFunction,r=t.functionValue;n&&(e=n(e,r))})),e}function te(t){return(g(t)?t:w(t)).map((function(t){var e=S(t),n=e.prefix,r=e.value,o=null,i=n,a="";if("translate"===n||"translateX"===n||"translate3d"===n){var s=C(r).map((function(t){return parseFloat(t)})),u=s[0],c=s[1],l=void 0===c?0:c,f=s[2];o=Ht,a=[u,l,void 0===f?0:f]}else if("translateY"===n){o=Ht,a=[0,l=parseFloat(r),0]}else if("translateZ"===n){o=Ht,a=[0,0,parseFloat(r)]}else if("scale"===n||"scale3d"===n){var p=C(r).map((function(t){return parseFloat(t)})),d=p[0],h=p[1],v=void 0===h?d:h,g=p[2];o=Xt,a=[d,v,void 0===g?1:g]}else if("scaleX"===n){o=Xt,a=[d=parseFloat(r),1,1]}else if("scaleY"===n){o=Xt,a=[1,v=parseFloat(r),1]}else if("scaleZ"===n){o=Xt,a=[1,1,parseFloat(r)]}else if("rotate"===n||"rotateZ"===n||"rotateX"===n||"rotateY"===n){var m=_(r),b=m.unit,y=m.value;"rotate"===n||"rotateZ"===n?(i="rotateZ",o=Yt):"rotateX"===n?o=Lt:"rotateY"===n&&(o=qt),a="rad"===b?y:y*Math.PI/180}else if("matrix3d"===n)o=Ut,a=C(r).map((function(t){return parseFloat(t)}));else if("matrix"===n){var x=C(r).map((function(t){return parseFloat(t)}));o=Ut,a=[x[0],x[1],0,0,x[2],x[3],0,0,0,0,1,0,x[4],x[5],0,1]}else i="";return{name:n,functionName:i,value:r,matrixFunction:o,functionValue:a}}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ee(t){return t.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}(t.map((function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]}))))/2}function ne(t,e){var n=e.width,r=e.height,o=e.left,i=e.top,a=re(t),s=a.minX,u=a.minY,c=a.maxX,l=a.maxY,f=n/(c-s),p=r/(l-u);return t.map((function(t){return[o+(t[0]-s)*f,i+(t[1]-u)*p]}))}function re(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function oe(t,e,n){var r=t[0],o=t[1],i=re(e),a=i.minX,s=i.minY,u=i.maxX,c=i.maxY,l=[[a,o],[u,o]],f=[[r,s],[r,c]],p=ie(l[0],l[1]),d=ie(f[0],f[1]),h=ue(e),v=[],g=[];return h.forEach((function(t){var e=ie(t[0],t[1]),n=se(ae(p,e),[l,t]),i=se(ae(d,e),[f,t]);1===n.length&&t[0][1]===o||v.push.apply(v,n),1===i.length&&t[0][0]===r||g.push.apply(g,i),e[0]||v.push.apply(v,n),e[1]||g.push.apply(g,i)})),!n&&(D(v,(function(t){return t[0]===r}))>-1||D(g,(function(t){return t[1]===o}))>-1)||!!(v.filter((function(t){return t[0]>r})).length%2&&g.filter((function(t){return t[1]>o})).length%2)}function ie(t,e){var n=t[0],r=t[1],o=e[0],i=e[1];if(n===o&&r===i)return[0,0,0];if(n===o)return[1,0,-n];if(r===i)return[0,1,-r];var a=(o-n)/(r-i);return[1,a,-n-a*r]}function ae(t,e){var n,r,o=t[0],i=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=0===o&&0===s,f=0===i&&0===u;if(l&&f)return[];if(l){var p=-a/i;return p!==-c/u?[]:[[-1/0,p],[1/0,p]]}if(f){var d=-a/o;return d!==-c/s?[]:[[d,-1/0],[d,1/0]]}return 0===o?[[n=-(u*(r=-a/i)+c)/s,r]]:0===s?[[n=-(i*(r=-c/u)+a)/o,r]]:0===i?[[n=-a/o,r=-(s*n+c)/u]]:0===u?[[n=-c/s,r=-(o*n+a)/i]]:[[n=(i*c-u*a)/(u*o-i*s),r=-(o*n+a)/i]]}function se(t,e){var n=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))}));if(2===t.length){var r=t[0],o=r[0],i=r[1];if(o===t[1][0]){var a=Math.max.apply(Math,n.map((function(t){return t[1][0]}))),s=Math.min.apply(Math,n.map((function(t){return t[1][1]})));return a>s?[]:[[o,a],[o,s]]}if(i===t[1][1]){var u=Math.max.apply(Math,n.map((function(t){return t[0][0]}))),c=Math.min.apply(Math,n.map((function(t){return t[0][1]})));return u>c?[]:[[u,i],[c,i]]}}return t.filter((function(t){return n.every((function(e){return e[0][0]<=t[0]&&t[0]<=e[0][1]&&e[1][0]<=t[1]&&t[1]<=e[1][1]}))}))}function ue(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(t.slice(1),[t[0]]).map((function(e,n){return[t[n],e]}))}function ce(t,e){return ee(function(t,e){var n=t.slice(),r=e.slice();-1===N(n)&&n.reverse(),-1===N(r)&&r.reverse();var o=ue(n),i=ue(r),a=o.map((function(t){return ie(t[0],t[1])})),s=i.map((function(t){return ie(t[0],t[1])})),u=[];a.forEach((function(t,e){var n=o[e],a=[];s.forEach((function(r,o){var s=se(ae(t,r),[n,i[o]]);a.push.apply(a,s.map((function(t){return{index1:e,index2:o,pos:t}})))})),a.sort((function(t,e){return z(n[0],t.pos)-z(n[0],e.pos)})),u.push.apply(u,a),oe(n[1],r)&&u.push({index1:e,index2:-1,pos:n[1]})})),i.forEach((function(t,e){if(oe(t[1],n)){var r=!1,o=D(u,(function(t){return t.index2===e?(r=!0,!1):!!r}));-1===o&&(r=!1,o=D(u,(function(t){var n=t.index1,o=t.index2;return-1===n&&o+1===e?(r=!0,!1):!!r}))),-1===o?u.push({index1:-1,index2:e,pos:t[1]}):u.splice(o,0,{index1:-1,index2:e,pos:t[1]})}}));var c=u.map((function(t){return t.pos})),l={};return c.filter((function(t){var e=t[0]+"x"+t[1];return!l[e]&&(l[e]=!0,!0)}))}(t,e))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var le=function(){return(le=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var fe=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(v(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(v(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var o=D(r,(function(t){return t.listener===e}));o>-1&&r.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var o=!1;return e.eventType=t,e.stop=function(){o=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(r).forEach((function(r){r.listener(e),r.once&&n.off(t,r.listener)})),!o},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(le({listener:e},n))},t}(),pe=function(t,e){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function de(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var he=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startRect=null,e.startPos=[],e.prevTime=0,e.timer=0,e}!function(t,e){function n(){this.constructor=t}pe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=e.container.getBoundingClientRect(),r=n.top,o=n.left,i=n.width,a=n.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:r,left:o,width:i,height:a}},n.drag=function(t,e){var n=this,r=t.clientX,o=t.clientY,i=e.container,a=e.threshold,s=void 0===a?0:a,u=e.throttleTime,c=void 0===u?0:u,l=e.getScrollPosition,f=void 0===l?de:l,p=this.startRect,d=this.startPos,h=M(),v=Math.max(c+this.prevTime-h,0),g=[0,0];if(p.top>o-s?(d[1]>p.top||o<d[1])&&(g[1]=-1):p.top+p.height<o+s&&(d[1]<p.top+p.height||o>d[1])&&(g[1]=1),p.left>r-s?(d[0]>p.left||r<d[0])&&(g[0]=-1):p.left+p.width<r+s&&(d[0]<p.left+p.width||r>d[0])&&(g[0]=1),clearTimeout(this.timer),!g[0]&&!g[1])return!1;if(v>0)return this.timer=window.setTimeout((function(){n.drag(t,e)}),v),!1;this.prevTime=h;var m=f({container:i,direction:g});this.trigger("scroll",{container:i,direction:g,inputEvent:t});var b=f({container:i,direction:g}),y=b[0]-m[0],x=b[1]-m[1];return!(!y&&!x)&&(this.trigger("move",{offsetX:g[0]?y:0,offsetY:g[1]?x:0,inputEvent:t}),c&&(this.timer=window.setTimeout((function(){n.drag(t,e)}),c)),!0)},n.dragEnd=function(){clearTimeout(this.timer)},e}(fe),ve=function(t,e){return(ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ge=function(){return(ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function me(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],r=n[0]-e[0],o=n[1]-e[1],((i=Math.atan2(o,r))>=0?i:i+2*Math.PI)/Math.PI);var e,n,r,o,i}function be(t){return t.touches?function(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Ee(t[r]));return n}(t.touches):[Ee(t)]}function ye(t,e,n){var r=n.length,o=we(t,r),i=o.clientX,a=o.clientY,s=o.originalClientX,u=o.originalClientY,c=we(e,r),l=c.clientX,f=c.clientY,p=we(n,r);return{clientX:s,clientY:u,deltaX:i-l,deltaY:a-f,distX:i-p.clientX,distY:a-p.clientY}}function xe(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Ee(t){return{clientX:t.clientX,clientY:t.clientY}}function we(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var o=t[r];n.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,n.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,n.clientX+=o.clientX,n.clientY+=o.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Ce=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.addClients=function(t){void 0===t&&(t=this.prevClients);var e=this.getPosition(t),n=e.deltaX,r=e.deltaY;return this.movement+=Math.sqrt(n*n+r*r),this.prevClients=t,e},e.getAngle=function(t){return void 0===t&&(t=this.prevClients),me(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),me(t)-me(this.startClients)},e.getPosition=function(t){return ye(t||this.prevClients,this.prevClients,this.startClients)},e.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map((function(n,r){return ye([t[r]],[e[r]],[n])}))},e.getMovement=function(t){var e=this.movement;if(!t)return e;var n=we(t,this.length),r=we(this.prevClients,this.length),o=n.clientX-r.clientX,i=n.clientY-r.clientY;return Math.sqrt(o*o+i*i)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),xe(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),xe(t)/xe(this.startClients)},e.move=function(t,e){this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),this.prevClients.forEach((function(n){n.clientX-=t,n.clientY-=e}))},t}(),Se=["textarea","input"],_e=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.datas={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r.onDragStart=function(t,e){if(void 0===e&&(e=!0),r.flag||!1!==t.cancelable){var n=r.options,o=n.container,i=n.pinchOutside,a=n.preventRightClick,s=n.preventDefault,u=n.checkInput,c=r.isTouch,l=!r.flag;if(l){var f=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),h=Se.indexOf(d)>-1,v=p.isContentEditable;if(h||v){if(u||f===p)return!1;if(f&&v&&f.isContentEditable&&f.contains(p))return!1}else if((s||"touchstart"===t.type)&&f){var g=f.tagName;(f.isContentEditable||Se.indexOf(g)>-1)&&f.blur()}if(r.clientStores=[new Ce(be(t))],r.flag=!0,r.isDrag=!1,r.datas={},a&&(3===t.which||2===t.button))return r.initDrag(),!1;r.doubleFlag=M()-r.prevTime<200,!1===r.emit("dragStart",ge({datas:r.datas,inputEvent:t,isTrusted:e,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()))&&r.initDrag(),r.flag&&s&&t.preventDefault()}if(!r.flag)return!1;var m=0;if(l&&c&&i&&(m=setTimeout((function(){F(o,"touchstart",r.onDragStart,{passive:!1})}))),!l&&c&&i&&G(o,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(m),l&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}},r.onDrag=function(t,e){if(r.flag){var n=be(t),o=r.moveClients(n,t,!1);(r.pinchFlag||o.deltaX||o.deltaY)&&r.emit("drag",ge({},o,{isScroll:!!e,inputEvent:t})),r.pinchFlag&&r.onPinch(t,n),r.getCurrentStore().addClients(n)}},r.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.pinchOutside,o=e.container;r.isTouch&&n&&G(o,"touchstart",r.onDragStart),r.flag=!1;var i=r.getCurrentStore().getPosition(),a=M(),s=!r.isDrag&&r.doubleFlag;r.prevTime=r.isDrag||s?0:a,r.emit("dragEnd",ge({datas:r.datas,isDouble:s,isDrag:r.isDrag,inputEvent:t},i)),r.pinchFlag&&r.onPinchEnd(t),r.clientStores=[]}},r.onBlur=function(){r.onDragEnd()};var o=[].concat(e);r.options=ge({checkInput:!1,container:o.length>1?window:o[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var i=r.options,a=i.container,s=i.events,u=i.checkWindowBlur;if(r.isTouch=s.indexOf("touch")>-1,r.isMouse=s.indexOf("mouse")>-1,r.targets=o,r.isMouse&&(o.forEach((function(t){F(t,"mousedown",r.onDragStart)})),F(a,"mousemove",r.onDrag),F(a,"mouseup",r.onDragEnd),F(a,"contextmenu",r.onDragEnd)),u&&F(window,"blur",r.onBlur),r.isTouch){var c={passive:!1};o.forEach((function(t){F(t,"touchstart",r.onDragStart,c)})),F(a,"touchmove",r.onDrag,c),F(a,"touchend",r.onDragEnd,c),F(a,"touchcancel",r.onDragEnd,c)}return r}!function(t,e){function n(){this.constructor=t}ve(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},n.move=function(t,e){var n=t[0],r=t[1],o=this.getCurrentStore().prevClients;return this.moveClients(o.map((function(t){var e=t.clientX,o=t.clientY;return{clientX:e+n,clientY:o+r,originalClientX:e,originalClientY:o}})),e,!0)},n.triggerDragStart=function(t){this.onDragStart(t,!1)},n.setEventDatas=function(t){var e=this.datas;for(var n in t)e[n]=t[n];return this},n.getEventDatas=function(){return this.datas},n.unset=function(){var t=this,e=this.targets,n=this.options.container;this.off(),G(window,"blur",this.onBlur),this.isMouse&&(e.forEach((function(e){G(e,"mousedown",t.onDragStart)})),G(n,"mousemove",this.onDrag),G(n,"mouseup",this.onDragEnd),G(n,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){G(e,"touchstart",t.onDragStart)})),G(n,"touchstart",this.onDragStart),G(n,"touchmove",this.onDrag),G(n,"touchend",this.onDragEnd),G(n,"touchcancel",this.onDragEnd))},n.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var n=new Ce(be(t));this.pinchFlag=!0,this.clientStores.splice(0,0,n),!1===this.emit("pinchStart",ge({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1)}},n.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",ge({datas:this.datas,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e),{inputEvent:t}))}},n.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",ge({datas:this.datas,isPinch:e,touches:n.getPositions()},n.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}},n.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(t,e,n){var r=this.getCurrentStore()[n?"addClients":"getPosition"](t);return this.isDrag=!0,ge({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e}(fe);var Ae=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function Me(t,e,n,r){var o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,n){var r=n.trim();return(r?C(r):[""]).map((function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?""+n.replace(/\:host/g,"."+t):n?"."+t+" "+n:"."+t})).join(", ")+" {"}))}(t,e,n),(r||document.head||document.body).appendChild(o),o}function De(t){var e,n="rCS"+Ae(t).toString(36),r=0;return{className:n,inject:function(o,i){void 0===i&&(i={});var a,s=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(o),u=0===r;return(s||u)&&(a=Me(n,t,i,s)),u&&(e=a),s||++r,{destroy:function(){s?(o.removeChild(a),a=null):(r>0&&--r,0===r&&e&&(e.parentNode.removeChild(e),e=null))}}}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Re=function(t,e){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ke(t,e){function n(){this.constructor=t}Re(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Oe=function(){return(Oe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Pe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Be(t,e){var n=Object.keys(t),r=Object.keys(e),o=l(n,r,(function(t){return t})),i={},a={},s={};return o.added.forEach((function(t){var n=r[t];i[n]=e[n]})),o.removed.forEach((function(e){var r=n[e];a[r]=t[r]})),o.maintained.forEach((function(r){var o=r[0],i=n[o],a=[t[i],e[i]];t[i]!==e[i]&&(s[i]=a)})),{added:i,removed:a,changed:s}}function Te(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function Ie(t,e,n,r){return m(t)||b(t)?new Le("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?qe:t.type.prototype.render?He:We)(t.type,e,n,r,t.ref,t.props)}function Ne(t){var e=[];return t.forEach((function(t){e=e.concat(g(t)?Ne(t):t)})),e}function ze(t){var e=t.className,n=Pe(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function je(t,e){if(!e)return t;for(var n in e)h(t[n])&&(t[n]=e[n]);return t}var Fe=function(){function t(t,e,n,r,o,i){void 0===i&&(i={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=o,this.props=i,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!m(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var o=this.props;return m(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?o:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function Ge(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var Le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ke(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){n?e._mounted():e._updated()})),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(Fe),qe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e}ke(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return function(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;r&&(this.base=this.props.portalContainer||document.createElement(this.type)),Ve(this,this._providers,this.props.children,t,null);var o=this.base,i=Ge(e),a=i.attributes,s=i.events,u=Ge(this.props),c=u.attributes,l=u.events;return function(t,e,n){var r=Be(t,e),o=r.added,i=r.removed,a=r.changed;for(var s in o)n.setAttribute(s,o[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in i)n.removeAttribute(s)}(ze(a),ze(c),o),function(t,e,n){var r=Be(t,e),o=r.added,i=r.removed,a=r.changed;for(var s in i)n.removeEventListener(s);for(var s in o)n.addEventListener(s,o[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in i)n.removeEventListener(s)}(s,l,this),function(t,e,n){var r=n.style,o=Be(t,e),i=o.added,a=o.removed,s=o.changed;for(var u in i){var c=A(u,"-");r.setProperty?r.setProperty(c,i[u]):r[c]=i[u]}for(var u in s)c=A(u,"-"),r.setProperty?r.setProperty(c,s[u][1]):r[c]=s[u][1];for(var u in a)c=A(u,"-"),r.removeProperty?r.removeProperty(c):r[c]=""}(e.style||{},this.props.style||{},o),t.push((function(){r?n._mounted():n._updated()})),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach((function(t){t._unmount()})),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},e}(Fe);function Ye(t){if(!t)return null;var e=t.base;return e instanceof Node?e:Ye(t.container)}function Xe(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?Xe(e[0].base):null}var We=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ke(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return Ve(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(Fe),He=function(t){function e(e,n,r,o,i,a){return void 0===a&&(a={}),t.call(this,e,n,r,o,i,je(a,e.defaultProps))||this}ke(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(je(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e,n){var r=this;this.props=je(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var i=this.base,a=i.state,s=i.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),Ve(this,this._providers,s?[s]:[],t,n,null),t.push((function(){o?(r._mounted(),i.componentDidMount()):(r._updated(),i.componentDidUpdate(e,a))}))},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach((function(t){t._unmount()})),this.base.componentWillUnmount()},e}(Fe);function Ue(t,e,n){var r=n.map((function(t){return m(t)?null:t.key})),o=l(Te(e.map((function(t){return t.key}))),Te(r),(function(t){return t}));o.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),o.ordered.forEach((function(t){var n=t[0],r=t[1],o=e.splice(n,1)[0];e.splice(r,0,o);var i=Xe(o.base),a=Xe(e[r+1]&&e[r+1].base);i&&i.parentNode.insertBefore(i,a)})),o.added.forEach((function(o){e.splice(o,0,Ie(n[o],r[o],o,t))}));var i=o.maintained.filter((function(o){o[0];var i=o[1],a=n[i],s=e[i];return(m(a)?"text_"+a:a.type)!==s.type?(s._unmount(),e.splice(i,1,Ie(a,r[i],i,t)),!0):(s.index=i,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(o.added,i.map((function(t){t[0];return t[1]})))}function Ve(t,e,n,r,o,i){var a=Ue(t,e,n),s=e.filter((function(t,e){return t._update(r,n[e],o,i)})),u=Ye(t);return u&&a.reverse().forEach((function(n){var r=e[n],o=Xe(r.base);if(o&&u!==o&&!o.parentNode){var i=function(t,e){for(var n=t._providers,r=n.length,o=e.index+1;o<r;++o){var i=Xe(n[o].base);if(i)return i}return null}(t,r);u.insertBefore(o,i)}})),s.length>0}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var $e=function(t,e){return($e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ke(t,e){function n(){this.constructor=t}$e(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Je=function(){return(Je=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var Ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}Ke(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=t.className,r=void 0===e?"":e,o=(t.cspNonce,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["className","cspNonce"])),i=this.injector.className;return function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e||{},i=o.key,a=o.ref,s=Pe(o,["key","ref"]);return{type:t,key:i,ref:a,props:Oe(Oe({},s),{children:Ne(n).filter((function(t){return null!=t&&!1!==t}))})}}(this.tag,Je({ref:n(this,"element"),"data-styled-id":i,className:r+" "+i},o))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},e}(function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=[],o=this._provider;Ve(o.container,[o],[o.original],r,Oe(Oe({},this.state),t),n)&&(e&&r.push(e),function(t){t.forEach((function(t){t()}))}(r))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}());function Qe(t,e){var n=De(e);return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.injector=n,r.tag=t,r}return Ke(r,e),r}(Ze)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tn=function(t,e){return(tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var en,nn="function"==typeof Map?void 0:(en=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++en)}),rn=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,nn)||this}return function(t,e){function n(){this.constructor=t}tn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(f),on=function(t,e){return(on=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function an(t,e){function n(){this.constructor=t}on(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var sn=function(){return(sn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function un(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function cn(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var ln,fn,pn=(void 0===ln&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}()?function(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,o=n[0],i={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webview:gt(_t,(function(t){return Et(n,t)})),chromium:gt(Ct,(function(t){return Et(n,t)}))},a={name:"unknown",version:"-1",majorVersion:-1};if(i.webkit=!i.chromium&&gt(St,(function(t){return Et(n,t)})),t){var s=t.platform.toLowerCase(),u=mt(At,(function(t){return new RegExp(""+t.test,"g").exec(s)}));a.name=u?u.id:s,a.version=t.platformVersion}return gt(wt,(function(e){var r=Et(n,e);return!!r&&(i.name=e.id,i.version=t?t.uaFullVersion:r.version,!0)})),"Linux armv8l"===navigator.platform?a.name="android":i.webkit&&(a.name=r?"ios":"mac"),"ios"===a.name&&i.webview&&(i.version="-1"),a.version=yt(a.version),i.version=yt(i.version),a.majorVersion=parseInt(a.version,10),i.majorVersion=parseInt(i.version,10),{browser:i,os:a,isMobile:r,isHints:!0}}():Mt(ln)).browser.webkit,dn=pn&&(!!(fn=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase()))&&parseFloat(fn[1])<605),hn="moveable-",vn="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=cn(1,t),n=cn(2,t),r=45*Math.round(t/45)%180,o=135===r?"nwse-resize":45===r?"nesw-resize":90===r?"ew-resize":"ns-resize";return"cursor:"+o+";cursor: url('"+e+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+n+"') 2x) 16 16, "+o+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(dn?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",gn=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],mn=Math.pow(10,10),bn=-mn,yn=["n","w","s","e","nw","ne","sw","se"],xn={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},En={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},wn=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function Cn(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,un([hn],t))}function Sn(t,e,n){return It(e,Jt(n,e),t,Jt(n.map((function(t){return-t})),e))}function _n(t){return An(rr(t,":before")).map((function(e,n){var r=_(e),o=r.value,i=r.unit;return o*function(t,e,n){return"%"===e?Bn(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,i,0===n)}))}function An(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Mn(t,e,n){for(var r=document.body,o=!t||n?t:t.parentElement,i=!1,a="relative";o&&o!==r;){e===o&&(i=!0);var s=rr(o),u=s.transform;if(a=s.position,"svg"===o.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;o=o.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:i||!o||o===r,offsetParent:o||r}}function Dn(t,e,n,r){var o,i=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop;if(r){var u=(e||document.documentElement).getBoundingClientRect();a-=u.left,s-=u.top}var c,l,f=h(a),p=!f;return p||"svg"===i?l=(c=An(n).map((function(t){return parseFloat(t)}))).slice():(l=(c=dn?_n(t):An(n).map((function(t){return parseFloat(t)}))).slice(),p=!0,"g"===i?(a=0,s=0):(a=(o=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=Bn(t.ownerSVGElement),o=n.x-r.x,i=n.y-r.y;return[o,i,e[0]-o,e[1]-i]}(t,c))[0],s=o[1],c[0]=o[2],c[1]=o[3])),{isSVG:f,hasOffset:p,offset:[a||0,s||0],origin:c,targetOrigin:l}}function Rn(t,e,n){void 0===n&&(n=window.getComputedStyle(t));var r=window.getComputedStyle(document.body),o=r.position;if(!(e||o&&"static"!==o))return[0,0];var i=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(a=0),"auto"===n.left&&"auto"===n.right||(i=0)),[i,a]}function kn(t,e){for(var n,r,o,i,a,s,u=t,c=[],l=!1,f=!1,p=3,d=Mn(e,e,!0).offsetParent;u&&!l;){var h=rr(u),g=u.tagName.toLowerCase(),m=h.position,b="fixed"===m,y=(s=h.transform,i=s&&"none"!==s?v(s)?s:S(s).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0],void 0===(a=void 0)&&(a=6===i.length),a?[i[0],i[1],0,i[2],i[3],0,i[4],i[5],1]:i),x=y.length;if(!f&&16===x){f=!0,p=4;for(var E=c.length,w=0;w<E;++w)c[w]=Tt(c[w],3,4)}f&&9===x&&(y=Tt(y,3,4));var C=Dn(u,e,h,b),_=C.hasOffset,A=C.isSVG,M=C.origin,D=C.targetOrigin,R=C.offset,k=R[0],O=R[1];"svg"===g&&o&&c.push(Tn(u,p),$t(p));var P=Mn(u,e),B=P.offsetParent,T=P.isEnd,I=P.isStatic;pn&&_&&!A&&I&&("relative"===m||"static"===m)&&(k-=B.offsetLeft,O-=B.offsetTop,l=l||T);var N=0,z=0;if(_&&d!==B&&(N=B.clientLeft,z=B.clientTop),_&&B===document.body){var j=Rn(u,!1,h);k+=j[0],O+=j[1]}if(c.push(Sn(y,p,M),Jt(_?[k-u.scrollLeft+N,O-u.scrollTop+z]:[u,M],p)),o||(o=y),n||(n=M),r||(r=D),l||b)break;u=B,l=T}return o||(o=$t(p)),n||(n=[0,0]),r||(r=[0,0]),{offsetContainer:d,matrixes:c,targetMatrix:o,transformOrigin:n,targetOrigin:r,is3d:f}}function On(t,e,n,r){var o;void 0===n&&(n=e);var i=0,a=0,s=0,u={};if(t){var c=rr(t);i=t.offsetWidth,a=t.offsetHeight,h(i)&&(i=(o=Xn(t,c,!0))[0],a=o[1])}if(t){var l=function(t,e,n,r){void 0===n&&(n=e);var o=kn(t,e),i=o.matrixes,a=o.is3d,s=o.targetMatrix,u=o.transformOrigin,c=o.targetOrigin,l=kn(o.offsetContainer,n),f=l.matrixes,p=l.is3d,d=r||p||a,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=e||document.body,b=s,y=$t(h),x=$t(h),E=$t(h),w=$t(h),C=i.length,S=Mn(m,m,!0).offsetParent;f.reverse(),i.reverse(),!a&&d&&(b=Tt(b,3,4),i.forEach((function(t,e){i[e]=Tt(t,3,4)})));!p&&d&&f.forEach((function(t,e){f[e]=Tt(t,3,4)}));f.forEach((function(t){x=Nt(x,t,h)})),i.forEach((function(t,e){var n;C-2===e&&(E=y.slice()),C-1===e&&(w=y.slice()),v(t[h*(h-1)])&&(n=function(t,e,n,r,o,i){var a,s=Xn(t,void 0,!0),u=s[0],c=s[1],l=e.getBoundingClientRect(),f=[0,0];e===document.body&&(f=Rn(t,!0));var p=t.getBoundingClientRect(),d=p.left-l.left+e.scrollLeft-(e.clientLeft||0)+f[0],h=p.top-l.top+e.scrollTop-(e.clientTop||0)+f[1],v=p.width,g=p.height,m=It(n,o,i),b=jn(m,u,c,n),y=b.left,x=b.top,E=b.width,w=b.height,C=In(m,r,n),S=jt(C,[y,x]),_=[d+S[0]*v/E,h+S[1]*g/w],A=[0,0],M=0;for(;++M<10;){var D=Pt(o,n);a=jt(In(D,_,n),In(D,C,n)),A[0]=a[0],A[1]=a[1];var R=jn(It(n,o,Jt(A,n),i),u,c,n),k=R.left-d,O=R.top-h;if(Math.abs(k)<2&&Math.abs(O)<2)break;_[0]-=k,_[1]-=O}return A.map((function(t){return Math.round(t)}))}(t[h*(h-1)],S,h,t[h*(h-1)+1],y,i[e+1]),t[h*(h-1)]=n[0],t[h*(h-1)+1]=n[1]),y=Nt(y,t,h)}));var _=!g&&a;b||(b=$t(_?4:3));var A=Pn(g&&16===b.length?Tt(b,4,3):b,_);return{rootMatrix:x=Ot(x,h,h),beforeMatrix:E,offsetMatrix:w,allMatrix:y,targetMatrix:b,targetTransform:A,transformOrigin:u,targetOrigin:c,is3d:d}}(t,e,n,r),f=Fn(l.allMatrix,l.transformOrigin,i,a);u=sn(sn({},l),f);var p=Fn(l.allMatrix,[50,50],100,100);s=Wn([p.pos1,p.pos2],p.direction)}var d=r?4:3;return sn({width:i,height:a,rotation:s,rootMatrix:$t(d),beforeMatrix:$t(d),offsetMatrix:$t(d),allMatrix:$t(d),targetMatrix:$t(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},u)}function Pn(t,e){return void 0===e&&(e=t.length>9),(e?"matrix3d":"matrix")+"("+Ft(t,!e).join(",")+")"}function Bn(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,o=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:o.x,y:o.y,width:o.width||e,height:o.height||n,clientWidth:e,clientHeight:n}}function Tn(t,e){var n=Bn(t),r=n.width,o=n.height,i=n.clientWidth,a=n.clientHeight,s=i/r,u=a/o,c=t.preserveAspectRatio.baseVal,l=c.align,f=c.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];if(1!==l){var v=(l-2)%3,g=Math.floor((l-2)/3);p[0]=r*v/2,p[1]=o*g/2;var m=2===f?Math.max(u,s):Math.min(s,u);d[0]=m,d[1]=m,h[0]=(i-r)/2*v,h[1]=(a-o)/2*g}var b=Kt(d,e);return b[e*(e-1)]=h[0],b[e*(e-1)+1]=h[1],Sn(b,e,p)}function In(t,e,n){return Gt(t,Bt(e,n),n)}function Nn(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return In(t,e,r)}))}function zn(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),r=Math.min.apply(Math,e),o=Math.min.apply(Math,n),i=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:r,top:o,right:i,bottom:a,width:i-r,height:a-o}}function jn(t,e,n,r){return zn(Nn(t,e,n,r))}function Fn(t,e,n,r){var o=16===t.length?4:3,i=Nn(t,n,r,o),a=i[0],s=a[0],u=a[1],c=i[1],l=c[0],f=c[1],p=i[2],d=p[0],h=p[1],v=i[3],g=v[0],m=v[1],b=In(t,e,o),y=b[0],x=b[1],E=Math.min(s,l,d,g),w=Math.min(u,f,h,m),C=Math.max(s,l,d,g);return s=s-E||0,{left:E,top:w,right:C,bottom:Math.max(u,f,h,m),origin:[y=y-E||0,x=x-w||0],pos1:[s,u=u-w||0],pos2:[l=l-E||0,f=f-w||0],pos3:[d=d-E||0,h=h-w||0],pos4:[g=g-E||0,m=m-w||0],direction:N(i)}}function Gn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ln(t,e){return Gn([e[0]-t[0],e[1]-t[1]])}function qn(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=I(t,e));var o=Ln(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad) scaleY("+n+")",width:o+"px"}}function Yn(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n.length,i=n.reduce((function(t,e){return t+e[0]}),0)/o,a=n.reduce((function(t,e){return t+e[1]}),0)/o;return{transform:"translateZ(0px) translate("+i+"px, "+a+"px) rotate("+t+"rad) scale("+e+")"}}function Xn(t,e,n,r){void 0===e&&(e=window.getComputedStyle(t)),void 0===r&&(r=n||"border-box"===e.boxSizing);var o=t.offsetWidth,i=t.offsetHeight,a=!h(o);if((n||r)&&a)return[o,i];if(!a&&"svg"!==t.tagName.toLowerCase()){var s=t.getBBox();return[s.width,s.height]}return o=t.clientWidth,i=t.clientHeight,n||r?[o+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),i+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[o-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),i-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)]}function Wn(t,e){return I(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Hn(t,e,n,r,o){var i=1,a=[0,0],s={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l=On(e,n,o,!1);if(e){var f=l.is3d?4:3,p=Fn(l.offsetMatrix,zt(l.transformOrigin,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],o=0;o<e-1;++o)n[o]=t[e*(e-1)+o]/r;return n[e-1]=0,n}(l.targetMatrix,f)),l.width,l.height);i=p.direction,a=zt(p.origin,[p.left-l.left,p.top-l.top]),s=Un(e),u=Un(Mn(r,r,!0).offsetParent||document.body,!0),t&&(c=Un(t))}return sn({targetClientRect:s,containerClientRect:u,moveableClientRect:c,beforeDirection:i,beforeOrigin:a,originalBeforeOrigin:a,target:e},l)}function Un(t,e){var n=t.getBoundingClientRect(),r=n.left,o=n.width,i=n.top,a=n.bottom,s={left:r,right:n.right,top:i,bottom:a,width:o,height:n.height};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==rr(t).overflow),s}function Vn(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return e.indexOf("w")>-1&&(n[0]=-1),e.indexOf("e")>-1&&(n[0]=1),e.indexOf("n")>-1&&(n[1]=-1),e.indexOf("s")>-1&&(n[1]=1),n}}}function $n(t,e){return[zt(e,t[0]),zt(e,t[1]),zt(e,t[2]),zt(e,t[3])]}function Kn(t){var e=t.left,n=t.top;return $n([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function Jn(t,e){return e?Math.round(t/e)*e:t}function Zn(t,e){return t.forEach((function(n,r){t[r]=Jn(t[r],e)})),t}function Qn(t,e){t[e]&&(t[e].unset(),t[e]=null)}function tr(t,e,n){var r=e.datas;r.datas||(r.datas={});var o=sn(sn({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:r.datas});return r.isStartEvent?r.lastEvent=o:r.isStartEvent=!0,o}function er(t,e,n){var r=e.datas,o="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),sn(sn({isDrag:o},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function nr(t,e,n,r){return t.triggerEvent(e,n,r)}function rr(t,e){return window.getComputedStyle(t,e)}function or(t,e,n){var r={},o={};return t.filter((function(t){var i=t.name;if(r[i]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(o[t.ableGroup])return!1;o[t.ableGroup]=!0}return r[i]=!0,!0}))}function ir(t,e){return t===e||null==t&&null==e}function ar(t,e){var n=[],r=[];return t.forEach((function(o,i){var a=e(o,i,t),s=r.indexOf(a),u=n[s]||[];-1===s&&(r.push(a),n.push(u)),u.push(o)})),n}function sr(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function ur(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function cr(t,e,n){return Gt(Pt(t,n),Bt(e,n),n)}function lr(t,e){var n,r=t.is3d?4:3;return n=cr(t.rootMatrix,[e.distX,e.distY],r),e.distX=n[0],e.distY=n[1],e}function fr(t,e,n,r,o){return jt(In(t,zt(n,e),o),r)}function pr(t,e,n){return n?t/e*100+"%":t+"px"}function dr(t){return Math.abs(t)<=1e-7?0:t}function hr(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:j(t.inputEvent.target,Cn("direction"))}function vr(t){var e={};for(var n in t)e[t[n]]=n;return e}function gr(t,e){return t?m(t)?e?document.querySelector(t):t:y(t)?t():"current"in t?t.current:t:null}function mr(t){return t?((e=t)&&v(e)&&(g(e)||"length"in e)?[].slice.call(t):[t]).map((function(t){return gr(t)})):[];var e}var br={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,o=e.angle,i=e.originalDatas,a=t.props,s=a.pinchable,u=a.ables;if(!s)return!1;var c="onPinch"+(r?"Group":"")+"Start",l="drag"+(r?"Group":"")+"ControlStart",f=(!0===s?t.controlAbles:u.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[l]})),p=tr(t,e,{});r&&(p.targets=r);var d=nr(t,c,p);n.isPinch=!1!==d,n.ables=f;var h=n.isPinch;return!!h&&(f.forEach((function(n){if(i[n.name]=i[n.name]||{},n[l]){var r=sn(sn({},e),{datas:i[n.name],parentRotate:o,isPinch:!0});n[l](t,r)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(t,e){var n=e.datas,r=e.scale,o=e.distance,i=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(n.isPinch){var c=o*(1-1/r),l=tr(t,e,{});s&&(l.targets=s),nr(t,"onPinch"+(s?"Group":""),l);var f=n.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach((function(n){n[p]&&n[p](t,sn(sn({},e),{datas:i[n.name],inputEvent:a,parentDistance:c,parentRotate:u,isPinch:!0}))})),l}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,o=e.inputEvent,i=e.targets,a=e.originalDatas;if(n.isPinch){var s="onPinch"+(i?"Group":"")+"End",u=er(t,e,{isDrag:r});i&&(u.targets=i),nr(t,s,u);var c=n.ables,l="drag"+(i?"Group":"")+"ControlEnd";return c.forEach((function(n){n[l]&&n[l](t,sn(sn({},e),{isDrag:r,datas:a[n.name],inputEvent:o,isPinch:!0}))})),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,sn(sn({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,sn(sn({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,sn(sn({},e),{targets:t.props.targets}))}};function yr(t,e,n,r,o){var i=e.gesto.move(n,t.inputEvent),a=i.originalDatas||i.datas,s=a.draggable||(a.draggable={});return sn(sn({},o?lr(e,i):i),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var xr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n.draggable||(n.draggable={}),sn(sn({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Er(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var o=r.groupable;o.childDatas=o.childDatas||[];var i=o.childDatas,a=n.inputEvent,s=n.isPinch,u=n.clientX,c=n.clientY,l=n.distX,f=n.distY;return t.moveables.map((function(t,n){return i[n]=i[n]||{},i[n][e]=i[n][e]||{},{inputEvent:a,datas:i[n][e],originalDatas:i[n],isPinch:s,clientX:u,clientY:c,distX:l,distY:f}}))}function wr(t,e,n,r,o,i){var a=!!n.match(/Start$/g),s=!!n.match(/End$/g),u=o.isPinch,c=o.datas,l=Er(t,e.name,o),f=t.moveables,p=l.map((function(t,o){var l=f[o],p=t;a?p=(new xr).dragStart(r,t):(l.state.gesto||(l.state.gesto=c.childGestos[o]),p=yr(t,l.state,r,u,i));var d=e[n](l,sn(sn({},p),{parentFlag:!0}));return s&&(l.state.gesto=null),d}));return a&&(c.childGestos=f.map((function(t){return t.state.gesto}))),p}function Cr(t,e,n,r,o,i){void 0===o&&(o=function(t,e){return e});var a=!!n.match(/End$/g),s=Er(t,e.name,r),u=t.moveables;return s.map((function(t,r){var s,c=u[r];s=o(c,t);var l=e[n](c,sn(sn({},s),{parentFlag:!0}));return l&&i&&i(c,t,l,r),a&&(c.state.gesto=null),l}))}function Sr(t,e){var n=e.clientX,r=e.clientY,o=e.datas,i=t.state,a=i.moveableClientRect,s=i.rootMatrix,u=i.is3d,c=i.pos1,l=jt(cr(s,[n-a.left,r-a.top],u?4:3),c),f=Or({datas:o,distX:l[0],distY:l[1]});return[f[0],f[1]]}function _r(t,e){var n=e.datas,r=t.state,o=r.allMatrix,i=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,c=r.origin,l=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=a?4:3;n.is3d=a,n.matrix=o,n.targetMatrix=f,n.beforeMatrix=i,n.offsetMatrix=l,n.transformOrigin=p,n.inverseMatrix=Pt(o,d),n.inverseBeforeMatrix=Pt(i,d),n.absoluteOrigin=Bt(zt([s,u],c),d),n.startDragBeforeDist=Gt(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=Gt(n.inverseMatrix,n.absoluteOrigin,d)}function Ar(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,o=n.transformIndex,i=r.nextTransforms,a=r.nextTransformAppendedIndexes,s=-1===o?i.length:o+a.filter((function(t){return t<o})).length,u=function(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),o=t[e]||"",i=e<0?[]:t.slice(e),a=e<0?[]:t.slice(e+1),s=te(n),u=te(r),c=te([o]),l=te(i),f=te(a),p=Qt(s),d=Qt(u),h=Qt(l),v=Qt(f),g=Nt(p,h,4);return{transforms:t,beforeFunctionMatrix:p,beforeFunctionMatrix2:d,targetFunctionMatrix:Qt(c),afterFunctionMatrix:h,afterFunctionMatrix2:v,allFunctionMatrix:g,beforeFunctions:s,beforeFunctions2:u,targetFunction:c[0],afterFunctions:l,afterFunctions2:f,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:o,afterFunctionTexts:i,afterFunctionTexts2:a}}(i,s),c=u.targetFunction,l="rotate"===e?"rotateZ":e;n.beforeFunctionTexts=u.beforeFunctionTexts,n.afterFunctionTexts=u.afterFunctionTexts,n.beforeTransform=u.beforeFunctionMatrix,n.beforeTransform2=u.beforeFunctionMatrix2,n.targetTansform=u.targetFunctionMatrix,n.afterTransform=u.afterFunctionMatrix,n.afterTransform2=u.afterFunctionMatrix2,n.targetAllTransform=u.allFunctionMatrix,c.functionName===l?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=un(a,[s]))}function Mr(t,e,n){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?n:e)+" "+t.afterFunctionTexts.join(" ")}function Dr(t){var e=t.datas,n=kr({datas:e,distX:t.distX,distY:t.distY});return Gt(Rr(e,function(t,e){for(var n=$t(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}([n[0],n[1]],4)),Bt([0,0,0],4),4)}function Rr(t,e,n){var r=t.beforeTransform,o=t.afterTransform,i=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=n?Nt(s,e,4):Nt(e,s,4),c=Nt(Pt(n?i:r,4),u,4);return Nt(c,Pt(n?a:o,4),4)}function kr(t){var e=t.datas,n=t.distX,r=t.distY,o=e.inverseBeforeMatrix,i=e.is3d,a=e.startDragBeforeDist,s=i?4:3;return jt(Gt(o,zt(e.absoluteOrigin,[n,r]),s),a)}function Or(t,e){var n=t.datas,r=t.distX,o=t.distY,i=n.inverseBeforeMatrix,a=n.inverseMatrix,s=n.is3d,u=n.startDragBeforeDist,c=n.startDragDist,l=s?4:3;return jt(Gt(e?i:a,zt(n.absoluteOrigin,[r,o]),l),e?u:c)}function Pr(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Br(t,e){return Pr(e).map((function(e){return t[e]}))}function Tr(t,e){var n=Br(t,e);return[T(n.map((function(t){return t[0]}))),T(n.map((function(t){return t[1]})))]}function Ir(t,e,n,r){return Nt(t,Sn(e,r,n),r)}function Nr(t,e,n){var r=t.transformOrigin,o=t.offsetMatrix,i=t.is3d,a=e.beforeTransform,s=e.afterTransform,u=i?4:3;return Ir(o,Tt(Nt(Nt(a,function(t){return Qt(te(t))}([n]),4),s,4),4,u),r,u)}function zr(t){var e=t.originalDatas.beforeRenderable;return{setTransform:function(n,r){void 0===r&&(r=-1),e.startTransforms=g(n)?n:w(n),Fr(t,r)},setTransformIndex:function(e){Fr(t,e)}}}function jr(t){Fr(t,-1)}function Fr(t,e){var n=t.originalDatas.beforeRenderable,r=t.datas;if(r.transformIndex=e,-1!==e){var o=n.startTransforms[e];if(o){var i=te([o]);r.startValue=i[0].functionValue}}}function Gr(t,e){t.originalDatas.beforeRenderable.nextTransforms=w(e)}function Lr(t,e,n,r,o){return Gr(o,e),{transform:e,drag:Vo.drag(t,yr(o,t.state,n,r,!1))}}function qr(t,e,n,r,o){var i=t.state,a=i.left,s=i.top,u=t.props.groupable,c=u?a:0,l=u?s:0,f=jt(r,Xr(t,n,Nr(t.state,o,e)));return jt(f,[c,l])}function Yr(t){var e=t.state,n=e.width,r=e.height,o=e.transformOrigin;return[o[0]/(n/2)-1,o[1]/(r/2)-1]}function Xr(t,e,n){void 0===n&&(n=t.state.allMatrix);var r=t.state,o=r.width,i=r.height,a=r.is3d?4:3;return In(n,[o/2*(1+e[0]),i/2*(1+e[1])],a)}function Wr(t,e,n,r,o,i){var a=t.props.groupable,s=t.state,u=s.transformOrigin,c=s.targetMatrix,l=s.offsetMatrix,f=s.is3d,p=s.width,d=s.height,h=s.left,v=s.top,g=f?4:3,m=a?h:0,b=a?v:0;return jt(function(t,e,n,r,o,i){var a=Tr(Nn(e,n,r,o),i);return[t[0]-a[0],t[1]-a[1]]}(o,Ir(l,c,function(t,e,n,r,o,i){return void 0===r&&(r=e),void 0===o&&(o=n),void 0===i&&(i=[0,0]),t?t.map((function(t,a){var s=_(t),u=s.value,c=s.unit,l=a?o:r,f=a?n:e;return"%"===t||isNaN(u)?f*(l?i[a]/l:0):"%"!==c?u:f*u/100})):i}(i,e,n,p,d,u),g),e,n,g,r),[m,b])}function Hr(t,e){return Tr(Kn(t.state),e)}function Ur(t,e,n){var r=In(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Vr(t,e,n,r,o,i){var a=o[0],s=o[1],u=i[0],c=i[1],l=[],f=r?0:1,p="vertical"===e?"horizontal":"vertical",d=ar(t.filter((function(t){return t.type===e})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var e=t.pos,n=t.sizes;return e[f]<=c&&u<=e[f]+n[f]}));return d.forEach((function(t){var e=t.pos[r],o=e+t.sizes[r];d.forEach((function(t){var i=t.pos,u=t.sizes,c=t.element,f=i[r],h=f+u[r],v=0,g=0,m=!0;if(o<=f)a<(v=h-(g=o-f))-n&&(m=!1);else{if(!(h<=e))return;s>(v=f-(g=e-h))+n&&(m=!1)}if(m&&l.push({pos:"vertical"===p?[v,i[1]]:[i[0],v],element:c,sizes:u,size:0,type:p,gap:g,gapGuidelines:d}),o<=a&&s<=f){var b=(f+o-(s-a))/2;Jn(a-(b-n),.1)>=0&&l.push({pos:"vertical"===p?[b,i[1]]:[i[0],b],element:c,sizes:u,size:0,type:p,gap:o-a,gapGuidelines:d})}}))})),l}function $r(t,e,n,r,o,i,a){return void 0===i&&(i=0),void 0===a&&(a=0),r&&r.forEach((function(n){t.push({type:"horizontal",pos:[0,Jn(n-a,.1)],size:e})})),o&&o.forEach((function(e){t.push({type:"vertical",pos:[Jn(e-i,.1),0],size:n})})),t}function Kr(t,e){var n=[],r=t.state;if(e&&r.guidelines&&r.guidelines.length)return n;var o=t.props,i=o.elementGuidelines,a=void 0===i?[]:i,s=o.snapCenter;if(!a.length)return n;var u=r.containerClientRect,c=r.targetClientRect,l=c.top,f=c.left,p=r.rootMatrix,d=r.is3d?4:3,h=Ur(p,u,d),v=h[0],g=h[1],m=re(Kn(r)),b=jt([m.minX,m.minY],cr(p,[f-v,l-g],d)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),y=b[0],x=b[1];return a.map((function(t){return"parentElement"in t?{element:t}:t})).filter((function(t){return t.refresh&&e||!t.refresh&&!e})).forEach((function(t){var e=t.element,r=t.top,o=t.left,i=t.right,a=t.bottom,u=e.getBoundingClientRect(),c=u.left-v,l=u.top-g,f=l+u.height,h=c+u.width,m=cr(p,[c,l],d),b=m[0],E=m[1],w=cr(p,[h,f],d),C=w[0],S=w[1],_=C-b,A=S-E,M=[_,A];!1!==r&&n.push({type:"vertical",element:e,pos:[Jn(b+y,.1),E],size:A,sizes:M}),!1!==a&&n.push({type:"vertical",element:e,pos:[Jn(C+y,.1),E],size:A,sizes:M}),!1!==o&&n.push({type:"horizontal",element:e,pos:[b,Jn(E+x,.1)],size:_,sizes:M}),!1!==i&&n.push({type:"horizontal",element:e,pos:[b,Jn(S+x,.1)],size:_,sizes:M}),s&&(n.push({type:"vertical",element:e,pos:[Jn((b+C)/2+y,.1),E],size:A,sizes:M,center:!0}),n.push({type:"horizontal",element:e,pos:[b,Jn((E+S)/2+x,.1)],size:_,sizes:M,center:!0}))})),n}function Jr(t){var e=t.state,n=e.staticGuidelines,r=e.containerClientRect,o=r.scrollHeight,i=r.scrollWidth,a=r.clientHeight,s=r.clientWidth,u=r.overflow,c=r.clientLeft,l=r.clientTop,f=t.props,p=f.snapHorizontal,d=void 0===p||p,h=f.snapVertical,v=void 0===h||h,g=f.snapGap,m=void 0===g||g,b=f.verticalGuidelines,y=f.horizontalGuidelines,x=f.snapThreshold,E=void 0===x?5:x,w=un(n,Kr(t,!0));if(m){var C=zn(Kn(t.state)),S=C.top,_=C.left,A=C.bottom,M=C.right,D=n.filter((function(t){return t.element}));w.push.apply(w,un(Vr(D,"horizontal",E,0,[_,M],[S,A]),Vr(D,"vertical",E,1,[S,A],[_,M])))}return $r(w,u?i:s,u?o:a,d&&y,v&&b,c,l),w}function Zr(t,e,n,r,o){var i=t.props,a=i.snapElement,s=void 0===a||a,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var o=t[r];if(!h(o))return o}return t[n]}(o,i.snapThreshold,5);return Qr(t.state.guidelines,e,n,{snapThreshold:u,snapCenter:r,snapElement:s})}function Qr(t,e,n,r){return{vertical:no(t,"vertical",e,r),horizontal:no(t,"horizontal",n,r)}}function to(t,e,n,r){var o=t.props.snapCenter&&n,i=["left","right"],a=["top","bottom"];return o&&(i.push("center"),a.push("middle")),i=i.filter((function(t){return t in e})),a=a.filter((function(t){return t in e})),Zr(t,i.map((function(t){return e[t]})),a.map((function(t){return e[t]})),o,r)}function eo(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],o=r.offset,i=r.dist,a=r.guideline;return{isSnap:e,offset:o,dist:i,pos:n.pos,guideline:a}}function no(t,e,n,r){var o=void 0===r?{}:r,i=o.snapThreshold,a=void 0===i?5:i,s=o.snapElement,u=o.snapCenter;if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var c="vertical"===e?0:1,l=n.map((function(n,r){var o=t.map((function(t){var e=t.pos,r=n-e[c];return{offset:r,dist:Math.abs(r),guideline:t}})).filter((function(t){var n=t.guideline,r=t.dist,o=n.type,i=n.center,c=n.element;return!(!s&&c||!u&&i||o!==e||r>a)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,index:r,guidelineInfos:o}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),f=l.length>0;return{isSnap:f,index:f?l[0].index:-1,posInfos:l}}function ro(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<1e-7?1:r<1e-7?-1:n-r}function oo(t,e){return t.slice().sort((function(t,n){var r=t.sign[e],o=n.sign[e],i=t.offset[e],a=n.offset[e];return r?o?ro({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:a}):-1:1}))[0]}function io(t,e){var n=T([e[0][0],e[1][0]]),r=T([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function ao(t,e){var n,r,o=e[0],i=e[1],a=i[0]-o[0],s=i[1]-o[1];if(Math.abs(a)<1e-7&&(a=0),Math.abs(s)<1e-7&&(s=0),a)if(s){n=s/a*(t[0]-o[0])+o[1],r=t[1]}else n=o[1],r=t[1];else n=o[0],r=t[0];return n-r}function so(t,e,n){void 0===n&&(n=1e-7);var r=ao(t[0],e)<=0;return t.slice(1).every((function(t){var o=ao(t,e);return o<=0===r||Math.abs(o)<=n}))}function uo(t,e,n,r,o){return void 0===o&&(o=0),r&&e-o<=t||!r&&t<=n+o?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function co(t,e,n,r,o){var i=t[0],a=t[1],s=e[0],u=e[1],c=dr(a[1]-i[1]),l=dr(a[0]-i[0]),f=dr(u[1]-s[1]);if(!dr(u[0]-s[0])){if(o&&!c)return{isBound:!1,offset:0};if(l)return uo(c/l*(s[0]-i[0])+i[1],s[1],u[1],n,r);var p=s[0]-i[0];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}if(!f){if(o&&!l)return{isBound:!1,offset:0};if(c)return uo((s[1]-i[1])/(c/l)+i[0],s[0],u[0],n,r);var d;p=s[1]-i[1];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}return{isBound:!1,offset:0}}function lo(t,e,n,r){return e.map((function(e){var o=e[0],i=e[1],a=e[2],s=function(t,e,n){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var o=r.left,i=r.top,a=r.width,s=r.height,u=[[o,i],[o,i+s]],c=[[o,i],[o+a,i]],l=[[o+a,i],[o+a,i+s]],f=[[o,i+s],[o+a,i+s]],p=io(n,e),d=p.horizontal,h=p.vertical;if(so([n,[o,i],[o+a,i],[o,i+s],[o+a,i+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var v=co(e,c,h),g=co(e,f,h),m=co(e,u,d),b=co(e,l,d),y=v.isBound&&g.isBound,x=v.isBound||g.isBound,E=m.isBound&&b.isBound,w=m.isBound||b.isBound,C=ur(v.offset,g.offset),S=ur(m.offset,b.offset),_=[0,0],A=!1,M=!1;return Math.abs(S)<Math.abs(C)?(_=[C,0],A=x,M=y):(_=[0,S],A=w,M=E),{isAllBound:M,isVerticalBound:x,isHorizontalBound:w,isBound:A,offset:_}}(t,[i,a],n),u=s.isBound,c=s.offset,l=s.isVerticalBound,f=s.isHorizontalBound,p=Or({datas:r,distX:c[0],distY:c[1]}).map((function(t,e){return t*(o[e]?2/o[e]:0)}));return{sign:o,isBound:u,isVerticalBound:l,isHorizontalBound:f,isSnap:!1,offset:p}}))}function fo(t,e,n){var r,o=lo(t,po(e,[0,0],!1).map((function(t){var e=t[0],n=t[1],r=t[2];return[e.map((function(t){return 2*Math.abs(t)})),n,r]})),Tr(e,[0,0]),n),i=oo(o,0),a=oo(o,1),s=0,u=0,c=i.isVerticalBound||a.isVerticalBound,l=i.isHorizontalBound||a.isHorizontalBound;return(c||l)&&(s=(r=function(t,e){var n=t.datas,r=t.distX,o=t.distY,i=n.beforeMatrix,a=n.matrix,s=n.is3d,u=n.startDragBeforeDist,c=n.startDragDist,l=n.absoluteOrigin,f=s?4:3;return jt(Gt(e?i:a,zt(e?u:c,[r,o]),f),l)}({datas:n,distX:-i.offset[0],distY:-a.offset[1]}))[0],u=r[1]),{vertical:{isBound:c,offset:s},horizontal:{isBound:l,offset:u}}}function po(t,e,n){return function(t,e){var n=[],r=t[0],o=t[1];return r&&o?n.push([[0,2*o],t,[-r,o]],[[2*r,0],t,[r,-o]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):o?(n.push([[0,2*o],[1,o],[-1,o]]),e&&n.push([[-1,0],[-1,o],[-1,-o]],[[1,0],[1,o],[1,-o]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(e,n).map((function(e){var n=e[0],r=e[1],o=e[2];return[n,Tr(t,r),Tr(t,o)]}))}function ho(t,e,n,r){var o=r?t.map((function(t){return Wt(t,r)})):t,i=un([n],e);return[[o[0],o[1]],[o[1],o[3]],[o[3],o[2]],[o[2],o[0]]].some((function(t,e){return!so(i,t)}))}function vo(t,e,n,r,o){var i=t.props.innerBounds,a=o*Math.PI/180;if(!i)return[];var s=i.left,u=i.top,c=i.width,l=i.height,f=s-r[0],p=s+c-r[0],d=u-r[1],h=u+l-r[1],v=[[f,d],[p,d],[f,h],[p,h]],g=Tr(n,[0,0]);if(!ho(n,v,g,0))return[];var m=[],b=v.map((function(t){return[Gn(t),I([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=I([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],o=n[1]-e[1];if(!r)return[e[0],0];if(!o)return[0,e[1]];var i=o/r,a=-i*e[0]+e[1];return[-a/(i+1/i),a/(i*i+1)]}(t)),r=function(t){var e=t[0],n=t[1],r=n[0]-e[0],o=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!o)return Math.abs(e[1]);var i=o/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}(t);m.push.apply(m,b.filter((function(t){var e=t[0];return e&&r<=e})).map((function(t){var e=t[0],o=t[1],i=Math.acos(e?r/e:0);return[a+(o+i)-n,a+(o-i)-n]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!ho(e,v,g,t)})).map((function(t){return Jn(180*t/Math.PI,1e-7)})))})),m}function go(t,e,n){var r=t||{},o=r.left,i=void 0===o?-1/0:o,a=r.top,s=void 0===a?-1/0:a,u=r.right,c=void 0===u?1/0:u,l=r.bottom,f={left:i,top:s,right:c,bottom:void 0===l?1/0:l};return{vertical:mo(f,e,!0),horizontal:mo(f,n,!1)}}function mo(t,e,n){var r=t[n?"left":"top"],o=t[n?"right":"bottom"],i=Math.min.apply(Math,e),a=Math.max.apply(Math,e),s=[];return r+1>i&&s.push({isBound:!0,offset:i-r,pos:r}),o-1<a&&s.push({isBound:!0,offset:a-o,pos:o}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function bo(t,e,n){return(n?t.map((function(t){return Wt(t,n)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function yo(t,e,n,r,o){var i=t.props.bounds,a=o*Math.PI/180;if(!i)return[];var s=i.left,u=void 0===s?-1/0:s,c=i.top,l=void 0===c?-1/0:c,f=i.right,p=void 0===f?1/0:f,d=i.bottom,h=void 0===d?1/0:d,v=u-r[0],g=p-r[0],m=l-r[1],b=h-r[1],y={left:v,top:m,right:g,bottom:b};if(!bo(n,y,0))return[];var x=[];return[[v,0],[g,0],[m,1],[b,1]].forEach((function(t,r){var o=t[0],i=t[1];n.forEach((function(t){var n=I([0,0],t);x.push.apply(x,function(t,e,n){var r=Gn(t),o=Math.sqrt(r*r-e*e)||0;return[o,-o].sort((function(e,r){return Math.abs(e-t[n?0:1])-Math.abs(r-t[n?0:1])})).map((function(t){return I([0,0],n?[t,e]:[e,t])}))}(t,o,i).map((function(t){return a+t-n})).filter((function(t){return!bo(e,y,t)})).map((function(t){return Jn(180*t/Math.PI,1e-7)})))}))})),x}var xo=["horizontal","left","top","width","Y","X"],Eo=["vertical","top","left","height","X","Y"];function wo(t){var e=t.state;e.guidelines&&e.guidelines.length||(e.staticGuidelines=Kr(t,!1),e.guidelines=Jr(t),e.enableSnap=!0)}function Co(t,e){var n=t.props,r=n.snappable,o=n.bounds,i=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,u=t.state,c=u.guidelines,l=u.enableSnap;return!(!r||!l||e&&!0!==r&&r.indexOf(e)<0)&&!!(o||i||c&&c.length||a&&a.length||s&&s.length)}function So(t,e,n,r,o){var i=function(t,e,n,r){var o=e[0]-t[0],i=e[1]-t[1];Math.abs(o)<1e-7&&(o=0);Math.abs(i)<1e-7&&(i=0);if(!o)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var a=i/o,s=t[1]-a*t[0];return r?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,r);if(!i)return[0,0];var a=Or({datas:o,distX:i[0],distY:i[1]});return[a[0],a[1]]}function _o(t,e,n,r,o,i){var a=Nn(t,e,n,i?4:3);return $n(a,jt(r,function(t,e){return Tr(t,e.map((function(t){return-t})))}(a,o)))}function Ao(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Mo(t,e){return t.isBound?t.offset:e.isSnap?eo(e).offset:0}function Do(t,e,n,r){var o=function(t,e,n){var r=t.props.bounds||{},o=r.left,i=void 0===o?-1/0:o,a=r.top,s=void 0===a?-1/0:a,u=r.right,c=void 0===u?1/0:u,l=r.bottom,f=void 0===l?1/0:l,p=n[0],d=n[1],h=jt(n,e),v=h[0],g=h[1];Math.abs(v)<1e-7&&(v=0),Math.abs(g)<1e-7&&(g=0);var m=g>0,b=v>0,y={isBound:!1,offset:0,pos:0},x={isBound:!1,offset:0,pos:0};if(0===v&&0===g)return{vertical:y,horizontal:x};if(0===v)m?f<d&&(x.pos=f,x.offset=d-f):s>d&&(x.pos=s,x.offset=d-s);else if(0===g)b?c<p&&(y.pos=c,y.offset=p-c):i>p&&(y.pos=i,y.offset=p-i);else{var E=g/v,w=n[1]-E*p,C=0,S=0,_=!1;b&&c<=p?(C=E*c+w,S=c,_=!0):!b&&p<=i&&(C=E*i+w,S=i,_=!0),_&&(C<s||C>f)&&(_=!1),_||(m&&f<=d?(S=((C=f)-w)/E,_=!0):!m&&d<=s&&(S=((C=s)-w)/E,_=!0)),_&&(y.isBound=!0,y.pos=S,y.offset=p-S,x.isBound=!0,x.pos=C,x.offset=d-C)}return{vertical:y,horizontal:x}}(t,e,n),i=o.horizontal,a=o.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],o=n[1],i=e[0],a=e[1],s=jt(n,e),u=s[0],c=s[1],l=c>0,f=u>0;u=dr(u),c=dr(c);var p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===c)return{vertical:p,horizontal:d};var h=Zr(t,u?[r]:[],c?[o]:[]),v=h.vertical,g=h.horizontal;v.posInfos.filter((function(t){var e=t.pos;return f?e>=i:e<=i})),g.posInfos.filter((function(t){var e=t.pos;return l?e>=a:e<=a})),v.isSnap=v.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=eo(v),b=m.isSnap,y=m.guideline,x=eo(g),E=x.isSnap,w=x.guideline,C=E?w.pos[1]:0,S=b?y.pos[0]:0;if(0===u)E&&(d.isSnap=!0,d.pos=w.pos[1],d.offset=o-d.pos);else if(0===c)b&&(p.isSnap=!0,p.pos=S,p.offset=r-S);else{var _=c/u,A=n[1]-_*r,M=0,D=0,R=!1;b?(M=_*(D=S)+A,R=!0):E&&(D=((M=C)-A)/_,R=!0),R&&(p.isSnap=!0,p.pos=D,p.offset=r-D,d.isSnap=!0,d.pos=M,d.offset=o-M)}return{vertical:p,horizontal:d}}(t,e,n),u=s.horizontal,c=s.vertical,l=Ao(i,u),f=Ao(a,c),p=Math.abs(l),d=Math.abs(f);return{horizontal:{isBound:i.isBound,isSnap:u.isSnap,offset:l,dist:p},vertical:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:d}}}function Ro(t,e,n,r){void 0===r&&(r=n);var o=go(t.props.bounds,r.map((function(t){return t[0]})),r.map((function(t){return t[1]}))),i=o.horizontal,a=o.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Zr(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]})),t.props.snapCenter),u=s.horizontal,c=s.vertical,l=Mo(i[0],u),f=Mo(a[0],c),p=Math.abs(l),d=Math.abs(f);return{horizontal:{isBound:i[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:l,dist:p,bounds:i,snap:u},vertical:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:d,bounds:a,snap:c}}}function ko(t,e,n,r,o){void 0===o&&(o={});var i=go(e,n,r),a=i.horizontal,s=i.vertical,u=o.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Qr(t,n,r,o),c=u.horizontal,l=u.vertical,f=Mo(a[0],c),p=Mo(s[0],l),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:d,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:p,dist:h,bounds:s,snap:l}}}function Oo(t){return t?t/Math.abs(t):0}function Po(t,e,n,r,o,i){return n.map((function(n){var a=n[0],s=n[1],u=Tr(e,a),c=Tr(e,s),l=r?Do(t,u,c,o):Ro(t,o,[c]),f=l.horizontal,p=f.offset,d=f.isBound,h=f.isSnap,v=l.vertical,g=v.offset,m=v.isBound,b=v.isSnap,y=jt(s,a);if(!g&&!p)return{isBound:m||d,isSnap:b||h,sign:y,offset:[0,0]};var x=function(t,e,n,r){var o=I(t,e)/Math.PI*180,i=n.vertical,a=i.isBound,s=i.isSnap,u=i.dist,c=n.horizontal,l=c.isBound,f=c.isSnap,p=o%180,d=p<3||p>177,h=p>87&&p<93;return c.dist<u&&(a||s&&!h&&(!r||!d))?"vertical":!l&&(!f||d||r&&h)?"":"horizontal"}(u,c,l,r);if(!x)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===x,w=So(u,c,-(E?g:p),E,i).map((function(t,e){return t*(y[e]?2/y[e]:0)}));return{sign:y,isBound:E?m:d,isSnap:E?b:h,offset:w}}))}function Bo(t,e,n,r,o,i){var a=function(t,e){var n=[],r=[-t[0],-t[1]];return t[0]&&t[1]?(n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),e&&n.push([r,t])):t[0]?e?n.push([r,[r[0],-1]],[r,[r[0],1]],[r,[t[0],-1]],[r,t],[r,[t[0],1]]):n.push([[r[0],-1],[t[0],-1]],[[r[0],0],[t[0],0]],[[r[0],1],[t[0],1]]):t[1]?e?n.push([r,[-1,r[1]]],[r,[1,r[1]]],[r,[-1,t[1]]],[r,[1,t[1]]],[r,t]):n.push([[-1,r[1]],[-1,t[1]]],[[0,r[1]],[0,t[1]]],[[1,r[1]],[1,t[1]]]):n.push([r,[1,0]],[r,[-1,0]],[r,[0,-1]],[r,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),n}(n,r),s=po(e,n,r),u=un(Po(t,e,a,r,o,i),lo(t,s,Tr(e,[0,0]),i)),c=oo(u,0),l=oo(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:l.isBound,offset:l.offset[1]}}}function To(t,e,n,r,o,i,a,s){for(var u=Kn(t.state),c=t.props.keepRatio,l=0,f=0,p=0;p<2;++p){var d=Bo(t,e(l,f),o,c,a,s),h=d.width,v=d.height,g=h.isBound,m=v.isBound,b=h.offset,y=v.offset;if(1===p&&(g||(b=0),m||(y=0)),0===p&&a&&!g&&!m)return[0,0];if(c){var x=Math.abs(b)*(n?1/n:1),E=Math.abs(y)*(r?1/r:1);(g&&m?x<E:m||!g&&x<E)?b=n*y/r:y=r*b/n}l+=b,f+=y}if(o[0]&&o[1]){var w=function(t,e,n,r,o){var i=[-n[0],-n[1]],a=t.state,s=a.width,u=a.height,c=t.props.bounds,l=1/0,f=1/0;if(c){var p=[[n[0],-n[1]],[-n[0],n[1]]],d=c.left,h=void 0===d?-1/0:d,v=c.top,g=void 0===v?-1/0:v,m=c.right,b=void 0===m?1/0:m,y=c.bottom,x=void 0===y?1/0:y;p.forEach((function(t){var n=t[0]!==i[0],a=t[1]!==i[1],c=Tr(e,t),p=Oo(t[1]-i[1]),d=Oo(t[0]-i[0]),v=360*I(r,c)/Math.PI;if(a){var m=c.slice();(Math.abs(v-360)<2||Math.abs(v-180)<2)&&(m[1]=r[1]);var y=So(r,m,(r[1]<c[1]?x:g)-c[1],!1,o)[1];isNaN(y)||(f=u+p*y)}if(n){m=c.slice(),(Math.abs(v-90)<2||Math.abs(v-270)<2)&&(m[0]=r[0]);var E=So(r,m,(r[0]<c[0]?b:h)-c[0],!0,o)[0];isNaN(E)||(l=s+d*E)}}))}return{maxWidth:l,maxHeight:f}}(t,u,o,i,s),C=w.maxWidth,S=w.maxHeight,_=function(t,e,n,r,o,i,a,s,u){var c=Ro(t,s,[Tr(e,a)]),l=c.horizontal.offset,f=c.vertical.offset;if(f||l){var p=Or({datas:u,distX:-f,distY:-l}),d=p[0],h=p[1];return[Math.min(o||1/0,n+a[0]*d)-n,Math.min(i||1/0,r+a[1]*h)-r]}return[0,0]}(t,e(l,f),n+l,r+f,C,S,o,a,s);l+=b=_[0],f+=y=_[1]}return[l,f]}function Io(t,e,n,r){if(!Co(t,"rotatable"))return r;var o=e.pos1,i=e.pos2,a=e.pos3,s=e.pos4,u=r*Math.PI/180,c=[o,i,a,s].map((function(t){return jt(t,n)})),l=c.map((function(t){return Wt(t,u)})),f=un(yo(t,c,l,n,r),vo(t,c,l,n,r));return f.sort((function(t,e){return Math.abs(t-r)-Math.abs(e-r)})),f.length?f[0]:r}function No(t,e,n,r,o){var i=o.width,a=o.height,s=o.fixedPosition;if(!Co(t,"scalable"))return[0,0];var u=o.is3d,c=To(t,(function(t,r){return _o(function(t,e){var n=t.transformOrigin,r=t.offsetMatrix,o=t.is3d?4:3;return Ir(r,Nt(t.targetMatrix,Kt(e,o),o),n,o)}(o,zt(e,[t/i,r/a])),i,a,s,n,u)}),i,a,n,s,r,o);return[c[0]/i,c[1]/a]}function zo(t,e,n,r,o,i){if(!Co(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=$n(i.absolutePoses,[e,n]),s=zn(a),u=s.left,c=s.right,l=s.top,f=s.bottom,p=[[u,l],[c,l],[u,f],[c,f]];t.props.snapCenter&&p.push([(u+c)/2,(l+f)/2]);var d=Ro(t,o,p,a),h=d.vertical,v=d.horizontal,g=fo(t,a,i),m=g.vertical,b=g.horizontal,y=h.isSnap,x=v.isSnap,E=h.isBound||m.isBound,w=v.isBound||b.isBound,C=function(t,e,n,r,o){var i=e[0],a=e[1],s=n[0],u=n[1],c=r[0],l=r[1],f=o[0],p=o[1],d=-f,h=-p;if(t&&i&&a){d=0,h=0;var v=[];if(s&&u?v.push([0,p],[f,0]):s?v.push([f,0]):u?v.push([0,p]):c&&l?v.push([0,p],[f,0]):c?v.push([f,0]):l&&v.push([0,p]),v.length){v.sort((function(t,e){return Gn(jt([i,a],t))-Gn(jt([i,a],e))}));var g=v[0];if(g[0]&&Math.abs(i)>1e-7)d=-g[0],h=a*Math.abs(i+d)/Math.abs(i)-a;else if(g[1]&&Math.abs(a)>1e-7){var m=a;h=-g[1],d=i*Math.abs(a+h)/Math.abs(m)-i}if(t&&u&&s)if(Math.abs(d)>1e-7&&Math.abs(d)<Math.abs(f))d*=b=Math.abs(f)/Math.abs(d),h*=b;else if(Math.abs(h)>1e-7&&Math.abs(h)<Math.abs(p)){var b;d*=b=Math.abs(p)/Math.abs(h),h*=b}else d=ur(-f,d),h=ur(-p,h)}}else d=i||s?-f:0,h=a||u?-p:0;return[d,h]}(r,[e,n],[E,w],[y,x],[ur(h.offset,m.offset),ur(v.offset,b.offset)]);return[{isBound:E,isSnap:y,offset:C[0]},{isBound:w,isSnap:x,offset:C[1]}]}function jo(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var n=t.guideline;e.indexOf(n)>-1||e.push(n)}))})),e}function Fo(t,e,n,r){var o=t-n,i=o<0?o+e:r;return{size:(o<0?0:o)-i,pos:i}}function Go(t,e,n,r){var o=[],i=ar(t.filter((function(t){var e=t.element,n=t.gap;return e&&!n})),(function(t){var n=t.element,i=t.pos,a=i[r],s=(Math.min(0,a-e)<0?-1:1)+"_"+i[r?0:1],u=function(t,e,n){var r=D(t,e);return r>-1?t[r]:n}(o,(function(t){var e=t[0],r=t[1];return n===e&&a===r}));return u?u[2]:(o.push([n,a,s]),s)}));return i.forEach((function(t){t.sort((function(t,o){return Fo(t.pos[r],t.size,e,n).size-Fo(o.pos[r],t.size,e,n).size||t.pos[r?0:1]-o.pos[r?0:1]}))})),i}function Lo(t,e,n,r,o,i,a,s,u,c,l,f){var p=n[0],d=n[1],h=n[2],v=n[3],g=n[4],m=n[5],b=t.props,y=b.zoom,x=b.isDisplaySnapDigit,E=void 0===x||x;return sr(e.map((function(t,e){var n=!0;return t.map((function(t,b){var x,w,C=t.pos,S=t.size,_=Fo(C[c],S,o,i),A=_.pos,M=_.size;if(M<s)return null;var D=n;n=!1;var R=E&&D?parseFloat(M.toFixed(u)):0;return f.createElement("div",{key:p+"LinkGuideline"+e+"-"+b,className:Cn("guideline-group",p),style:(x={},x[d]=r+A+"px",x[h]=-a+C[c?0:1]+"px",x[v]=M+"px",x)},f.createElement("div",{className:Cn("line",p,"guideline","dashed"),style:(w={},w[d]="0%",w[h]="0%",w[v]="100%",w.transform="translate"+g+"(-50%) scale"+g+"("+y+")",w)}),f.createElement("div",{className:Cn("size-value"),style:{transform:"translate"+m+"(-50%) scale("+y+")"}},R>0?l(R):""))}))})))}function qo(t,e,n,r,o,i,a){var s=n[0],u=n[1],c=n[2],l=n[3],f=n[4],p=t.props.zoom;return e.map((function(t,e){var n,d=t.type,h=t.pos;return a.createElement("div",{className:Cn("line",s,"guideline","target","bold",d),key:s+"TargetGuideline"+e,style:(n={},n[u]=r+"px",n[c]=-o+h+"px",n[l]=i+"px",n.transform="translate"+f+"(-50%) scale"+f+"("+p+")",n)})}))}function Yo(t,e,n,r,o,i,a){var s=n[0],u=n[1],c=n[2],l=n[3],f=n[4],p=t.props.zoom;return e.map((function(t,e){var n,d=t.pos,h=t.size,v=t.element;return a.createElement("div",{className:Cn("line",s,"guideline",v?"bold":""),key:s+"Guideline"+e,style:(n={},n[u]=-r+d[i]+"px",n[c]=-o+d[i?0:1]+"px",n[l]=h+"px",n.transform="translate"+f+"(-50%) scale"+f+"("+p+")",n)})}))}function Xo(t,e,n,r){var o=t.filter((function(t){var n=t.element,r=t.gap,o=t.type;return n&&r&&o===e})),i="vertical"===e?[0,1]:[1,0],a=i[0],s=i[1];return sr(o.map((function(t){var e=t.pos,o=t.gap,i=t.gapGuidelines,u=t.sizes,c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(t)-Math.abs(e)})),t[0]}(e[s]+u[s]-n[s],e[s]-n[s]-r[s]),l=Math.min(u[s],r[s]);c>0&&c>l?c=2*(c-l/2):c<0&&c<-l&&(c=2*(c+l/2));var f=(c>0?0:r[s])+c/2;return un(function(t,e,n,r,o,i,a){var s=Math.abs(i),u=o[e]+(i>0?r[0]:0);return t.filter((function(t){return t.pos[e]<=n[e]})).sort((function(t,n){var r=t.pos;return n.pos[e]-r[e]})).filter((function(t){var n=t.pos,r=t.sizes,o=n[e];return Jn(o+r[e],1e-4)===Jn(u-s,1e-4)&&(u=o,!0)})).map((function(t){var r=-n[e]+t.pos[e]+t.sizes[e];return sn(sn({},t),{gap:i,renderPos:e?[a,r]:[r,a]})}))}(i,a,n,r,e,o,f),function(t,e,n,r,o,i,a){var s=Math.abs(i),u=o[e]+(i<0?r[e]:0);return t.filter((function(t){return t.pos[e]>n[e]})).sort((function(t,n){var r=t.pos,o=n.pos;return r[e]-o[e]})).filter((function(t){var n=t.pos,r=t.sizes,o=n[e];return Jn(o,1e-4)===Jn(u+s,1e-4)&&(u=o+r[e],!0)})).map((function(t){var r=-n[e]+t.pos[e]-s;return sn(sn({},t),{gap:i,renderPos:e?[a,r]:[r,a]})}))}(i,a,n,r,e,o,f))})))}function Wo(t,e,n,r,o,i){var a=r[0],s=r[1],u=r[2],c=r[3],l=r[4],f=r[5],p=t.props,d=p.snapDigit,h=void 0===d?0:d,v=p.isDisplaySnapDigit,g=void 0===v||v,m=p.zoom,b="vertical"===n?"horizontal":"vertical",y="vertical"===n?[0,1]:[1,0],x=y[0],E=y[1];return e.map((function(t,e){var n,r,p=t.renderPos,d=t.gap,v=Math.abs(d),y=g?parseFloat(v.toFixed(h)):0;return i.createElement("div",{key:b+"GapGuideline"+e,className:Cn("guideline-group",a),style:(n={},n[s]=p[x]+"px",n[u]=p[E]+"px",n[c]=v+"px",n)},i.createElement("div",{className:Cn("line",a,"guideline","gap"),style:(r={},r[c]="100%",r.transform="translate"+l+"(-50%) scale"+l+"("+m+")",r)}),i.createElement("div",{className:Cn("size-value","gap"),style:{transform:"translate"+f+"(-50%) scale("+m+")"}},y>0?o(y):""))}))}function Ho(t,e,n,r,o,i){var a=go(i||t.props.bounds,e,n),s=a.vertical,u=a.horizontal;s.forEach((function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})})),u.forEach((function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})}));var c=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,o=n.pos2,i=n.pos3,a=n.pos4,s=Tr([r,o,i,a],[0,0]),u=e.left,c=e.top,l=e.width,f=e.height,p=[[u,c],[u,c+f]],d=[[u,c],[u+l,c]],h=[[u+l,c],[u+l,c+f]],v=[[u,c+f],[u+l,c+f]],g=[],m=[],b={top:!1,bottom:!1,left:!1,right:!1};return[[r,o],[o,a],[a,i],[i,r]].forEach((function(t){var e=io(s,t),n=e.horizontal,r=e.vertical,o=co(t,d,r,1,!0),i=co(t,v,r,1,!0),a=co(t,p,n,1,!0),y=co(t,h,n,1,!0);o.isBound&&!b.top&&(g.push(c),b.top=!0),i.isBound&&!b.bottom&&(g.push(c+f),b.bottom=!0),a.isBound&&!b.left&&(m.push(u),b.left=!0),y.isBound&&!b.right&&(m.push(u+l),b.right=!0)})),{horizontal:g,vertical:m}}(t),l=c.vertical,f=c.horizontal;l.forEach((function(t){D(r,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||r.push({type:"bounds",pos:t})})),f.forEach((function(t){D(o,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||o.push({type:"bounds",pos:t})}))}var Uo={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,o=n.left,i=n.pos1,a=n.pos2,s=n.pos3,u=n.pos4,c=n.snapRenderInfo,l=n.targetClientRect,f=n.containerClientRect,p=n.is3d,d=n.rootMatrix;if(!c||!Co(t,""))return[];var h=p?4:3,v=Math.min(i[0],a[0],s[0],u[0]),g=Math.min(i[1],a[1],s[1],u[1]),m=Ur(d,f,h),b=cr(d,[l.left-m[0],l.top-m[1]],h),y=b[0],x=b[1],E=t.props,w=E.snapThreshold,C=void 0===w?5:w,S=E.snapDigit,_=void 0===S?0:S,A=E.snapDistFormat,M=void 0===A?function(t){return t}:A,D=c.externalPoses||[],R=Kn(t.state),k=[],O=[],P=[],B=[],T=[],I=zn(R),N=I.width,z=I.height,j=I.top,F=I.left,G=I.bottom,L=I.right,q=D.length>0,Y=q?zn(D):{};if(!c.request){if(c.direction&&T.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map((function(t){return Tr(e,t)}));else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map((function(t){return Tr(e,t)})):(r=Br(e,n)).length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var o=[e[0],e[1],e[3],e[2],e[0]],i=0;i<4;++i)r.push(o[i]),r.push([(o[i][0]+o[i+1][0])/2,(o[i][1]+o[i+1][1])/2]);return Zr(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]})),!0,1)}(t,R,c.direction)),c.snap){var X=zn(R);c.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),T.push(to(t,X,!0,1))}q&&(c.center&&(Y.middle=(Y.top+Y.bottom)/2,Y.center=(Y.left+Y.right)/2),T.push(to(t,Y,!0,1))),T.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;k.push.apply(k,e.map((function(t){return{type:"snap",pos:t.pos}}))),O.push.apply(O,n.map((function(t){return{type:"snap",pos:t.pos}}))),P.push.apply(P,jo(e)),B.push.apply(B,jo(n))}))}Ho(t,[F,L],[j,G],k,O),q&&Ho(t,[Y.left,Y.right],[Y.top,Y.bottom],k,O,c.externalBounds);var W=Go(B,y,N,0),H=Go(P,x,z,1),U=Xo(P,"vertical",[o,r],[N,z]),V=Xo(B,"horizontal",[o,r],[N,z]),$=un(P,B);return nr(t,"onSnap",{guidelines:$.filter((function(t){return!t.element})),elements:ar($.filter((function(t){return t.element})),(function(t){return t.element})),gaps:un(U,V)},!0),un(Wo(t,U,"vertical",xo,M,e),Wo(t,V,"horizontal",Eo,M,e),Lo(t,W,xo,v,y,N,r,C,_,0,M,e),Lo(t,H,Eo,g,x,z,o,C,_,1,M,e),qo(t,O,xo,v,r,N,e),qo(t,k,Eo,g,o,z,e),Yo(t,B,xo,o,r,0,e),Yo(t,P,Eo,r,o,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},wo(t)},drag:function(t,e){t.state.guidelines=Jr(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return!(!hr(t)&&!Qo(t))||(!t.isRequest&&t.inputEvent?j(t.inputEvent.target,Cn("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,wo(t)},dragControl:function(t){t.state.guidelines=Jr(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){t.state.guidelines=Jr(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,wo(t)},dragGroupControl:function(t){t.state.guidelines=Jr(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},Vo={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,o=n.zoom,i=t.state,a=i.dragInfo,s=i.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=Gn(u),l=I(u,[0,0]);return[e.createElement("div",{className:Cn("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:c+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+l+"rad) scaleY("+o+")"}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,o=e.parentGesto,i=t.state,a=i.target;if(i.gesto)return!1;i.gesto=o||t.targetGesto;var s=window.getComputedStyle(a);n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.startValue=[0,0],_r(t,e),jr(e),function(t,e){e.absolutePoses=Kn(t.state)}(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1;var u=tr(t,e,sn({set:function(t){n.startValue=t}},zr(e)));return!1!==(r||nr(t,"onDragStart",u))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(i.gesto=null,n.isPinch=!1),!!n.isDrag&&u},drag:function(t,e){Ar(e,"translate");var n=e.datas,r=e.parentEvent,o=e.parentFlag,i=e.isPinch,a=e.isRequest,s=e.distX,u=e.distY,c=n.isDrag,l=n.prevDist,f=n.prevBeforeDist,p=n.startValue;if(c){var d=t.props,h=d.parentMoveable,v=r?0:d.throttleDrag||0,g=r?0:d.throttleDragRotate||0,m=!1,b=0;if(!r&&g>0&&(s||u)){var y=d.startDragRotate||0,x=Jn(y+180*I([0,0],[s,u])/Math.PI,g)-y,E=u*Math.abs(Math.cos((x-90)/180*Math.PI)),w=Gn([s*Math.abs(Math.cos(x/180*Math.PI)),E]);b=x*Math.PI/180,s=w*Math.cos(b),u=w*Math.sin(b)}if(!i&&!r&&!o&&(!g||s||u)){var C=zo(t,s,u,g,a,n),S=C[0],_=C[1],A=S.isSnap,M=S.isBound,D=S.offset,R=_.isSnap,k=_.isBound;m=A||R||M||k,s+=D,u+=_.offset}n.passDeltaX=s-(n.passDistX||0),n.passDeltaY=u-(n.passDistY||0),n.passDistX=s,n.passDistY=u;var O=zt(kr({datas:n,distX:s,distY:u}),p),P=zt(Dr({datas:n,distX:s,distY:u}),p);g||m||(Zn(P,v),Zn(O,v));var B=jt(O,p),T=jt(P,p),N=jt(T,l),z=jt(B,f);n.prevDist=T,n.prevBeforeDist=B;var j=n.left+B[0],F=n.top+B[1],G=n.right-B[0],L=n.bottom-B[1],q=Mr(n,"translate("+P[0]+"px, "+P[1]+"px)","translate("+T[0]+"px, "+T[1]+"px)");if(t.state.dragInfo.dist=r?[0,0]:T,r||h||!N.every((function(t){return!t}))||!z.some((function(t){return!t}))){var Y=t.state,X=tr(t,e,{transform:q,dist:T,delta:N,translate:P,beforeDist:B,beforeDelta:z,beforeTranslate:O,left:j,top:F,right:G,bottom:L,width:Y.width,height:Y.height,isPinch:i});return!r&&nr(t,"onDrag",X),X}}},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas,o=e.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,!n&&nr(t,"onDragEnd",er(t,e,{})),o},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,o=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var a=wr(t,this,"dragStart",[r||0,o||0],e,!1),s=nr(t,"onDragGroupStart",sn(sn({},i),{targets:t.props.targets,events:a}));return n.isDrag=!1!==s,!!n.isDrag&&i},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=e.datas,o=wr(t,this,"drag",[r.passDeltaX,r.passDeltaY],e,!1);if(n){var i=sn({targets:t.props.targets,events:o},n);return nr(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),wr(t,this,"dragEnd",[0,0],e,!1),nr(t,"onDragGroupEnd",er(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=t.getRect(),r=0,o=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?o=t.y-n.top:"deltaY"in t&&(o+=t.deltaY),{datas:e,distX:r,distY:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function $o(t,e,n,r,o,i){var a=t.state.is3d?4:3,s=In(t.state.rootMatrix,o,a),u=zt([i.left,i.top],s);e.startAbsoluteOrigin=u,e.prevDeg=I(u,[n,r])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function Ko(t,e,n,r,o,i){var a=n.prevDeg,s=Io(t,e,n.origin,r);return n.prevDeg=s,[s-a,s,i+s]}function Jo(t,e,n,r,o,i,a,s){var u=n.prevDeg,c=n.prevSnapDeg,l=n.startDeg,f=n.loop;u>r&&u>270&&r<90?++n.loop:u<r&&u<90&&r>270&&--n.loop;var p=n.loop,d=360*f+c-l+i,h=360*p+r-l+i;n.prevDeg=h-360*p+l-i;var v=o*((h=Jn(h,a))-i);return s&&(h=(v=Io(t,e,n.origin,v))/o+i),n.prevSnapDeg=h-360*p+l-i,[o*(h-d),v,i+v]}function Zo(t,e,n,r,o,i,a,s){return Jo(t,e,n,I(n.startAbsoluteOrigin,[o,i])/Math.PI*180,r,a,s,!0)}function Qo(t){return t.isRequest?"rotatable"===t.requestAble:j(t.inputEvent.target,Cn("rotation-control"))}var ti={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,e){var n=t.props,r=n.rotatable,o=n.rotationPosition,i=n.zoom,a=t.state,s=a.renderPoses,u=a.direction;if(!r)return null;var c=function(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=(t||"top").split("-"),u=s[0],c=s[1],l=[r,o];"left"===u?l=[i,r]:"right"===u?l=[o,a]:"bottom"===u&&(l=[a,i]);var f=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2],p=Wn(l,n);if(c){var d="top"===c||"left"===c,h="bottom"===u||"left"===u;f=l[d&&!h||!d&&h?0:1]}return[f,p]}(o,s,u),l=c[0],f=c[1];return e.createElement("div",{key:"rotation",className:Cn("rotation"),style:{transform:"translate(-50%) translate("+l[0]+"px, "+l[1]+"px) rotate("+f+"rad)"}},e.createElement("div",{className:Cn("line rotation-line"),style:{transform:"scaleX("+i+")"}}),e.createElement("div",{className:Cn("control rotation-control"),style:{transform:"translate(0.5px) scale("+i+")"}}))},dragControlCondition:Qo,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,o=e.clientY,i=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.isRequest,c=t.state,l=c.target,f=c.left,p=c.top,d=c.origin,h=c.beforeOrigin,v=c.direction,g=c.beforeDirection,m=c.targetTransform,b=c.moveableClientRect;if(!u&&!l)return!1;var y=t.getRect();if(n.rect=y,n.transform=m,n.left=f,n.top=p,n.fixedPosition=Xr(t,Yr(t)),n.absoluteInfo={origin:y.origin,startValue:y.rotation},$o(t,n.absoluteInfo,r,o,d,b),u||s||a){var x=i||0;n.beforeInfo={origin:y.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},n.afterInfo={origin:y.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}}else n.beforeInfo={origin:y.beforeOrigin},n.afterInfo={origin:y.origin},$o(t,n.beforeInfo,r,o,h,b),$o(t,n.afterInfo,r,o,d,b);n.direction=v,n.beforeDirection=g,n.startValue=0,n.datas={},jr(e);var E=tr(t,e,sn(sn({set:function(t){n.startValue=t*Math.PI/180}},zr(e)),{dragStart:Vo.dragStart(t,(new xr).dragStart([0,0],e))})),w=nr(t,"onRotateStart",E);return n.isRotate=!1!==w,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&E},dragControl:function(t,e){var n,r,o,i,a,s,u,c,l,f=e.datas,p=e.clientX,d=e.clientY,h=e.parentRotate,v=e.parentFlag,g=e.isPinch,m=e.groupDelta,b=f.beforeDirection,y=f.beforeInfo,x=f.afterInfo,E=f.absoluteInfo,w=f.isRotate,C=f.startValue,S=f.rect;if(w){Ar(e,"rotate");var _,A,M,D,R,k,O,P,B,T=b*function(t){return Fn(t.datas.beforeTransform,[50,50],100,100).direction}(e),I=t.props,N=I.throttleRotate,z=void 0===N?0:N,j=I.parentMoveable,F=180/Math.PI*C,G=E.startValue;if(!v&&"parentDist"in e){var L=e.parentDist;_=(n=Ko(t,S,x,L,0,F))[0],A=n[1],M=n[2],D=(r=Ko(t,S,y,L,0,F))[0],R=r[1],k=r[2],O=(o=Ko(t,S,E,L,0,G))[0],P=o[1],B=o[2]}else g||v?(_=(i=Jo(t,S,x,h,T,F,z))[0],A=i[1],M=i[2],D=(a=Jo(t,S,y,h,b,F,z))[0],R=a[1],k=a[2],O=(s=Jo(t,S,E,h,T,G,z))[0],P=s[1],B=s[2]):(_=(u=Zo(t,S,x,T,p,d,F,z))[0],A=u[1],M=u[2],D=(c=Zo(t,S,y,b,p,d,F,z))[0],R=c[1],k=c[2],O=(l=Zo(t,S,E,T,p,d,G,z))[0],P=l[1],B=l[2]);if(O||_||D||j){var q=Mr(f,"rotate("+M+"deg)","rotate("+A+"deg)"),Y=function(t,e,n,r){return qr(t,"rotate("+e+"deg)",Yr(t),n,r)}(t,A,f.fixedPosition,f),X=jt(zt(m||[0,0],Y),f.prevInverseDist||[0,0]);f.prevInverseDist=Y;var W=tr(t,e,sn({delta:_,dist:A,rotate:M,beforeDist:R,beforeDelta:D,beforeRotate:k,absoluteDist:P,absoluteDelta:O,absoluteRotate:B,isPinch:!!g},Lr(t,q,X,g,e)));return nr(t,"onRotate",W),W}}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isRotate&&(n.isRotate=!1,nr(t,"onRotateEnd",er(t,e,{})),r)},dragGroupControlCondition:Qo,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,o=r.left,i=r.top,a=r.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(n.beforeDirection*t.rotation);var u=Cr(t,this,"dragControlStart",e,(function(t,e){var n=t.state,r=n.left,s=n.top,u=n.beforeOrigin,c=zt(jt([r,s],[o,i]),jt(u,a));return e.datas.groupClient=c,sn(sn({},e),{parentRotate:0})})),c=nr(t,"onRotateGroupStart",sn(sn({},s),{targets:t.props.targets,events:u}));return n.isRotate=!1!==c,!!n.isRotate&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){var r=this.dragControl(t,e);if(r){var o=n.beforeDirection,i=r.beforeDist,a=r.beforeDelta/180*Math.PI,s=Cr(t,this,"dragControl",e,(function(t,e){var n=e.datas.groupClient,r=n[0],s=n[1],u=Wt([r,s],a*o),c=u[0],l=u[1],f=[c-r,l-s];return e.datas.groupClient=[c,l],sn(sn({},e),{parentRotate:i,groupDelta:f})}));t.rotation=o*r.beforeRotate;var u=sn({targets:t.props.targets,events:s,set:function(e){t.rotation=e}},r);return nr(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate)return this.dragControlEnd(t,e),Cr(t,this,"dragControlEnd",e),nr(t,"onRotateGroupEnd",er(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function ei(t,e,n){var r=t.state,o=r.renderPoses,i=r.rotation,a=t.props,s=a.renderDirections,u=void 0===s?e:s,c=a.zoom,l=t.state.direction,f={};return u.forEach((function(t){f[t]=!0})),u.map((function(t){var e=xn[t];if(!e||!f[t])return null;var r=Jn(i/Math.PI*180,15)+En[t];return l<1&&(r=360-r),r%=180,n.createElement("div",{className:Cn("control","direction",t),"data-rotation":r,"data-direction":t,key:"direction-"+t,style:Yn.apply(void 0,un([i,c],e.map((function(t){return o[t]}))))})}))}function ni(t,e,n,r,o,i){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=I(n,r),c=e?Jn(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+i,className:Cn.apply(void 0,un(["line","direction",e],a)),"data-rotation":c,"data-line-index":i,"data-direction":e,style:qn(n,r,o,u)})}function ri(t,e){return ei(t,yn,e)}function oi(t,e){return ei(t,["nw","ne","sw","se"],e)}var ii={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,o=n.edge;if(r)return o?oi(t,e):ri(t,e)},dragControlCondition:hr,dragControlStart:function(t,e){var n,r=e.inputEvent,o=e.isPinch,i=e.parentDirection,a=e.datas,s=e.parentFlag,u=i||(o?[0,0]:Vn(r.target)),c=t.state,l=c.target,f=c.width,p=c.height;if(!u||!l)return!1;!o&&_r(t,e),a.datas={},a.direction=u,a.startOffsetWidth=f,a.startOffsetHeight=p,a.prevWidth=0,a.prevHeight=0,n=function(t){var e=window.getComputedStyle(t);return[parseFloat(e.width),parseFloat(e.height)]}(l),a.startWidth=n[0],a.startHeight=n[1];var d=[Math.max(0,f-a.startWidth),Math.max(0,p-a.startHeight)];if(a.minSize=d,a.maxSize=[1/0,1/0],!s){var h=window.getComputedStyle(l);a.minSize=zt([parseFloat(h.minWidth)||0,parseFloat(h.minHeight)||0],d),a.maxSize=zt([parseFloat(h.maxWidth)||1/0,parseFloat(h.maxHeight)||1/0],d)}var v=t.props.transformOrigin||"% %";function g(t){a.ratio=t&&isFinite(t)?t:0}function b(e){a.fixedDirection=e,a.fixedPosition=Hr(t,e)}a.transformOrigin=v&&m(v)?v.split(" "):v,a.isWidth=!u[0]&&!u[1]||u[0]||!u[1],g(f/p),b([-u[0],-u[1]]);var y=tr(t,e,{direction:u,set:function(t){var e=t[0],n=t[1];a.startWidth=e,a.startHeight=n},setMin:function(t){a.minSize=t},setMax:function(t){a.maxSize=t},setRatio:g,setFixedDirection:b,setOrigin:function(t){a.transformOrigin=t},dragStart:Vo.dragStart(t,(new xr).dragStart([0,0],e))});return!1!==nr(t,"onResizeStart",y)&&(a.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:u}),!!a.isResize&&y},dragControl:function(t,e){var n,r=e.datas,o=e.distX,i=e.distY,a=e.parentFlag,s=e.isPinch,u=e.parentDistance,c=e.parentScale,l=e.parentKeepRatio,f=e.dragClient,p=e.parentDist,d=e.isRequest,h=r.isResize,v=r.transformOrigin,g=r.fixedDirection,m=r.startWidth,b=r.startHeight,y=r.prevWidth,x=r.prevHeight,E=r.minSize,w=r.maxSize,C=r.ratio,S=r.isWidth;if(h){var _=t.props,A=_.throttleResize,M=void 0===A?0:A,D=_.parentMoveable,R=_.snapThreshold,k=void 0===R?5:R,O=r.direction,P=O,T=0,N=0;O[0]||O[1]||(P=[1,1]);var z=C&&(t.props.keepRatio||l),j=f,F=r.startOffsetWidth,G=r.startOffsetHeight;if(f||(j=!a&&s?Hr(t,[0,0]):r.fixedPosition),p)T=p[0],N=p[1];else if(c)T=(c[0]-1)*F,N=(c[1]-1)*G;else if(s)u&&(T=u,N=u*G/F);else{var L=Or({datas:r,distX:o,distY:i});if(T=P[0]*L[0],N=P[1]*L[1],z&&F&&G){var q=I([0,0],L),Y=I([0,0],P),X=I([0,0],[F,G]),W=Gn([T,N]),H=Math.cos(q-Y)*W;P[0]?P[1]?(T=Math.cos(X)*H,N=Math.sin(X)*H):N=(T=H)*C:T=(N=H)/C}else if(!z){var U=un(O);F||(L[0]<0?U[0]=-1:L[0]>0&&(U[0]=1)),G||(L[1]<0?U[1]=-1:L[1]>0&&(U[1]=1)),O=U,T=(P=U)[0]*L[0],N=P[1]*L[1]}}var V=P[0]||z?Math.max(F+T,1e-7):F,$=P[1]||z?Math.max(G+N,1e-7):G;z&&F&&G&&(S?$=V/C:V=$*C);var K=[0,0];if(s||(K=function(t,e,n,r,o,i,a){if(!Co(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,c=s.is3d;return To(t,(function(t,i){return _o(u,e+t,n+i,o,r,c)}),e,n,r,o,i,a)}(t,V,$,O,j,d,r)),p&&(!p[0]&&(K[0]=0),!p[1]&&(K[1]=0)),z){P[0]&&P[1]&&K[0]&&K[1]&&(Math.abs(K[0])>Math.abs(K[1])?K[1]=0:K[0]=0);var J=!K[0]&&!K[1];J&&(S?V=Jn(V,M):$=Jn($,M)),P[0]&&!P[1]||K[0]&&!K[1]||J&&S?$=(V+=K[0])/C:(!P[0]&&P[1]||!K[0]&&K[1]||J&&!S)&&(V=($+=K[1])*C)}else F+T<-k&&(K[0]=0),F+N<-k&&(K[1]=0),V+=K[0],$+=K[1],K[0]||(V=Jn(V,M)),K[1]||($=Jn($,M));V=(n=B([V,$],E,w,z))[0],$=n[1];var Z=[(T=(V=Math.round(V))-F)-y,(N=($=Math.round($))-G)-x];r.prevWidth=T,r.prevHeight=N;var Q=Wr(t,V,$,g,j,v);if(D||!Z.every((function(t){return!t}))||!Q.every((function(t){return!t}))){var tt=tr(t,e,{width:m+T,height:b+N,offsetWidth:V,offsetHeight:$,direction:O,dist:[T,N],delta:Z,isPinch:!!s,drag:Vo.drag(t,yr(e,t.state,Q,!!s,!1))});return nr(t,"onResize",tt),tt}}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,o=n.startOffsetWidth,i=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r){var u=t.state,c=u.width-(o+a),l=u.height-(i+s),f=Math.abs(c)>3,p=Math.abs(l)>3;return f&&(n.startWidth+=c,n.startOffsetWidth+=c,n.prevWidth+=c),p&&(n.startHeight+=l,n.startOffsetHeight+=l,n.prevHeight+=l),f||p?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isResize&&(n.isResize=!1,nr(t,"onResizeEnd",er(t,e,{})),r)},dragGroupControlCondition:hr,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var o=Er(t,"resizable",e);function i(e,r){var o=n.fixedDirection,i=n.fixedPosition,a=Hr(e,o),s=Gt(Vt(-t.rotation/180*Math.PI,3),[a[0]-i[0],a[1]-i[1],1],3),u=s[0],c=s[1];return r.datas.originalX=u,r.datas.originalY=c,r}var a=Cr(t,this,"dragControlStart",e,(function(t,e){return i(t,e)})),s=sn(sn({},r),{targets:t.props.targets,events:a,setFixedDirection:function(e){r.setFixedDirection(e),a.forEach((function(n,r){n.setFixedDirection(e),i(t.moveables[r],o[r])}))}}),u=nr(t,"onResizeGroupStart",s);return n.isResize=!1!==u,!!n.isResize&&r},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=this.dragControl(t,e);if(r){var o=r.offsetWidth,i=r.offsetHeight,a=r.dist,s=t.props.keepRatio,u=[o/(o-a[0]),i/(i-a[1])],c=n.fixedPosition,l=Cr(t,this,"dragControl",e,(function(e,n){var r=Gt(Vt(t.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),o=r[0],i=r[1];return sn(sn({},n),{parentDist:null,parentScale:u,dragClient:zt(c,[o,i]),parentKeepRatio:s})})),f=sn({targets:t.props.targets,events:l},r);return nr(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize)return this.dragControlEnd(t,e),Cr(t,this,"dragControlEnd",e),nr(t,"onResizeGroupEnd",er(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=0,r=0,o=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-o.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-o.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},ai={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,o=n.scalable,i=n.edge;if(!r&&o)return i?oi(t,e):ri(t,e)},dragControlCondition:hr,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,o=e.inputEvent,i=e.parentDirection||(r?[0,0]:Vn(o.target)),a=t.state,s=a.width,u=a.height,c=a.targetTransform,l=a.target;if(!i||!l)return!1;r||_r(t,e),jr(e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=i,n.width=s,n.height=u,n.startValue=[1,1];var f=!i[0]&&!i[1]||i[0]||!i[1];function p(e){n.fixedDirection=e,n.fixedPosition=Hr(t,e)}n.isWidth=f,p([-i[0],-i[1]]);var d=tr(t,e,sn(sn({direction:i,set:function(t){n.startValue=t},setFixedDirection:p},zr(e)),{dragStart:Vo.dragStart(t,(new xr).dragStart([0,0],e))}));return!1!==nr(t,"onScaleStart",d)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:i}),!!n.isScale&&d},dragControl:function(t,e){Ar(e,"scale");var n=e.datas,r=e.distX,o=e.distY,i=e.parentScale,a=e.parentDistance,s=e.parentKeepRatio,u=e.parentFlag,c=e.isPinch,l=e.dragClient,f=e.parentDist,p=e.isRequest,d=n.prevDist,h=n.direction,v=n.width,m=n.height,b=n.isScale,y=n.startValue,x=n.isWidth,E=n.fixedDirection;if(!b)return!1;var w=t.props,C=w.throttleScale,S=w.parentMoveable,_=h;h[0]||h[1]||(_=[1,1]);var A=t.props.keepRatio||s,M=t.state,D=v*y[0],R=m*y[1],k=D/R,O=1,P=1,B=l;if(l||(B=!u&&c?Hr(t,[0,0]):n.fixedPosition),f)O=(v+f[0])/v,P=(m+f[1])/m;else if(i)O=i[0],P=i[1];else if(c)a&&(O=(v+a)/v,P=(m+a*m/v)/m);else{var T=Or({datas:n,distX:r,distY:o}),N=_[0]*T[0],z=_[1]*T[1];if(A&&v&&m){var j=I([0,0],T),F=I([0,0],_),G=I([0,0],[D,R]),L=Gn([N,z]),q=Math.cos(j-F)*L;_[0]?_[1]?(N=Math.cos(G)*q,z=Math.sin(G)*q):z=(N=q)/k:N=(z=q)*k}O=(v+N)/v,P=(m+z)/m}O=_[0]||A?O*y[0]:y[0],P=_[1]||A?P*y[1]:y[1],0===O&&(O=1e-9*(d[0]>0?1:-1)),0===P&&(P=1e-9*(d[1]>0?1:-1));var Y=[O/y[0],P/y[1]],X=[O,P];if(!c&&t.props.groupable){var W=(M.snapRenderInfo||{}).direction;g(W)&&(W[0]||W[1])&&(M.snapRenderInfo={direction:h,request:e.isRequest})}var H=[0,0];if(c||(H=No(t,Y,h,p,n)),A){_[0]&&_[1]&&H[0]&&H[1]&&(Math.abs(H[0])>Math.abs(H[1])?H[1]=0:H[0]=0);var U=!H[0]&&!H[1];if(U&&(x?Y[0]=Jn(Y[0]*y[0],C)/y[0]:Y[1]=Jn(Y[1]*y[1],C)/y[1]),_[0]&&!_[1]||H[0]&&!H[1]||U&&x){Y[0]+=H[0];var V=v*Y[0]*y[0]/k;Y[1]=V/m/y[1]}else if(!_[0]&&_[1]||!H[0]&&H[1]||U&&!x){Y[1]+=H[1];var $=m*Y[1]*y[1]*k;Y[0]=$/v/y[0]}}else Y[0]+=H[0],Y[1]+=H[1],H[0]||(Y[0]=Jn(Y[0]*y[0],C)/y[0]),H[1]||(Y[1]=Jn(Y[1]*y[1],C)/y[1]);0===Y[0]&&(Y[0]=1e-9*(d[0]>0?1:-1)),0===Y[1]&&(Y[1]=1e-9*(d[1]>0?1:-1));var K,J,Z=[Y[0]/d[0],Y[1]/d[1]];J=y,X=[(K=Y)[0]*J[0],K[1]*J[1]];var Q=function(t,e,n,r,o){return qr(t,"scale("+e.join(", ")+")",n,r,o)}(t,Y,E,B,n),tt=jt(Q,n.prevInverseDist||[0,0]);if(n.prevDist=Y,n.prevInverseDist=Q,O===d[0]&&P===d[1]&&tt.every((function(t){return!t}))&&!S)return!1;var et=Mr(n,"scale("+X.join(", ")+")","scale("+Y.join(", ")+")"),nt=tr(t,e,sn({offsetWidth:v,offsetHeight:m,direction:h,scale:X,dist:Y,delta:Z,isPinch:!!c},Lr(t,et,tt,c,e)));return nr(t,"onScale",nt),nt},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,nr(t,"onScaleEnd",er(t,e,{})),r)},dragGroupControlCondition:hr,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var o=Er(t,"resizable",e);function i(e,r){var o=n.fixedDirection,i=n.fixedPosition,a=Hr(e,o),s=Gt(Vt(-t.rotation/180*Math.PI,3),[a[0]-i[0],a[1]-i[1],1],3),u=s[0],c=s[1];return r.datas.originalX=u,r.datas.originalY=c,r}n.moveableScale=t.scale;var a=Cr(t,this,"dragControlStart",e,(function(t,e){return i(t,e)})),s=sn(sn({},r),{targets:t.props.targets,events:a,setFixedDirection:function(e){r.setFixedDirection(e),a.forEach((function(n,r){n.setFixedDirection(e),i(t.moveables[r],o[r])}))}}),u=nr(t,"onScaleGroupStart",s);return n.isScale=!1!==u,!!n.isScale&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){var r=this.dragControl(t,e);if(r){var o=n.moveableScale;t.scale=[r.scale[0]*o[0],r.scale[1]*o[1]];var i=t.props.keepRatio,a=r.dist,s=r.scale,u=n.fixedPosition,c=Cr(t,this,"dragControl",e,(function(e,n){var r=Gt(Vt(t.rotation/180*Math.PI,3),[n.datas.originalX*a[0],n.datas.originalY*a[1],1],3),o=r[0],c=r[1];return sn(sn({},n),{parentDist:null,parentScale:s,parentKeepRatio:i,dragClient:zt(u,[o,c])})})),l=sn({targets:t.props.targets,events:c},r);return nr(t,"onScaleGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale)return this.dragControlEnd(t,e),Cr(t,this,"dragControlEnd",e),nr(t,"onScaleGroupEnd",er(t,e,{targets:t.props.targets})),n},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function si(t,e){return t.map((function(t,n){return r=t,o=e[n],(r*(a=2)+o*(i=1))/(i+a);var r,o,i,a}))}function ui(t,e,n){var r=I(t,e),o=I(t,n)-r;return o>=0?o:o+2*Math.PI}var ci={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props,r=n.resizable,o=n.scalable,i=n.warpable,a=n.zoom;if(r||o||!i)return[];var s=t.state,u=s.pos1,c=s.pos2,l=s.pos3,f=s.pos4,p=si(u,c),d=si(c,u),h=si(u,l),v=si(l,u),g=si(l,f),m=si(f,l),b=si(c,f),y=si(f,c);return un([e.createElement("div",{className:Cn("line"),key:"middeLine1",style:qn(p,g,a)}),e.createElement("div",{className:Cn("line"),key:"middeLine2",style:qn(d,m,a)}),e.createElement("div",{className:Cn("line"),key:"middeLine3",style:qn(h,b,a)}),e.createElement("div",{className:Cn("line"),key:"middeLine4",style:qn(v,y,a)})],ri(t,e))},dragControlCondition:function(t){return!t.isRequest&&j(t.inputEvent.target,Cn("direction"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,o=t.props.target,i=Vn(r.target);if(!i||!o)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,c=a.targetTransform,l=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=u?l:Tt(l,3,4),n.targetInverseMatrix=Ot(Pt(n.warpTargetMatrix,4),3,4),n.direction=i,n.left=d,n.top=h,_r(t,e),jr(e),n.poses=[[0,0],[f,0],[0,p],[f,p]].map((function(t){return jt(t,s)})),n.nextPoses=n.poses.map((function(t){var e=t[0],r=t[1];return Gt(n.warpTargetMatrix,[e,r,0,1],4)})),n.startValue=$t(4),n.prevMatrix=$t(4),n.absolutePoses=Kn(a),n.posIndexes=Pr(i),a.snapRenderInfo={request:e.isRequest,direction:i},!1!==nr(t,"onWarpStart",tr(t,e,sn({set:function(t){n.startValue=t}},zr(e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,o=e.distX,i=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,u=n.isWarp,c=n.startValue,l=n.poses,f=n.posIndexes,p=n.absolutePoses;if(!u)return!1;if(Ar(e,"matrix3d"),Co(t,"warpable")){var d=f.map((function(t){return p[t]}));d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var h=Ro(t,r,d.map((function(t){return[t[0]+o,t[1]+i]}))),v=h.horizontal,g=h.vertical;i-=v.offset,o-=g.offset}var m=Or({datas:n,distX:o,distY:i},!0),b=n.nextPoses.slice();if(f.forEach((function(t){b[t]=zt(b[t],m)})),!gn.every((function(t){return e=t.map((function(t){return l[t]})),n=t.map((function(t){return b[t]})),r=ui(e[0],e[1],e[2]),o=ui(n[0],n[1],n[2]),i=Math.PI,!(r>=i&&o<=i||r<=i&&o>=i);var e,n,r,o,i})))return!1;var y=Zt(l[0],l[2],l[1],l[3],b[0],b[2],b[1],b[3]);if(!y.length)return!1;var x=Rr(n,Nt(a,y,4),!0),E=Nt(Pt(s,4),x,4);n.prevMatrix=x;var w=Nt(c,x,4),C=Mr(n,"matrix3d("+w.join(", ")+")","matrix3d("+x.join(", ")+")");return Gr(e,C),nr(t,"onWarp",tr(t,e,{delta:E,matrix:w,dist:x,multiply:Nt,transform:C})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,nr(t,"onWarpEnd",er(t,e,{})),r)}},li=Cn("area-pieces"),fi=Cn("area-piece"),pi=Cn("avoid");function di(t){var e=t.areaElement,n=t.state,r=n.width,o=n.height;!function(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}(e,pi),e.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+o+"px"}function hi(t){return t.createElement("div",{key:"area_pieces",className:li},t.createElement("div",{className:fi}),t.createElement("div",{className:fi}),t.createElement("div",{className:fi}),t.createElement("div",{className:fi}))}var vi={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var r=t.props,o=r.target,i=r.dragArea,a=r.groupable,s=r.passDragArea,u=t.state,c=u.width,l=u.height,f=u.renderPoses,p=s?Cn("area","pass"):Cn("area");if(a)return[e.createElement("div",{key:"area",ref:n(t,"areaElement"),className:p}),hi(e)];if(!o||!i)return[];var d=Zt([0,0],[c,0],[0,l],[c,l],f[0],f[1],f[2],f[3]),h=d.length?Pn(d,!0):"none";return[e.createElement("div",{key:"area",ref:n(t,"areaElement"),className:p,style:{top:"0px",left:"0px",width:c+"px",height:l+"px",transformOrigin:"0 0",transform:h}}),hi(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,o=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var i,a,s=t.areaElement,u=t.state,c=u.moveableClientRect,l=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=c.left,h=c.top,v=zn(l),g=v.left,m=v.top,b=v.width,y=v.height,x=cr(f,[r-d,o-h],p?4:3),E=x[0],w=x[1],C=[{left:g,top:m,width:b,height:(w-=m)-10},{left:g,top:m,width:(E-=g)-10,height:y},{left:g,top:m+w+10,width:b,height:y-w-10},{left:g+E+10,top:m,width:b-E-10,height:y}],S=[].slice.call(s.nextElementSibling.children);C.forEach((function(t,e){S[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),a=pi,(i=s).classList?i.classList.add(a):i.className+=" "+a},drag:function(t,e){var n=e.datas;if(!e.inputEvent)return!1;n.isDragArea||(n.isDragArea=!0,di(t))},dragEnd:function(t,e){var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||di(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){di(t)}},gi={name:"origin",props:{origin:Boolean},events:{},render:function(t,e){var n=t.props.zoom,r=t.state,o=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:Cn("control","origin"),style:Yn(i,n,o),key:"beforeOrigin"})]}};function mi(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var bi={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(t,e){var n=t.props.scrollContainer,r=void 0===n?t.getContainer():n,o=new he,i=gr(r,!0);e.datas.dragScroll=o;var a=e.isControl?"controlGesto":"targetGesto",s=e.targets;o.on("scroll",(function(n){var r=n.container,o=n.direction,i=tr(t,e,{scrollContainer:r,direction:o}),a=s?"onScrollGroup":"onScroll";s&&(i.targets=s),nr(t,a,i)})).on("move",(function(n){var r=n.offsetX,o=n.offsetY;t[a].scrollBy(r,o,e.inputEvent,!1)})),o.dragStart(e,{container:i})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,o=r.scrollContainer,i=void 0===o?t.getContainer():o,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,c=void 0===u?mi:u;return n.drag(e,{container:i,threshold:s,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,sn(sn({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,sn(sn({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,sn(sn({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,sn(sn({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,sn(sn({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,sn(sn({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,sn(sn({},e),{targets:t.props.targets}))}},yi={name:"",props:{target:Object,dragTarget:Object,container:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},xi={name:"padding",props:{padding:Object},events:{},render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},o=r.left,i=void 0===o?0:o,a=r.top,s=void 0===a?0:a,u=r.right,c=void 0===u?0:u,l=r.bottom,f=void 0===l?0:l,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],v=[];return i>0&&v.push([0,2]),s>0&&v.push([0,1]),c>0&&v.push([1,3]),f>0&&v.push([2,3]),v.map((function(t,n){var r=t[0],o=t[1],i=Zt([0,0],[100,0],[0,100],[100,100],h[r],h[o],d[r],d[o]);if(i.length)return e.createElement("div",{key:"padding"+n,className:Cn("padding"),style:{transform:Pn(i,!0)}})}))}},Ei=["nw","ne","se","sw"];function wi(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var Ci=[1,2,5,6],Si=[0,3,4,7],_i=[1,-1,-1,1],Ai=[1,1,-1,-1];function Mi(t,e,n,r,o,i,a,s,u){void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=r),void 0===u&&(u=o);var c=[],l=!1,f=t.map((function(t,f){var p=e[f],d=p.horizontal,h=p.vertical;if(h&&!l&&(l=!0,c.push("/")),l){var v=Math.max(0,1===h?t[1]-a:u-t[1]);return c.push(pr(v,o,n)),v}v=Math.max(0,1===d?t[0]-i:s-t[0]);return c.push(pr(v,r,n)),v}));return{styles:c,raws:f}}function Di(t){for(var e=[0,0],n=[0,0],r=t.length,o=0;o<r;++o){var i=t[o];i.sub&&(i.horizontal&&(0===e[1]&&(e[0]=o),e[1]=o-e[0]+1,n[0]=o+1),i.vertical&&(0===n[1]&&(n[0]=o),n[1]=o-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Ri(t,e,n,r,o,i){var a,s,u,c;void 0===i&&(i=[0,0]);var l=t.indexOf("/"),f=(l>-1?t.slice(0,l):t).length,p=t.slice(0,f),d=t.slice(f+1),h=p[0],v=void 0===h?"0px":h,g=p[1],m=void 0===g?v:g,b=p[2],y=void 0===b?v:b,x=p[3],E=void 0===x?m:x,w=d[0],C=void 0===w?v:w,S=d[1],_=void 0===S?C:S,A=d[2],M=void 0===A?C:A,D=d[3],R=void 0===D?_:D,O=[v,m,y,E].map((function(t){return k(t,e)})),P=[C,_,M,R].map((function(t){return k(t,n)})),B=O.slice(),T=P.slice();a=wi([B[0],B[1]],e),B[0]=a[0],B[1]=a[1],s=wi([B[3],B[2]],e),B[3]=s[0],B[2]=s[1],u=wi([T[0],T[3]],n),T[0]=u[0],T[3]=u[1],c=wi([T[1],T[2]],n),T[1]=c[0],T[2]=c[1];var I=B.slice(0,Math.max(i[0],p.length)),N=T.slice(0,Math.max(i[1],d.length));return un(I.map((function(t,e){var i=Ei[e];return{horizontal:_i[e],vertical:0,pos:[r+t,o+(-1===Ai[e]?n:0)],sub:!0,raw:O[e],direction:i}})),N.map((function(t,n){var i=Ei[n];return{horizontal:0,vertical:Ai[n],pos:[r+(-1===_i[n]?e:0),o+t],sub:!0,raw:P[n],direction:i}})))}function ki(t,e,n,r,o){void 0===o&&(o=e.length);var i=Di(t.slice(r)),a=i.horizontalRange,s=i.verticalRange,u=n-r,c=0;if(0===u)c=o;else if(u>0&&u<a[1])c=a[1]-u;else{if(!(u>=s[0]))return;c=s[0]+s[1]-u}t.splice(n,c),e.splice(n,c)}function Oi(t,e,n,r,o,i,a,s,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var f=Di(t.slice(n)),p=f.horizontalRange,d=f.verticalRange;if(r>-1)for(var h=1===_i[r]?i-c:s-i,v=p[1];v<=r;++v){var g=1===Ai[v]?l:u,m=0;if(r===v?m=i:0===v?m=c+h:-1===_i[v]&&(m=s-(e[n][0]-c)),t.splice(n+v,0,{horizontal:_i[v],vertical:0,pos:[m,g]}),e.splice(n+v,0,[m,g]),0===v)break}else if(o>-1){var b=1===Ai[o]?a-l:u-a;if(0===p[1]&&0===d[1]){var y=[c+b,l];t.push({horizontal:_i[0],vertical:0,pos:y}),e.push(y)}var x=d[0];for(v=d[1];v<=o;++v){m=1===_i[v]?c:s,g=0;if(o===v?g=a:0===v?g=l+b:1===Ai[v]?g=e[n+x][1]:-1===Ai[v]&&(g=u-(e[n+x][1]-l)),t.push({horizontal:0,vertical:Ai[v],pos:[m,g]}),e.push([m,g]),0===v)break}}}function Pi(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}))}}var Bi=[[0,-1,"n"],[1,0,"e"]],Ti=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ii(t,e,n){var r=t.props.clipRelative,o=t.state,i=o.width,a=o.height,s=e,u=s.type,c=s.poses,l="rect"===u,f="circle"===u;if("polygon"===u)return n.map((function(t){return pr(t[0],i,r)+" "+pr(t[1],a,r)}));if(l||"inset"===u){var p=n[1][1],d=n[3][0],h=n[7][0],v=n[5][1];if(l)return[p,d,v,h].map((function(t){return t+"px"}));var g=[p,i-d,a-v,h].map((function(t,e){return pr(t,e%2?i:a,r)}));if(n.length>8){var m=jt(n[4],n[0]),b=m[0],y=m[1];g.push.apply(g,un(["round"],Mi(n.slice(8),c.slice(8),r,b,y,h,p,d,v).styles))}return g}if(f||"ellipse"===u){var x=n[0],E=pr(Math.abs(n[1][1]-x[1]),f?Math.sqrt((i*i+a*a)/2):a,r);return(g=f?[E]:[pr(Math.abs(n[2][0]-x[0]),i,r),E]).push("at",pr(x[0],i,r),pr(x[1],a,r)),g}}function Ni(t,e,n,r){var o=[r,(r+e)/2,e],i=[t,(t+n)/2,n];return Ti.map((function(t){var e=t[0],n=t[1],r=t[2],a=o[e+1],s=i[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:r,pos:[a,s]}}))}function zi(t,e,n,r,o){var i,a,s,u,c,l,f,p=o;if(!p){var d=getComputedStyle(t),h=d.clipPath;p="none"!==h?h:d.clip}if(p&&"none"!==p&&"auto"!==p||(p=r)){var v=S(p),g=v.prefix,m=void 0===g?p:g,b=v.value,y=void 0===b?"":b,x="circle"===m,E=" ";if("polygon"===m)return E=",",{type:m,clipText:p,poses:N=(O=C(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var r=t.split(" "),o=r[0],i=r[1];return{vertical:1,horizontal:1,pos:[k(o,e),k(i,n)]}})),splitter:E};if(x||"ellipse"===m){var A="",M="",D=0,R=0,O=w(y);if(x){var P;P=void 0===(i=O[0])?"50%":i,A=void 0===(a=O[2])?"50%":a,M=void 0===(s=O[3])?"50%":s,D=k(P,Math.sqrt((e*e+n*n)/2)),R=D}else{var B,T;B=void 0===(u=O[0])?"50%":u,T=void 0===(c=O[1])?"50%":c,A=void 0===(l=O[3])?"50%":l,M=void 0===(f=O[4])?"50%":f,D=k(B,e),R=k(T,n)}var I=[k(A,e),k(M,n)],N=un([{vertical:1,horizontal:1,pos:I,direction:"nesw"}],Bi.slice(0,x?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[I[0]+t[0]*D,I[1]+t[1]*R]}})));return{type:m,clipText:p,radiusX:D,radiusY:R,left:I[0]-D,top:I[1]-R,poses:N,splitter:E}}if("inset"===m){var z=(O=w(y||"0 0 0 0")).indexOf("round"),j=(z>-1?O.slice(0,z):O).length,F=O.slice(j+1),G=O.slice(0,j),L=G[0],q=G[1],Y=void 0===q?L:q,X=G[2],W=void 0===X?L:X,H=G[3],U=void 0===H?Y:H,V=[L,W].map((function(t){return k(t,n)})),$=V[0],K=V[1],J=[U,Y].map((function(t){return k(t,e)})),Z=J[0],Q=J[1],tt=e-Q,et=n-K,nt=Ri(F,tt-Z,et-$,Z,$);return{type:"inset",clipText:p,poses:N=un(Ni($,tt,et,Z),nt),top:$,left:Z,right:tt,bottom:et,radius:F,splitter:E}}if("rect"===m){E=",";var rt=(O=C(y||"0px, "+e+"px, "+n+"px, 0px")).map((function(t){return _(t).value}));return{type:"rect",clipText:p,poses:N=Ni($=rt[0],Q=rt[1],K=rt[2],Z=rt[3]),top:$,right:Q,bottom:K,left:Z,values:O,splitter:E}}}}var ji={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var n=t.props,r=n.customClipPath,o=n.defaultClipPath,i=n.clipArea,a=n.zoom,s=t.state,u=s.target,c=s.width,l=s.height,f=s.allMatrix,p=s.is3d,d=s.left,h=s.top,v=s.pos1,g=s.pos2,m=s.pos3,b=s.pos4,y=s.clipPathState,x=s.snapBoundInfos;if(!u)return[];var E=zi(u,c,l,o||"inset",y||r);if(!E)return[];var w=p?4:3,C=E.type,S=E.poses.map((function(t){var e=In(f,t.pos,w);return[e[0]-d,e[1]-h]})),_=[],A=[],M="rect"===C,D="inset"===C,R="polygon"===C;if(M||D||R){var k=D?S.slice(0,8):S;A=k.map((function(t,n){var r=0===n?k[k.length-1]:k[n-1],o=I(r,t),i=Ln(r,t);return e.createElement("div",{key:"clipLine"+n,className:Cn("line","clip-line","snap-control"),"data-clip-index":n,style:{width:i+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+o+"rad) scaleY("+a+")"}})}))}if(_=S.map((function(t,n){return e.createElement("div",{key:"clipControl"+n,className:Cn("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+a+")"}})})),D&&_.push.apply(_,S.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl"+n,className:Cn("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+a+")"}})}))),"circle"===C||"ellipse"===C){var O=E.left,P=E.top,B=E.radiusX,T=E.radiusY,N=jt(In(f,[O,P],w),In(f,[0,0],w)),z=N[0],j=N[1],F="none";if(!i){for(var G=Math.max(10,B/5,T/5),L=[],q=0;q<=G;++q){var Y=2*Math.PI/G*q;L.push([B+(B-a)*Math.cos(Y),T+(T-a)*Math.sin(Y)])}L.push([B,-2]),L.push([-2,-2]),L.push([-2,2*T+2]),L.push([2*B+2,2*T+2]),L.push([2*B+2,-2]),L.push([B,-2]),F="polygon("+L.map((function(t){return t[0]+"px "+t[1]+"px"})).join(", ")+")"}_.push(e.createElement("div",{key:"clipEllipse",className:Cn("clip-ellipse","snap-control"),style:{width:2*B+"px",height:2*T+"px",clipPath:F,transform:"translate("+(-d+z)+"px, "+(-h+j)+"px) "+Pn(f)}}))}if(i){var X=zn(un([v,g,m,b],S)),W=X.width,H=X.height,U=X.left,V=X.top;if(R||M||D){L=D?S.slice(0,8):S;_.push(e.createElement("div",{key:"clipArea",className:Cn("clip-area","snap-control"),style:{width:W+"px",height:H+"px",transform:"translate("+U+"px, "+V+"px)",clipPath:"polygon("+L.map((function(t){return t[0]-U+"px "+(t[1]-V)+"px"})).join(", ")+")"}}))}}return x&&["vertical","horizontal"].forEach((function(t){var n=x[t],r="horizontal"===t;n.isSnap&&A.push.apply(A,n.snap.posInfos.map((function(n,o){var i=n.pos,s=jt(In(f,r?[0,i]:[i,0],w),[d,h]),u=jt(In(f,r?[c,i]:[i,l],w),[d,h]);return ni(e,"",s,u,a,"clip"+t+"snap"+o,"guideline")}))),n.isBound&&A.push.apply(A,n.bounds.map((function(n,o){var i=n.pos,s=jt(In(f,r?[0,i]:[i,0],w),[d,h]),u=jt(In(f,r?[c,i]:[i,l],w),[d,h]);return ni(e,"",s,u,a,"clip"+t+"bounds"+o,"guideline","bounds","bold")})))})),un(_,A)},dragControlCondition:function(t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,o=r.defaultClipPath,i=r.customClipPath,a=n.target,s=n.width,u=n.height,c=e.inputEvent?e.inputEvent.target:null,l=c?c.getAttribute("class"):"",f=e.datas,p=zi(a,s,u,o||"inset",i);if(!p)return!1;var d=p.clipText;return!1===nr(t,"onClipStart",tr(t,e,{clipType:p.type,clipStyle:d,poses:p.poses.map((function(t){return t.pos}))}))?(f.isClipStart=!1,!1):(f.isControl=l.indexOf("clip-control")>-1,f.isLine=l.indexOf("clip-line")>-1,f.isArea=l.indexOf("clip-area")>-1||l.indexOf("clip-ellipse")>-1,f.index=c?parseInt(c.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,n.clipPathState=d,_r(t,e),!0)},dragControl:function(t,e){var n=e.datas,r=e.originalDatas;if(!n.isClipStart)return!1;var o=r&&r.draggable||{},i=n,a=i.isControl,s=i.isLine,u=i.isArea,c=i.index,l=i.clipPath;if(!l)return!1;var f=o.isDrag?o.prevDist:Or(e),p=f[0],d=f[1],h=t.props,v=t.state,g=v.width,m=v.height,b=!u&&!a&&!s,y=l.type,x=l.poses,E=l.splitter,w=x.map((function(t){return t.pos}));b&&(p=-p,d=-d);var C=!a||"nesw"===x[c].direction,S="inset"===y||"rect"===y,_=x.map((function(){return[0,0]}));if(a&&!C){var A=x[c],M=A.horizontal,D=A.vertical,R=[p*Math.abs(M),d*Math.abs(D)];_=function(t,e,n,r){var o=t[e],i=o.direction,a=o.sub,s=t.map((function(){return[0,0]})),u=i?i.split(""):[];if(r&&e<8){var c=u.filter((function(t){return"w"===t||"e"===t}))[0],l=u.filter((function(t){return"n"===t||"s"===t}))[0];s[e]=n,t.forEach((function(t,e){var r=t.direction;r&&(r.indexOf(c)>-1&&(s[e][0]=n[0]),r.indexOf(l)>-1&&(s[e][1]=n[1]))})),c&&(s[1][0]=n[0]/2,s[5][0]=n[0]/2),l&&(s[3][1]=n[1]/2,s[7][1]=n[1]/2)}else i&&!a?u.forEach((function(e){var r="n"===e||"s"===e;t.forEach((function(t,o){var i=t.direction,a=t.horizontal,u=t.vertical;i&&-1!==i.indexOf(e)&&(s[o]=[r||!a?0:n[0],r&&u?n[1]:0])}))})):s[e]=n;return s}(x,c,R,S)}else C&&(_=w.map((function(){return[p,d]})));var O=w.map((function(t,e){return zt(t,_[e])})),P=un(O);v.snapBoundInfos=null;var B="circle"===l.type,T="ellipse"===l.type;if(B||T){var I=zn(O),N=Math.abs(I.bottom-I.top),z=Math.abs(T?I.right-I.left:N),j=O[0][1]+N,F=O[0][0]-z,G=O[0][0]+z;B&&(P.push([G,I.bottom]),_.push([1,0])),P.push([I.left,j]),_.push([0,1]),P.push([F,I.bottom]),_.push([1,0])}var L=$r([],g,m,(h.clipHorizontalGuidelines||[]).map((function(t){return k(""+t,m)})),(h.clipVerticalGuidelines||[]).map((function(t){return k(""+t,g)}))),q=[],Y=[];if(B||T)q=[P[4][0],P[2][0]],Y=[P[1][1],P[3][1]];else if(S){var X=[P[0],P[2],P[4],P[6]],W=[_[0],_[2],_[4],_[6]];q=X.filter((function(t,e){return W[e][0]})).map((function(t){return t[0]})),Y=X.filter((function(t,e){return W[e][1]})).map((function(t){return t[1]}))}else q=P.filter((function(t,e){return _[e][0]})).map((function(t){return t[0]})),Y=P.filter((function(t,e){return _[e][1]})).map((function(t){return t[1]}));for(var H=function(t){var e=ko(L,h.clipTargetBounds&&{left:0,top:0,right:g,bottom:m},q,Y,{snapThreshold:5}),n=e.horizontal,r=e.vertical,o=n.offset,i=r.offset;if(!T&&!B||0!==_[0][0]||0!==_[0][1])return P.forEach((function(t,e){var n=_[e];n[0]&&(t[0]-=i),n[1]&&(t[1]-=o)})),"break";var a=zn(O),s=a.bottom-a.top,u=T?a.right-a.left:s;u-=r.isBound?Math.abs(i):0===r.snapIndex?-i:i,s-=n.isBound?Math.abs(o):0===n.snapIndex?-o:o,B&&(u=s=ro(r,n)>0?s:u);var c=P[0];P[1][1]=c[1]-s,P[2][0]=c[0]+u,P[3][1]=c[1]+s,P[4][0]=c[0]-u},U=0;U<2;++U){if("break"===H())break}var V=Ii(t,l,O),$=y+"("+V.join(E)+")";if(v.clipPathState=$,B||T)q=[P[4][0],P[2][0]],Y=[P[1][1],P[3][1]];else if(S){X=[P[0],P[2],P[4],P[6]];q=X.map((function(t){return t[0]})),Y=X.map((function(t){return t[1]}))}else q=P.map((function(t){return t[0]})),Y=P.map((function(t){return t[1]}));return v.snapBoundInfos=ko(L,h.clipTargetBounds&&{left:0,top:0,right:g,bottom:m},q,Y,{snapThreshold:1}),nr(t,"onClip",tr(t,e,{clipEventType:"changed",clipType:y,poses:O,clipStyle:$,clipStyles:V,distX:p,distY:d})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,o=e.isDouble,i=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(nr(t,"onClipEnd",er(t,e,{})),o&&(s?function(t,e){var n=e.datas,r=n.clipPath,o=n.index,i=r,a=i.type,s=i.poses,u=i.splitter,c=s.map((function(t){return t.pos})),l=c.length;if("polygon"===a)s.splice(o,1),c.splice(o,1);else{if("inset"!==a)return;if(o<8)return;if(ki(s,c,o,8,l),l===s.length)return}var f=Ii(t,r,c);nr(t,"onClip",tr(t,e,{clipEventType:"removed",clipType:a,poses:c,clipStyles:f,clipStyle:a+"("+f.join(u)+")",distX:0,distY:0}))}(t,e):i&&function(t,e){var n=Sr(t,e),r=n[0],o=n[1],i=e.datas,a=i.clipPath,s=i.index,u=a,c=u.type,l=u.poses,f=u.splitter,p=l.map((function(t){return t.pos}));if("polygon"===c)p.splice(s,0,[r,o]);else{if("inset"!==c)return;var d=Ci.indexOf(s),h=Si.indexOf(s),v=l.length;if(Oi(l,p,8,d,h,r,o,p[4][0],p[4][1],p[0][0],p[0][1]),v===l.length)return}var g=Ii(t,a,p);nr(t,"onClip",tr(t,e,{clipEventType:"added",clipType:c,poses:p,clipStyles:g,clipStyle:c+"("+g.join(f)+")",distX:0,distY:0}))}(t,e)),o||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Fi={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:j(t.inputEvent.target,Cn("origin"))},dragControlStart:function(t,e){var n=e.datas;_r(t,e);var r=tr(t,e,{dragStart:Vo.dragStart(t,(new xr).dragStart([0,0],e))}),o=nr(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===o?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,o=e.isRequest;if(!n.isDragOrigin)return!1;var i=Or(e),a=i[0],s=i[1],u=t.state,c=u.width,l=u.height,f=u.offsetMatrix,p=u.targetMatrix,d=u.is3d,h=t.props.originRelative,v=void 0===h||h,g=d?4:3,m=[a,s];if(o){var b=e.distOrigin;(b[0]||b[1])&&(m=b)}var y=zt(n.startOrigin,m),x=zt(n.startTargetOrigin,m),E=jt(m,n.prevOrigin),w=Ir(f,p,y,g),C=t.getRect(),S=zn(Nn(w,c,l,g)),_=[C.left-S.left,C.top-S.top];n.prevOrigin=m;var A=tr(t,e,{width:c,height:l,origin:y,dist:m,delta:E,transformOrigin:[pr(x[0],c,v),pr(x[1],l,v)].join(" "),drag:Vo.drag(t,yr(e,t.state,_,!!r,!1))});return nr(t,"onDragOrigin",A),A},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(nr(t,"onDragOriginEnd",er(t,e,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,o=0,i=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-i[0],a[1]=t.origin[1]-i[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?o=t.y-n.top:"deltaY"in t&&(o+=t.deltaY)),{datas:e,distX:r,distY:o,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Gi(t,e,n,r,o){var i;void 0===r&&(r=[0,0]);if(o)i=o;else{var a=window.getComputedStyle(t);i=a&&a.borderRadius||""}return Ri(!i||!o&&"0px"===i?[]:w(i),e,n,0,0,r)}function Li(t,e,n,r,o,i){var a=t.state,s=a.width,u=a.height,c=Mi(i,o,t.props.roundRelative,s,u),l=c.raws,f=c.styles,p=Pi(o,l),d=p.horizontals,h=p.verticals,v=f.join(" ");a.borderRadiusState=v,nr(t,"onRound",tr(t,e,{horizontals:d,verticals:h,borderRadius:v,width:s,height:u,delta:r,dist:n}))}var qi={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var n=t.state,r=n.target,o=n.width,i=n.height,a=n.allMatrix,s=n.is3d,u=n.left,c=n.top,l=n.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,v=void 0===h?[4,4]:h,g=f.zoom;if(!r)return null;var m=s?4:3,b=Gi(r,o,i,d,l);if(!b)return null;var y=0,x=0;return b.map((function(t,n){x+=Math.abs(t.horizontal),y+=Math.abs(t.vertical);var r=jt(In(a,t.pos,m),[u,c]),o=t.vertical?y<=v[1]:x<=v[0];return e.createElement("div",{key:"borderRadiusControl"+n,className:Cn("control","border-radius"),"data-radius-index":n,style:{display:o?"block":"none",transform:"translate("+r[0]+"px, "+r[1]+"px) scale("+g+")"}})}))},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var e=t.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,o=n.target,i=o.getAttribute("class")||"",a=i.indexOf("border-radius")>-1,s=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,u=a?parseInt(o.getAttribute("data-radius-index"),10):-1,c=s?parseInt(o.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===nr(t,"onRoundStart",tr(t,e,{})))return!1;r.lineIndex=c,r.controlIndex=u,r.isControl=a,r.isLine=s,_r(t,e);var l=t.props,f=l.roundRelative,p=l.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,v=h.target,g=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=Gi(v,g,m,d)||[];return r.controlPoses=b,h.borderRadiusState=Mi(b.map((function(t){return t.pos})),b,f,g,m).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var r=n.controlIndex,o=n.controlPoses,i=Or(e),a=i[0],s=i[1],u=[a,s],c=jt(u,n.prevDist),l=t.props.maxRoundControls,f=void 0===l?[4,4]:l,p=t.state,d=p.width,h=p.height,v=o[r],g=v.vertical,m=v.horizontal,b=o.map((function(t,e){var n=t.horizontal,r=t.vertical,o=[n*m*u[0],r*g*u[1]];if(n){if(1===f[0])return o;if(f[0]<4&&n!==m)return o}else{if(0===f[1])return o[1]=r*m*u[0]/d*h,o;if(g){if(1===f[1])return o;if(f[1]<4&&r!==g)return o}}return[0,0]}));b[r]=u;var y=o.map((function(t,e){return zt(t.pos,b[e])}));return n.prevDist=[a,s],Li(t,e,u,c,o,y),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,o=e.isDouble;if(!r.isRound)return!1;var i=n.width,a=n.height,s=r.isControl,u=r.controlIndex,c=r.isLine,l=r.lineIndex,f=r.controlPoses,p=f.map((function(t){return t.pos})),d=p.length,h=t.props.roundClickable;if(o&&(void 0===h||h)){if(s)ki(f,p,u,0);else if(c){var v=Sr(t,e);!function(t,e,n,r,o,i,a){var s=Pi(t),u=s.horizontals,c=s.verticals,l=u.length,f=c.length,p=-1,d=-1;0===n?0===l?p=0:1===l&&(p=1):3===n&&(l<=2?p=2:l<=3&&(p=3)),2===n?0===f?d=0:f<4&&(d=3):1===n&&(f<=1?d=1:f<=2&&(d=2)),Oi(t,e,0,p,d,r,o,i,a)}(f,p,l,v[0],v[1],i,a)}d!==f.length&&Li(t,e,[0,0],[0,0],f,p),nr(t,"onRoundEnd",er(t,e,{}))}return n.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},Yi={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,e){var n=t.state,r=n.is3d,o=n.targetMatrix,i=r?"matrix3d("+o.join(",")+")":"matrix("+Ft(o,!0)+")";e.datas.startTransforms=[i]},resetTransform:function(t,e){e.datas.nextTransforms=e.datas.startTransforms,e.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return tr(t,e,{setTransform:function(t){e.datas.startTransforms=g(t)?t:w(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return tr(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),nr(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(t,e),nr(t,"onBeforeRender",tr(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){nr(t,"onBeforeRenderEnd",tr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Er(t,"beforeRenderable",e),o=t.moveables,i=r.map((function(t,e){var r=o[e];return n.setTransform(r,t),n.fillDragStartParams(r,t)}));nr(t,"onBeforeRenderGroupStart",tr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Er(t,"beforeRenderable",e),o=t.moveables,i=r.map((function(t,e){var r=o[e];return n.resetTransform(r,t),n.fillDragParams(r,t)}));nr(t,"onBeforeRenderGroup",tr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),nr(t,"onBeforeRenderGroupEnd",tr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Xi={name:"Renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,e){nr(t,"onRenderStart",tr(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){nr(t,"onRender",tr(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){nr(t,"onRenderEnd",tr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){nr(t,"onRenderGroupStart",tr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){nr(t,"onRenderGroup",tr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,e){nr(t,"onRenderGroupEnd",tr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}};function Wi(t,e,n,r,o,i,a){var s="Start"===o,u=t.state.target,c=i.isRequest;if(!u||s&&r.indexOf("Control")>-1&&!c&&t.areaElement===i.inputEvent.target)return!1;var l=""+n+r+o,f=""+n+r+"Condition",p="End"===o,d=o.indexOf("After")>-1,h=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());h&&t.updateRect(o,!0,!1),""!==o||d||lr(t.state,i);var v=r.indexOf("Group")>-1,g=un([Yi],t[e].slice(),[Xi]);if(c){var m=i.requestAble;g.some((function(t){return t.name===m}))||g.push.apply(g,t.props.ables.filter((function(t){return t.name===m})))}if(!g.length)return!1;var b=g.filter((function(t){return t[l]})),y=i.datas;h&&b.forEach((function(e){e.unset&&e.unset(t)}));var x,E=i.inputEvent;p&&E&&(x=document.elementFromPoint(i.clientX,i.clientY)||E.target);var w=b.filter((function(e){var n=e.name,r=y[n]||(y[n]={});return s&&(r.isEventStart=!e[f]||e[f](i,t)),!!r.isEventStart&&e[l](t,sn(sn({},i),{datas:r,originalDatas:y,inputTarget:x}))})),C=w.length,S=s&&b.length&&!C;return(p||S)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach((function(t){t.state.gesto=null}))),h&&S&&b.forEach((function(e){e.unset&&e.unset(t)})),!t.isUnmounted&&!S&&((!s&&C&&!a||p)&&(w.some((function(t){return t.updateRect}))&&!v?t.updateRect(o,!1,!1):t.updateRect(o,!0,!1),t.forceUpdate()),s||p||d||!C||a||Wi(t,e,n,r,o+"After",i),!0)}function Hi(t,e,n){var r=t.controlBox.getElement(),o=[];o.push(r),t.props.dragArea&&!t.props.dragTarget||o.push(e);var i=function(e){var n=e.inputEvent.target;return n===t.areaElement||!t.isMoveableElement(n)||j(n,"moveable-area")||j(n,"moveable-padding")};return Ui(t,o,"targetAbles",n,{dragStart:i,pinchStart:i})}function Ui(t,e,n,r,o){void 0===o&&(o={});var i=t.props,a=i.pinchOutside,s=i.pinchThreshold,u={container:window,pinchThreshold:s,pinchOutside:a},c=new _e(e,u);return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(i){c.on(""+e+i,(function(a){var s=a.eventType;!o[s]||o[s](a)?Wi(t,n,e,r,i,a)||a.stop():a.stop()}))}))})),c}var Vi=function(){function t(t,e,n){var r=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this.onEvent=function(t){var e=r.eventName,n=r.moveable;r.ables.forEach((function(r){r[e]({inputEvent:t},n)}))},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),$i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=sn({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]]},Hn(null)),e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e}an(e,t);var r=e.prototype;return r.render=function(){var t=this.props,e=this.state,r=t.edge,o=t.parentPosition,i=t.className,a=t.target,s=t.zoom,u=t.cspNonce,c=t.translateZ,l=t.cssStyled;this.checkUpdate(),this.updateRenderPoses();var f=o||{left:0,top:0},p=f.left,d=f.top,h=e.left,v=e.top,g=e.target,m=e.direction,b=e.renderPoses,y=t.targets,x=(y&&y.length||a)&&g,E=this.isDragging(),w={},C={createElement:Q};return this.getEnabledAbles().forEach((function(t){w["data-able-"+t.name.toLowerCase()]=!0})),Q(l,sn({cspNonce:u,ref:n(this,"controlBox"),className:Cn("control-box",-1===m?"reverse":"",E?"dragging":"")+" "+i},w,{style:{position:"absolute",display:x?"block":"none",transform:"translate("+(h-p)+"px, "+(v-d)+"px) translateZ("+c+"px)","--zoom":s,"--zoompx":s+"px"}}),this.renderAbles(),ni(C,r?"n":"",b[0],b[1],s,0),ni(C,r?"e":"",b[1],b[3],s,1),ni(C,r?"w":"",b[0],b[2],s,2),ni(C,r?"s":"",b[2],b[3],s,3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,r=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),n||e||r||this.updateRect("",!1,!0),this.updateCheckInput()},r.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},r.componentWillUnmount=function(){this.isUnmounted=!0,Qn(this,"targetGesto"),Qn(this,"controlGesto");var t=this.events;for(var e in t){var n=t[e];n&&n.destroy()}},r.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(hn)>-1},r.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},r.hitTest=function(t){var e,n=this.state,r=n.target,o=n.pos1,i=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;if(!r)return 0;if(t instanceof Element){var c=t.getBoundingClientRect();e={left:c.left,top:c.top,width:c.width,height:c.height}}else e=sn({width:0,height:0},t);var l=e.left,f=e.top,p=e.width,d=e.height,h=ne([o,i,s,a],u),v=ce(h,[[l,f],[l+p,f],[l+p,f+d],[l,f+d]]),g=ee(h);return v&&g?Math.min(100,v/g*100):0},r.isInside=function(t,e){var n=this.state,r=n.target,o=n.pos1,i=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;return!!r&&oe([t,e],ne([o,i,s,a],u))},r.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,o=r.parentMoveable,i=this.state.target||this.props.target,a=this.getContainer(),s=o?o.props.rootContainer:r.rootContainer;this.updateState(Hn(this.controlBox&&this.controlBox.getElement(),i,a,a,s||a),!o&&n)},r.isTargetChanged=function(t,e){var n=this.props,r=n.dragTarget||n.target,o=t.dragTarget||t.target,i=n.dragArea,a=t.dragArea;return!i&&o!==r||(e||i)&&a!==i},r.updateNativeEvents=function(t){var e=this,n=this.props.dragArea?this.areaElement:this.state.target,r=this.events,o=R(r);if(this.isTargetChanged(t))for(var i in r){var a=r[i];a&&a.destroy(),r[i]=null}if(n){var s=this.enabledAbles;o.forEach((function(t){var o=or(s,[t]),i=o.length>0,a=r[t];i?(a||(a=new Vi(n,e,t),r[t]=a),a.setAbles(o)):a&&(a.destroy(),r[t]=null)}))}},r.updateEvent=function(t){var e=this.controlBox.getElement(),n=this.targetAbles.length,r=this.controlAbles.length,o=this.props,i=o.dragTarget||o.target,a=this.isTargetChanged(t,!0),s=!n&&this.targetGesto||a;s&&(Qn(this,"targetGesto"),this.updateState({gesto:null})),r||Qn(this,"controlGesto"),i&&n&&!this.targetGesto&&(this.targetGesto=Hi(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=Ui(this,e,"controlAbles","Control")),s&&this.unsetAbles()},r.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,e=Kn(this.state),n=e[0],r=e[1],o=e[2],i=e[3],a=zn(e),s=t.width,u=t.height,c=a.width,l=a.height,f=a.left,p=a.top,d=[t.left,t.top],h=zt(d,t.origin);return{width:c,height:l,left:f,top:p,pos1:n,pos2:r,pos3:o,pos4:i,offsetWidth:s,offsetHeight:u,beforeOrigin:zt(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},r.getManager=function(){return this},r.getRotation=function(){var t=this.state;return function(t,e,n){var r=I(t,e)/Math.PI*180;return(r=n>=0?r:180-r)>=0?r:360+r}(t.pos1,t.pos2,t.direction)},r.request=function(t,e,n){void 0===e&&(e={});var r=this.props,o=r.ables,i=r.groupable,a=o.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),c=n||e.isInstant,l=u.isControl?"controlAbles":"targetAbles",f=(i?"Group":"")+(u.isControl?"Control":""),p={request:function(e){return Wi(s,l,"drag",f,"",sn(sn({},u.request(e)),{requestAble:t,isRequest:!0}),c),this},requestEnd:function(){return Wi(s,l,"drag",f,"End",sn(sn({},u.requestEnd()),{requestAble:t,isRequest:!0}),c),this}};return Wi(s,l,"drag",f,"Start",sn(sn({},u.requestStart(e)),{requestAble:t,isRequest:!0}),c),c?p.request(e).requestEnd():p},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,o=t.allMatrix,i=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,f=t.top,p=e.padding||{},d=p.left,h=void 0===d?0:d,v=p.top,g=void 0===v?0:v,m=p.bottom,b=void 0===m?0:m,y=p.right,x=void 0===y?0:y,E=i?4:3,w=e.groupable?n:zt(n,[l,f]);t.renderPoses=[zt(a,fr(o,[-h,-g],r,w,E)),zt(s,fr(o,[x,-g],r,w,E)),zt(u,fr(o,[-h,b],r,w,E)),zt(c,fr(o,[x,b],r,w,E))]},r.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,o=this.state,i=o.target,a=o.container;(i||e)&&(this.updateAbles(),(!ir(i,e)||!ir(a,n))&&(this.updateState({target:e,container:n}),r||!n&&!this.controlBox||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},r.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=Qe(t,e)),n[r]},r.unsetAbles=function(){var t=this;this.targetAbles.filter((function(e){return!!e.unset&&(e.unset(t),!0)})).length&&this.forceUpdate()},r.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,o=t.filter((function(t){return t&&(t.always||n[t.name])})),i="drag"+e+"ControlStart",a=or(o,["drag"+e+"Start","pinch"+e+"Start"],r),s=or(o,[i],r);this.enabledAbles=o,this.targetAbles=a,this.controlAbles=s},r.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var r in t)n[r]=t[r]}},r.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},r.renderAbles=function(){var t,e,n,r,o=this,i=this.props.triggerAblesSimultaneously,a={createElement:Q};return(t=sr(or(this.getEnabledAbles(),["render"],i).map((function(t){return(0,t.render)(o,a)||[]}))).filter((function(t){return t})),e=function(t){return t.key},n=[],r={},t.forEach((function(o,i){var a=e(o,i,t),s=r[a];s||(s=[],r[a]=s,n.push(s)),s.push(o)})),n).map((function(t){return t[0]}))},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:50,cssStyled:null,customStyledMap:{},props:{}},e}(lt),Ki={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,e){var n=t.props.targets||[];t.moveables=[];var o=t.state,i={left:o.left,top:o.top};return n.map((function(n,o){return e.createElement($i,{key:"moveable"+o,ref:r(t,"moveables",o),target:n,origin:!1,cssStyled:t.props.cssStyled,customStyledMap:t.props.customStyledMap,parentMoveable:t,parentPosition:i})}))}};function Ji(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),sn(sn({},t),{datas:e})}var Zi={name:"edgeDraggable",props:{edgeDraggable:Boolean},events:{},dragControlCondition:function(t,e){if(!e.props.edgeDraggable||!t.inputEvent)return!1;var n=t.inputEvent.target;return j(n,Cn("direction"))&&j(n,Cn("line"))},dragControlStart:function(t,e){return Vo.dragStart(t,Ji(e))},dragControl:function(t,e){return Vo.drag(t,Ji(e))},dragControlEnd:function(t,e){return Vo.dragEnd(t,Ji(e))},dragGroupControlCondition:function(t,e){if(!e.props.edgeDraggable||!t.inputEvent)return!1;var n=t.inputEvent.target;return j(n,Cn("direction"))&&j(n,Cn("line"))},dragGroupControlStart:function(t,e){return Vo.dragGroupStart(t,Ji(e))},dragGroupControl:function(t,e){return Vo.dragGroup(t,Ji(e))},dragGroupControlEnd:function(t,e){return Vo.dragGroupEnd(t,Ji(e))},unset:function(t){t.state.dragInfo=null}},Qi={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},ta=[Yi,yi,Uo,br,Vo,Zi,ti,ii,ai,ci,bi,xi,gi,Fi,ji,qi,Ki,Qi,{name:"clickable",props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.state.target,r=e.inputEvent,o=e.inputTarget;if(r&&o&&!e.isDrag&&!t.isMoveableElement(o)){var i=n.contains(o);nr(t,"onClick",tr(t,e,{isDouble:e.isDouble,inputTarget:o,isTarget:n===o,containsTarget:i}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(n&&r&&!e.isDrag&&!t.isMoveableElement(r)&&e.datas.inputTarget!==r){var o=t.props.targets,i=o.indexOf(r),a=i>-1,s=!1;-1===i&&(s=(i=D(o,(function(t){return t.contains(r)})))>-1),nr(t,"onClickGroup",tr(t,e,{isDouble:e.isDouble,targets:o,inputTarget:r,targetIndex:i,isTarget:a,containsTarget:s}))}}},vi,Xi],ea=ta.reduce((function(t,e){return sn(sn({},t),e.events)}),{}),na=ta.reduce((function(t,e){return sn(sn({},t),e.props)}),{}),ra=vr(ea),oa=Object.keys(ra),ia=Object.keys(na);function aa(t,e){return Math.max.apply(Math,t.map((function(t){var n=t[0],r=t[1],o=t[2],i=t[3];return Math.max(n[e],r[e],o[e],i[e])})))}function sa(t,e){return Math.min.apply(Math,t.map((function(t){var n=t[0],r=t[1],o=t[2],i=t[3];return Math.min(n[e],r[e],o[e],i[e])})))}var ua=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new rn,e.moveables=[],e.transformOrigin="50% 50%",e}an(e,t);var n=e.prototype;return n.updateEvent=function(t){var e=this.state,n=this.props,r=t.dragTarget||e.target,o=n.dragTarget||this.areaElement;r!==o&&(Qn(this,"targetGesto"),Qn(this,"controlGesto"),e.target=null),e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=Hi(this,o,"Group"),this.controlGesto=Ui(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var i=!ir(t.container,n.container);i&&(e.container=n.container);var a=this.differ.update(n.targets),s=a.added,u=a.changed,c=a.removed;(i||s.length||u.length||c.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(t,e,n){if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var r=this.state,o=this.props,i=r.target||o.target;(!e||""!==t&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var a=this.rotation,s=this.scale,u=function(t,e){if(!t.length)return[0,0,0,0];var n=t.map((function(t){return Kn(t.state)})),r=mn,o=mn,i=0,a=0,s=Jn(e,1e-7);if(s%90){var u=s/180*Math.PI,c=Math.tan(u),l=-1/c,f=[bn,mn],p=[bn,mn];n.forEach((function(t){t.forEach((function(t){var e=t[1]-c*t[0],n=t[1]-l*t[0];f[0]=Math.max(f[0],e),f[1]=Math.min(f[1],e),p[0]=Math.max(p[0],n),p[1]=Math.min(p[1],n)}))})),f.forEach((function(t){p.forEach((function(e){var n=(e-t)/(c-l),i=c*n+t;r=Math.min(r,n),o=Math.min(o,i)}))}));var d=n.map((function(t){var e=t[0],n=t[1],r=t[2],o=t[3];return[Wt(e,-u),Wt(n,-u),Wt(r,-u),Wt(o,-u)]}));i=aa(d,0)-sa(d,0),a=aa(d,1)-sa(d,1)}else if(r=sa(n,0),o=sa(n,1),i=aa(n,0)-r,a=aa(n,1)-o,s%180){var h=i;i=a,a=h}return[r,o,i,a]}(this.moveables,a),c=u[0],l=u[1],f=u[2],p=u[3],d="rotate("+a+"deg) scale("+(s[0]>=0?1:-1)+", "+(s[1]>=0?1:-1)+")";i.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+f+"px; height:"+p+"px;transform:"+d,r.width=f,r.height=p;var h=this.getContainer(),v=Hn(this.controlBox.getElement(),i,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h),g=[v.left,v.top],m=Kn(v),b=m[0],y=m[1],x=m[2],E=m[3],w=re([b,y,x,E]),C=[w.minX,w.minY];v.pos1=jt(b,C),v.pos2=jt(y,C),v.pos3=jt(x,C),v.pos4=jt(E,C),v.left=c-v.left+C[0],v.top=l-v.top+C[1],v.origin=jt(zt(g,v.origin),C),v.beforeOrigin=jt(zt(g,v.beforeOrigin),C),v.originalBeforeOrigin=zt(g,v.originalBeforeOrigin);var S=v.targetClientRect,_=s[0]*s[1]>0?1:-1;S.top+=v.top-r.top,S.left+=v.left-r.left,i.style.transform="translate("+-C[0]+"px, "+-C[1]+"px) "+d,this.updateState(sn(sn({},v),{direction:_,beforeDirection:_}),n)}},n.getRect=function(){return sn(sn({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},n.triggerEvent=function(e,n,r){if(r||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n)},n.updateAbles=function(){t.prototype.updateAbles.call(this,un(this.props.ables,[Ki]),"Group")},e.defaultProps=sn(sn({},$i.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}($i),ca=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}an(e,t);var o=e.prototype;return o.render=function(){var t=this,e=this.props,o=e.cspNonce,i=e.cssStyled,a=e.targets;return Q(i,{cspNonce:o,ref:n(this,"controlBox"),className:Cn("control-box")},a.map((function(e,n){return Q($i,sn({key:"moveable"+n,ref:r(t,"moveables",n)},t.props,{target:e,wrapperMoveable:t}))})))},o.componentDidUpdate=function(){},o.updateRect=function(t,e,n){void 0===n&&(n=!0),this.moveables.forEach((function(r){r.updateRect(t,e,n)}))},o.getRect=function(){return sn(sn({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},o.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},o.dragStart=function(){return this},o.hitTest=function(){return 0},o.isInside=function(){return!1},o.isDragging=function(){return!1},o.updateRenderPoses=function(){},o.updateEvent=function(){},o.checkUpdate=function(){},o.triggerEvent=function(){},o.updateAbles=function(){},e}($i),la=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return an(e,t),e.defaultAbles=ta,e}(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e}an(e,t);var r,o,i=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var n=e.css;n&&n.forEach((function(e){t[e]=!0}))}));var e=R(t).join("\n");this.defaultStyled=Qe("div",function(t,e){return e.replace(/([^}{]*){/gm,(function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(hn,vn+e))},e.getTotalAbles=function(){return un([yi,Ki,Qi,vi],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,r=e.ables,o=e.props,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["ables","props"]),a=mr(i.target||i.targets),s=function(t,e){var n=[];return t.forEach((function(t){t&&(m(t)?e[t]&&n.push.apply(n,e[t]):n.push(t))})),n}(a,this.selectorMap);this.refTargets=a;var u=s.length>1,c=un(t.getTotalAbles(),r||[]),l=sn(sn(sn({},i),o||{}),{ables:c,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return u?i.individualGroupable?Q(ca,sn({key:"individual-group",ref:n(this,"moveable")},l,{target:null,targets:s})):Q(ua,sn({key:"group",ref:n(this,"moveable")},l,{target:null,targets:s})):Q($i,sn({key:"single",ref:n(this,"moveable")},l,{target:s[0]}))},i.componentDidMount=function(){this.updateRefs()},i.componentDidUpdate=function(){this.updateRefs()},i.updateRefs=function(t){var e=mr(this.props.target||this.props.targets),n=this.refTargets.some((function(t,n){var r=e[n];return!(!t&&!r)&&t!==r})),r=t?{}:this.selectorMap,o={};this.refTargets.forEach((function(t){m(t)&&(r[t]?o[t]=r[t]:(n=!0,o[t]=[].slice.call(document.querySelectorAll(t))))})),this.selectorMap=o,n&&this.forceUpdate()},i.getManager=function(){return this.moveable},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);i>3&&a&&Object.defineProperty(e,n,a)}([(r=wn,void 0===o&&(o={}),function(t,e){r.forEach((function(n){var r=o[n]||n;t[r]||(t[r]=function(){for(var t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=(t=this[e])[n].apply(t,r);return i===this[e]?this:i})}))})],e.prototype,"moveable",void 0),e}(lt)),fa=function(t,e){return(fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function pa(t,e){function n(){this.constructor=t}fa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var da=function(){return(da=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var ha=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return pa(e,t),e.prototype.render=function(){return t=Q(la,da({ref:n(this,"moveable")},this.state)),e=this.state.parentElement,Q(ft,{element:t,container:e});var t,e},e}(ct),va=ia,ga=wn,ma=oa,ba=function(){return(ba=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var ya=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pa(e,t),e}(function(t){function e(e,r){void 0===r&&(r={});var o=t.call(this)||this;o.tempElement=document.createElement("div");var i=da({container:e||document.body},r),a={};ma.forEach((function(t){var e;a[(e="on "+t,e.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()})))]=function(e){return o.trigger(t,e)}})),vt(Q(ha,da({ref:n(o,"innerMoveable"),parentElement:e},i,a)),o.tempElement);var s=i.target;return g(s)&&s.length>1&&o.updateRect(),o}pa(e,t);var r=e.prototype;return r.setState=function(t,e){this.innerMoveable.setState(t,e)},r.destroy=function(){vt(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([o(ga,(function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})})),o(va,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})}))],e)}(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(v(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(v(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var o=D(r,(function(t){return t.listener===e}));o>-1&&r.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var o=!1;return e.eventType=t,e.stop=function(){o=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}(r).forEach((function(r){r.listener(e),r.once&&n.off(t,r.listener)})),!o},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(ba({listener:e},n))},t}())),xa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ea(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wa(t){var e={exports:{}};return t(e,e.exports),e.exports}function Ca(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}
/*!
    localForage -- Offline Storage, Improved
    Version 1.9.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Sa=wa((function(t,e){t.exports=function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){if(!s&&Ca)return Ca(a);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){var n=e[a][1][t];return o(n||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var i=Ca,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){(function(t){var n,r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}function f(t){1!==c.push(t)||r||n()}e.exports=f}).call(this,void 0!==xa?xa:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){var r=t(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==o&&d(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(t,e,n){r((function(){var r;try{r=e(n)}catch(e){return i.reject(t,e)}r===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,r)}))}function p(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function o(e){n||(n=!0,i.resolve(t,e))}function a(){e(o,r)}var s=h(a);"error"===s.status&&r(s.value)}function h(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function v(t){return t instanceof this?t:i.resolve(new this(o),t)}function g(t){var e=new this(o);return i.reject(e,t)}function m(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,u=-1,c=new this(o);++u<n;)l(t[u],u);return c;function l(t,o){function u(t){a[o]=t,++s!==n||r||(r=!0,i.resolve(c,a))}e.resolve(t).then(u,(function(t){r||(r=!0,i.reject(c,t))}))}}function b(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)u(t[a]);return s;function u(t){e.resolve(t).then((function(t){r||(r=!0,i.resolve(s,t))}),(function(t){r||(r=!0,i.reject(s,t))}))}}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(o);return this.state!==u?f(n,this.state===s?t:e,this.outcome):this.queue.push(new l(n,t,e)),n},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=h(p,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=s,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=v,c.reject=g,c.all=m,c.race=b},{1:1}],3:[function(t,e,n){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==xa?xa:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var a=i();function s(){try{if(!a||!a.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function u(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var c=Promise;function l(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function f(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function p(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",v=void 0,g={},m=Object.prototype.toString,b="readonly",y="readwrite";function x(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}function E(t){return new c((function(e){var n=t.transaction(h,y),r=u([""]);n.objectStore(h).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function w(t){return"boolean"==typeof v?c.resolve(v):E(t).then((function(t){return v=t}))}function C(t){var e=g[t.name],n={};n.promise=new c((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function S(t){var e=g[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function _(t,e){var n=g[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function A(t,e){return new c((function(n,r){if(g[t.name]=g[t.name]||N(),t.db){if(!e)return n(t.db);C(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var i=a.open.apply(a,o);e&&(i.onupgradeneeded=function(e){var n=i.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),i.onerror=function(t){t.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),S(t)}}))}function M(t){return A(t,!1)}function D(t){return A(t,!0)}function R(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function k(t){return new c((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)}))}function O(t){return u([x(atob(t.data))],{type:t.type})}function P(t){return t&&t.__local_forage_encoded_blob}function B(t){var e=this,n=e._initReady().then((function(){var t=g[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return f(n,t,t),n}function T(t){C(t);for(var e=g[t.name],n=e.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,M(t).then((function(e){return t.db=e,R(t)?D(t):e})).then((function(r){t.db=e.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(e){throw _(t,e),e}))}function I(t,e,n,r){void 0===r&&(r=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(r>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return c.resolve().then((function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),D(t)})).then((function(){return T(t).then((function(){I(t,e,n,r-1)}))})).catch(n);n(o)}}function N(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var o=g[n.name];o||(o=N(),g[n.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=B);var i=[];function a(){return c.resolve()}for(var s=0;s<o.forages.length;s++){var u=o.forages[s];u!==e&&i.push(u._initReady().catch(a))}var l=o.forages.slice(0);return c.all(i).then((function(){return n.db=o.db,M(n)})).then((function(t){return n.db=t,R(n,e._defaultConfig.version)?D(n):t})).then((function(t){n.db=o.db=t,e._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==e&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function j(t,e){var n=this;t=p(t);var r=new c((function(e,r){n.ready().then((function(){I(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),P(t)&&(t=O(t)),e(t)},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return l(r,e),r}function F(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){I(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;P(r)&&(r=O(r));var o=t(r,n.key,s++);void 0!==o?e(o):n.continue()}else e()},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return l(r,e),r}function G(t,e,n){var r=this;t=p(t);var o=new c((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===m.call(e)?w(i.db).then((function(t){return t?e:k(e)})):e})).then((function(e){I(r._dbInfo,y,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var u=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=u.error?u.error:u.transaction.error;o(t)}}catch(t){o(t)}}))})).catch(o)}));return l(o,n),o}function L(t,e){var n=this;t=p(t);var r=new c((function(e,r){n.ready().then((function(){I(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){r(a.error)},i.onabort=function(){var t=a.error?a.error:a.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return l(r,e),r}function q(t){var e=this,n=new c((function(t,n){e.ready().then((function(){I(e._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=i.error?i.error:i.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return l(n,t),n}function Y(t){var e=this,n=new c((function(t,n){e.ready().then((function(){I(e._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}}catch(t){n(t)}}))})).catch(n)}));return l(n,t),n}function X(t,e){var n=this,r=new c((function(e,r){t<0?e(null):n.ready().then((function(){I(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,u=a.openKeyCursor();u.onsuccess=function(){var n=u.result;n?0===t||s?e(n.key):(s=!0,n.advance(t)):e(null)},u.onerror=function(){r(u.error)}}catch(t){r(t)}}))})).catch(r)}));return l(r,e),r}function W(t){var e=this,n=new c((function(t,n){e.ready().then((function(){I(e._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var e=i.result;e?(a.push(e.key),e.continue()):t(a)},i.onerror=function(){n(i.error)}}catch(t){n(t)}}))})).catch(n)}));return l(n,t),n}function H(t,e){e=d.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;if(t.name){var i=t.name===n.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):M(t).then((function(e){var n=g[t.name],r=n.forages;n.db=e;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=e;return e}));r=t.storeName?i.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;C(t);var r=g[t.name],o=r.forages;e.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}return new c((function(e,r){var o=a.open(t.name,n);o.onerror=function(t){o.result.close(),r(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,S(n._dbInfo)}})).catch((function(e){throw(_(t,e)||c.resolve()).catch((function(){})),e}))}})):i.then((function(e){C(t);var n=g[t.name],r=n.forages;e.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new c((function(e,n){var r=a.deleteDatabase(t.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<r.length;e++)S(r[e]._dbInfo)})).catch((function(e){throw(_(t,e)||c.resolve()).catch((function(){})),e}))}))}else r=c.reject("Invalid arguments");return l(r,e),r}var U={_driver:"asyncStorage",_initStorage:z,_support:s(),iterate:F,getItem:j,setItem:G,removeItem:L,clear:q,length:Y,key:X,keys:W,dropInstance:H};function V(){return"function"==typeof openDatabase}var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",Q=Z.length,tt="arbf",et="blob",nt="si08",rt="ui08",ot="uic8",it="si16",at="si32",st="ur16",ut="ui32",ct="fl32",lt="fl64",ft=Q+tt.length,pt=Object.prototype.toString;function dt(t){var e,n,r,o,i,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(e=0;e<s;e+=4)n=$.indexOf(t[e]),r=$.indexOf(t[e+1]),o=$.indexOf(t[e+2]),i=$.indexOf(t[e+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|o>>2,l[u++]=(3&o)<<6|63&i;return c}function ht(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=$[n[e]>>2],r+=$[(3&n[e])<<4|n[e+1]>>4],r+=$[(15&n[e+1])<<2|n[e+2]>>6],r+=$[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function vt(t,e){var n="";if(t&&(n=pt.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===pt.call(t.buffer))){var r,o=Z;t instanceof ArrayBuffer?(r=t,o+=tt):(r=t.buffer,"[object Int8Array]"===n?o+=nt:"[object Uint8Array]"===n?o+=rt:"[object Uint8ClampedArray]"===n?o+=ot:"[object Int16Array]"===n?o+=it:"[object Uint16Array]"===n?o+=st:"[object Int32Array]"===n?o+=at:"[object Uint32Array]"===n?o+=ut:"[object Float32Array]"===n?o+=ct:"[object Float64Array]"===n?o+=lt:e(new Error("Failed to get type for BinaryArray"))),e(o+ht(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=K+t.type+"~"+ht(this.result);e(Z+et+n)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}}function gt(t){if(t.substring(0,Q)!==Z)return JSON.parse(t);var e,n=t.substring(ft),r=t.substring(Q,ft);if(r===et&&J.test(n)){var o=n.match(J);e=o[1],n=n.substring(o[0].length)}var i=dt(n);switch(r){case tt:return i;case et:return u([i],{type:e});case nt:return new Int8Array(i);case rt:return new Uint8Array(i);case ot:return new Uint8ClampedArray(i);case it:return new Int16Array(i);case st:return new Uint16Array(i);case at:return new Int32Array(i);case ut:return new Uint32Array(i);case ct:return new Float32Array(i);case lt:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var mt={serialize:vt,deserialize:gt,stringToBuffer:dt,bufferToString:ht};function bt(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function yt(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var o=new c((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(o){bt(o,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=mt,o}function xt(t,e,n,r,o,i){t.executeSql(n,r,o,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?i(t,a):bt(t,e,(function(){t.executeSql(n,r,o,i)}),i)}),i):i(t,a)}),i)}function Et(t,e){var n=this;t=p(t);var r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xt(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function wt(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xt(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var u=i.item(s),c=u.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=t(c,u.key,s+1)))return void e(c)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function Ct(t,e,n,r){var o=this;t=p(t);var i=new c((function(i,a){o.ready().then((function(){void 0===e&&(e=null);var s=e,u=o._dbInfo;u.serializer.serialize(e,(function(e,c){c?a(c):u.db.transaction((function(n){xt(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void i(Ct.apply(o,[t,s,n,r-1]));a(e)}}))}))})).catch(a)}));return l(i,n),i}function St(t,e,n){return Ct.apply(this,[t,e,n,1])}function _t(t,e){var n=this;t=p(t);var r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xt(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function At(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){xt(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,t),n}function Mt(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){xt(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,t),n}function Dt(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){xt(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,e),r}function Rt(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){xt(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,t),n}function kt(t){return new c((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);e({db:t,storeNames:o})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}function Ot(t,e){e=d.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;return l(r=t.name?new c((function(e){var r;r=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(kt(r))})).then((function(t){return new c((function(e,n){t.db.transaction((function(r){function o(t){return new c((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var i=[],a=0,s=t.storeNames.length;a<s;a++)i.push(o(t.storeNames[a]));c.all(i).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):c.reject("Invalid arguments"),e),r}var Pt={_driver:"webSQLStorage",_initStorage:yt,_support:V(),iterate:wt,getItem:Et,setItem:St,removeItem:_t,clear:At,length:Mt,key:Dt,keys:Rt,dropInstance:Ot};function Bt(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function Tt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function It(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}function Nt(){return!It()||localStorage.length>0}function zt(t){var e=this,n={};if(t)for(var r in t)n[r]=t[r];return n.keyPrefix=Tt(t,e._defaultConfig),Nt()?(e._dbInfo=n,n.serializer=mt,c.resolve()):c.reject()}function jt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return l(n,t),n}function Ft(t,e){var n=this;t=p(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return l(r,e),r}function Gt(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,u.substring(o),a++)))return c}}}));return l(r,e),r}function Lt(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return l(r,e),r}function qt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(t.keyPrefix)&&r.push(i.substring(t.keyPrefix.length))}return r}));return l(n,t),n}function Yt(t){var e=this.keys().then((function(t){return t.length}));return l(e,t),e}function Xt(t,e){var n=this;t=p(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return l(r,e),r}function Wt(t,e,n){var r=this;t=p(t);var o=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new c((function(o,i){var a=r._dbInfo;a.serializer.serialize(e,(function(e,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))}));return l(o,n),o}function Ht(t,e){if(e=d.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,o=this;return l(r=t.name?new c((function(e){t.storeName?e(Tt(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),e),r}var Ut={_driver:"localStorageWrapper",_initStorage:zt,_support:Bt(),iterate:Gt,getItem:Ft,setItem:Wt,removeItem:Xt,clear:jt,length:Yt,key:Lt,keys:qt,dropInstance:Ht},Vt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},$t=function(t,e){for(var n=t.length,r=0;r<n;){if(Vt(t[r],e))return!0;r++}return!1},Kt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Jt={},Zt={},Qt={INDEXEDDB:U,WEBSQL:Pt,LOCALSTORAGE:Ut},te=[Qt.INDEXEDDB._driver,Qt.WEBSQL._driver,Qt.LOCALSTORAGE._driver],ee=["dropInstance"],ne=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),re={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function oe(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function ie(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Kt(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var ae=new(function(){function t(e){for(var n in o(this,t),Qt)if(Qt.hasOwnProperty(n)){var r=Qt[n],i=r._driver;this[n]=i,Jt[i]||this.defineDriver(r)}this._defaultConfig=ie({},re),this._config=ie({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new c((function(e,n){try{var r=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var i=ne.concat("_initStorage"),a=0,s=i.length;a<s;a++){var u=i[a];if((!$t(ee,u)||t[u])&&"function"!=typeof t[u])return void n(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=c.reject(e);return l(n,arguments[arguments.length-1]),n}},n=0,r=ee.length;n<r;n++){var o=ee[n];t[o]||(t[o]=e(o))}}();var f=function(n){Jt[r]&&console.info("Redefining LocalForage driver: "+r),Jt[r]=t,Zt[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(f,n):f(!!t._support):f(!0)}catch(t){n(t)}}));return f(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=Jt[t]?c.resolve(Jt[t]):c.reject(new Error("Driver not found."));return f(r,e,n),r},t.prototype.getSerializer=function(t){var e=c.resolve(mt);return f(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return f(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;Kt(t)||(t=[t]);var o=this._getSupportedDrivers(t);function i(){r._config.driver=r.driver()}function a(t){return r._extend(t),i(),r._ready=r._initStorage(r._config),r._ready}function s(t){return function(){var e=0;function n(){for(;e<t.length;){var o=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=c.reject(s),r._driverSet}return n()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var t=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)}))})).catch((function(){i();var t=new Error("No available storage method found.");return r._driverSet=c.reject(t),r._driverSet})),f(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!Zt[t]},t.prototype._extend=function(t){ie(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ne.length;t<e;t++)oe(this,ne[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=ae},{3:3}]},{},[4])(4)}));const _a=t.reactive({current:{}});var Aa=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ma=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Da=function(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var o,i,a=Aa.exec(t||""),s={},u=14;u--;)s[Ma[u]]=a[u]||"";return-1!=n&&-1!=r&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(t,e){var n=/\/{2,9}/g,r=e.replace(n,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||r.splice(0,1);"/"==e.substr(e.length-1,1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=(o=s.query,i={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(i[e]=n)})),i),s};var Ra=1e3,ka=60*Ra,Oa=60*ka,Pa=24*Oa,Ba=7*Pa,Ta=365.25*Pa,Ia=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*Ta;case"weeks":case"week":case"w":return n*Ba;case"days":case"day":case"d":return n*Pa;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Oa;case"minutes":case"minute":case"mins":case"min":case"m":return n*ka;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ra;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=Pa)return Na(t,e,Pa,"day");if(e>=Oa)return Na(t,e,Oa,"hour");if(e>=ka)return Na(t,e,ka,"minute");if(e>=Ra)return Na(t,e,Ra,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=Pa)return Math.round(t/Pa)+"d";if(e>=Oa)return Math.round(t/Oa)+"h";if(e>=ka)return Math.round(t/ka)+"m";if(e>=Ra)return Math.round(t/Ra)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Na(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}var za=function(t){function e(t){let r,o=null;function i(...t){if(!i.enabled)return;const n=i,o=Number(new Date),a=o-(r||o);n.diff=a,n.prev=r,n.curr=o,r=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const i=e.formatters[o];if("function"==typeof i){const e=t[s];r=i.call(n,e),t.splice(s,1),s--}return r})),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return i.namespace=t,i.useColors=e.useColors(),i.color=e.selectColor(t),i.extend=n,i.destroy=e.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null===o?e.enabled(t):o,set:t=>{o=t}}),"function"==typeof e.init&&e.init(i),i}function n(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=Ia,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e},ja=wa((function(t,e){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))})),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=za(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}})),Fa=wa((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=ja("socket.io-client:url");e.url=function(t,e){let r=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(n("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),n("parse %s",t),r=Da(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port,r.href=r.protocol+"://"+o+(e&&e.port===r.port?"":":"+r.port),r}})),Ga=wa((function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}})),La="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),qa=function(t){const e=t.xdomain,n=t.xscheme,r=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Ga))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(t){}if(!e)try{return new(La[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}};const Ya=Object.create(null);Ya.open="0",Ya.close="1",Ya.ping="2",Ya.pong="3",Ya.message="4",Ya.upgrade="5",Ya.noop="6";const Xa=Object.create(null);Object.keys(Ya).forEach((t=>{Xa[Ya[t]]=t}));var Wa={PACKET_TYPES:Ya,PACKET_TYPES_REVERSE:Xa,ERROR_PACKET:{type:"error",data:"parser error"}};const{PACKET_TYPES:Ha}=Wa,Ua="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Va="function"==typeof ArrayBuffer,$a=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};var Ka=({type:t,data:e},n,r)=>{return Ua&&e instanceof Blob?n?r(e):$a(e,r):Va&&(e instanceof ArrayBuffer||(o=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer))?n?r(e instanceof ArrayBuffer?e:e.buffer):$a(new Blob([e]),r):r(Ha[t]+(e||""));var o},Ja=wa((function(t,e){var n;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.encode=function(t){var e,r=new Uint8Array(t),o=r.length,i="";for(e=0;e<o;e+=3)i+=n[r[e]>>2],i+=n[(3&r[e])<<4|r[e+1]>>4],i+=n[(15&r[e+1])<<2|r[e+2]>>6],i+=n[63&r[e+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,o,i,a,s=.75*t.length,u=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),f=new Uint8Array(l);for(e=0;e<u;e+=4)r=n.indexOf(t[e]),o=n.indexOf(t[e+1]),i=n.indexOf(t[e+2]),a=n.indexOf(t[e+3]),f[c++]=r<<2|o>>4,f[c++]=(15&o)<<4|i>>2,f[c++]=(3&i)<<6|63&a;return l}}));const{PACKET_TYPES_REVERSE:Za,ERROR_PACKET:Qa}=Wa;let ts;"function"==typeof ArrayBuffer&&(ts=Ja);const es=(t,e)=>{if(ts){const n=ts.decode(t);return ns(n,e)}return{base64:!0,data:t}},ns=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};var rs=(t,e)=>{if("string"!=typeof t)return{type:"message",data:ns(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:es(t.substring(1),e)};return Za[n]?t.length>1?{type:Za[n],data:t.substring(1)}:{type:Za[n]}:Qa};const os=String.fromCharCode(30);var is={protocol:4,encodePacket:Ka,encodePayload:(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach(((t,i)=>{Ka(t,!1,(t=>{r[i]=t,++o===n&&e(r.join(os))}))}))},decodePacket:rs,decodePayload:(t,e)=>{const n=t.split(os),r=[];for(let t=0;t<n.length;t++){const o=rs(n[t],e);if(r.push(o),"error"===o.type)break}return r}},as=wa((function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}));var ss,us=class extends as{constructor(t){super(),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(t){const e=is.decodePacket(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){this.emit("packet",t)}onClose(){this.readyState="closed",this.emit("close")}},cs=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},ls=function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e},fs="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ps={},ds=0,hs=0;function vs(t){var e="";do{e=fs[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function gs(){var t=vs(+new Date);return t!==ss?(ds=0,ss=t):t+"."+vs(ds++)}for(;hs<64;hs++)ps[fs[hs]]=hs;gs.encode=vs,gs.decode=function(t){var e=0;for(hs=0;hs<t.length;hs++)e=64*e+ps[t.charAt(hs)];return e};var ms=gs;const bs=ja("engine.io-client:polling");var ys=class extends us{get name(){return"polling"}doOpen(){this.poll()}pause(t){const e=this;function n(){bs("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){let t=0;this.polling&&(bs("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){bs("pre-pause polling complete"),--t||n()}))),this.writable||(bs("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){bs("pre-pause writing complete"),--t||n()})))}else n()}poll(){bs("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){const e=this;bs("polling got data %s",t);is.decodePayload(t,this.socket.binaryType).forEach((function(t,n,r){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():bs('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=this;function e(){bs("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(bs("transport open - closing"),e()):(bs("transport not open - deferring close"),this.once("open",e))}write(t){this.writable=!1,is.encodePayload(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ms()),this.supportsBinary||t.sid||(t.b64=1),t=cs(t),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}},xs={pick:(t,...e)=>e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})};const{pick:Es}=xs,ws=ja("engine.io-client:polling-xhr");function Cs(){}const Ss=null!=new qa({xdomain:!1}).responseType;class _s extends as{constructor(t,e){super(),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=Es(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new qa(t),n=this;try{ws("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},ws("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){n.onError(t)}),0)}"undefined"!=typeof document&&(this.index=_s.requestsCount++,_s.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Cs:this.xhr.onreadystatechange=Cs,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete _s.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(_s.requestsCount=0,_s.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",As);else if("function"==typeof addEventListener){addEventListener("onpagehide"in La?"pagehide":"unload",As,!1)}function As(){for(let t in _s.requests)_s.requests.hasOwnProperty(t)&&_s.requests[t].abort()}var Ms=class extends ys{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=Ss&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new _s(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t}),r=this;n.on("success",e),n.on("error",(function(t){r.onError("xhr post error",t)}))}doPoll(){ws("xhr poll");const t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t}},Ds=_s;Ms.Request=Ds;const Rs=/\n/g,ks=/\\n/g;let Os;function Ps(){}var Bs=class extends ys{constructor(t){super(t),this.query=this.query||{},Os||(Os=La.___eio=La.___eio||[]),this.index=Os.length;const e=this;Os.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=Ps)}),!1)}get supportsBinary(){return!1}doClose(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};const n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)}doWrite(t,e){const n=this;let r;if(!this.form){const t=document.createElement("form"),e=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=n,t.method="POST",t.setAttribute("accept-charset","utf-8"),e.name="d",t.appendChild(e),document.body.appendChild(t),this.form=t,this.area=e}function o(){i(),e()}function i(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{const t='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(t)}catch(t){r=document.createElement("iframe"),r.name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),i(),t=t.replace(ks,"\\\n"),this.area.value=t.replace(Rs,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&o()}:this.iframe.onload=o}},Ts={WebSocket:La.WebSocket||La.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"};const{pick:Is}=xs,{WebSocket:Ns,usingBrowserWebSocket:zs,defaultBinaryType:js}=Ts,Fs=ja("engine.io-client:websocket"),Gs="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Ls extends us{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=Gs?{}:Is(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=zs&&!Gs?e?new Ns(t,e):new Ns(t):new Ns(t,e,n)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||js,this.addEventListeners()}addEventListeners(){const t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}}write(t){const e=this;this.writable=!1;let n=t.length,r=0;const o=n;for(;r<o;r++)!function(t){is.encodePacket(t,e.supportsBinary,(function(r){const o={};if(!zs&&(t.options&&(o.compress=t.options.compress),e.opts.perMessageDeflate)){("string"==typeof r?Buffer.byteLength(r):r.length)<e.opts.perMessageDeflate.threshold&&(o.compress=!1)}try{zs?e.ws.send(r):e.ws.send(r,o)}catch(t){Fs("websocket closed before onclose event")}--n||i()}))}(t[r]);function i(){e.emit("flush"),setTimeout((function(){e.writable=!0,e.emit("drain")}),0)}}onClose(){us.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&this.ws.close()}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=ms()),this.supportsBinary||(t.b64=1),t=cs(t),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}check(){return!(!Ns||"__initialize"in Ns&&this.name===Ls.prototype.name)}}var qs={polling:function(t){let e,n=!1,r=!1;const o=!1!==t.jsonp;if("undefined"!=typeof location){const e="https:"===location.protocol;let o=location.port;o||(o=e?443:80),n=t.hostname!==location.hostname||o!==t.port,r=t.secure!==e}if(t.xdomain=n,t.xscheme=r,e=new qa(t),"open"in e&&!t.forceJSONP)return new Ms(t);if(!o)throw new Error("JSONP disabled");return new Bs(t)},websocket:Ls};const Ys=ja("engine.io-client:socket");class Xs extends as{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=Da(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Da(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=ls(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,this.open()}createTransport(t){Ys('creating transport "%s"',t);const e=function(t){const e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=is.protocol,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return Ys("options: %j",n),new qs[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Xs.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){const t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return Ys("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){Ys("setting transport %s",t.name);const e=this;this.transport&&(Ys("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))}probe(t){Ys('probing transport "%s"',t);let e=this.createTransport(t,{probe:1}),n=!1;const r=this;function o(){if(r.onlyBinaryUpgrades){const t=!this.supportsBinary&&r.transport.supportsBinary;n=n||t}n||(Ys('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(Ys('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;Xs.priorWebsocketSuccess="websocket"===e.name,Ys('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(Ys("changing transport and sending upgrade packet"),l(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())}))}else{Ys('probe transport "%s" failed',t);const n=new Error("probe error");n.transport=e.name,r.emit("upgradeError",n)}})))}function i(){n||(n=!0,l(),e.close(),e=null)}function a(n){const o=new Error("probe error: "+n);o.transport=e.name,i(),Ys('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",o)}function s(){a("transport closed")}function u(){a("socket closed")}function c(t){e&&t.name!==e.name&&(Ys('"%s" works - aborting "%s"',t.name,e.name),i())}function l(){e.removeListener("open",o),e.removeListener("error",a),e.removeListener("close",s),r.removeListener("close",u),r.removeListener("upgrading",c)}Xs.priorWebsocketSuccess=!1,e.once("open",o),e.once("error",a),e.once("close",s),this.once("close",u),this.once("upgrading",c),e.open()}onOpen(){if(Ys("socket open"),this.readyState="open",Xs.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){Ys("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(Ys('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else Ys('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout)}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Ys("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:t,data:e,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const t=this;function e(){t.onClose("forced close"),Ys("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()),this}onError(t){Ys("socket error %j",t),Xs.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)}onClose(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){Ys('socket close with reason: "%s"',t);const n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}}filterUpgrades(t){const e=[];let n=0;const r=t.length;for(;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}Xs.priorWebsocketSuccess=!1,Xs.protocol=is.protocol;var Ws=Xs,Hs=(t,e)=>new Ws(t,e),Us=Ws,Vs=Ws.protocol,$s=us,Ks=qs,Js=is;Hs.Socket=Us,Hs.protocol=Vs,Hs.Transport=$s,Hs.transports=Ks,Hs.parser=Js;var Zs=wa((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const n="function"==typeof ArrayBuffer,r=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function a(t){return n&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||o&&t instanceof Blob||i&&t instanceof File}e.isBinary=a,e.hasBinary=function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}if(a(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return!0;return!1}})),Qs=wa((function(t,e){function n(t,e){if(!t)return t;if(Zs.isBinary(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const r=new Array(t.length);for(let o=0;o<t.length;o++)r[o]=n(t[o],e);return r}if("object"==typeof t&&!(t instanceof Date)){const r={};for(const o in t)t.hasOwnProperty(o)&&(r[o]=n(t[o],e));return r}return t}function r(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=r(t[n],e);else if("object"==typeof t)for(const n in t)t.hasOwnProperty(n)&&(t[n]=r(t[n],e));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0,e.deconstructPacket=function(t){const e=[],r=t.data,o=t;return o.data=n(r,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=r(t.data,e),t.attachments=void 0,t}})),tu=wa((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const n=ja("socket.io-parser");var r;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(r=e.PacketType||(e.PacketType={}));e.Encoder=class{encode(t){return n("encoding packet %j",t),t.type!==r.EVENT&&t.type!==r.ACK||!Zs.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===r.EVENT?r.BINARY_EVENT:r.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==r.BINARY_EVENT&&t.type!==r.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),n("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=Qs.deconstructPacket(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}};class o extends as{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===r.BINARY_EVENT||e.type===r.BINARY_ACK?(this.reconstructor=new i(e),0===e.attachments&&super.emit("decoded",e)):super.emit("decoded",e);else{if(!Zs.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emit("decoded",e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===r[i.type])throw new Error("unknown packet type "+i.type);if(i.type===r.BINARY_EVENT||i.type===r.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const r=t.substring(n,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(r)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}i.nsp=t.substring(n,e)}else i.nsp="/";const a=t.charAt(e+1);if(""!==a&&Number(a)==a){const n=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}i.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!o.isPayloadValid(i.type,n))throw new Error("invalid payload");i.data=n}return n("decoded %s as %j",t,i),i}static isPayloadValid(t,e){switch(t){case r.CONNECT:return"object"==typeof e;case r.DISCONNECT:return void 0===e;case r.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case r.EVENT:case r.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case r.ACK:case r.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=o;class i{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=Qs.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})),eu=wa((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}}})),nu=wa((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=ja("socket.io-client:socket"),r=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});e.Socket=class extends as{constructor(t,e,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[eu.on(t,"open",this.onopen.bind(this)),eu.on(t,"packet",this.onpacket.bind(this)),eu.on(t,"error",this.onerror.bind(this)),eu.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(r.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const o={type:tu.PacketType.EVENT,data:e,options:{}};o.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),o.id=this.ids++);const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)?n("discard packet as the transport is not currently writable"):this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){n("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:tu.PacketType.CONNECT,data:t})})):this.packet({type:tu.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||super.emit("connect_error",t)}onclose(t){n("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,super.emit("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case tu.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else super.emit("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case tu.PacketType.EVENT:case tu.PacketType.BINARY_EVENT:this.onevent(t);break;case tu.PacketType.ACK:case tu.PacketType.BINARY_ACK:this.onack(t);break;case tu.PacketType.DISCONNECT:this.ondisconnect();break;case tu.PacketType.CONNECT_ERROR:const e=new Error(t.data.message);e.data=t.data.data,super.emit("connect_error",e)}}onevent(t){const e=t.data||[];n("emitting event %j",e),null!=t.id&&(n("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let r=!1;return function(...o){r||(r=!0,n("sending ack %j",o),e.packet({type:tu.PacketType.ACK,id:t,data:o}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(n("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):n("bad ack %s",t.id)}onconnect(t){n("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,super.emit("connect"),this.emitBuffered()}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){n("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:tu.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}})),ru=ou;function ou(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ou.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},ou.prototype.reset=function(){this.attempts=0},ou.prototype.setMin=function(t){this.ms=t},ou.prototype.setMax=function(t){this.max=t},ou.prototype.setJitter=function(t){this.jitter=t};var iu=wa((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const n=ja("socket.io-client:manager");e.Manager=class extends as{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new ru({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||tu;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(n("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;n("opening %s",this.uri),this.engine=Hs(this.uri,this.opts);const e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=eu.on(e,"open",(function(){r.onopen(),t&&t()})),i=eu.on(e,"error",(e=>{n("error"),r.cleanup(),r._readyState="closed",super.emit("error",e),t?t(e):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;n("connect attempt will timeout after %d",t),0===t&&o();const r=setTimeout((()=>{n("connect attempt timed out after %d",t),o(),e.close(),e.emit("error",new Error("timeout"))}),t);this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(o),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){n("open"),this.cleanup(),this._readyState="open",super.emit("open");const t=this.engine;this.subs.push(eu.on(t,"ping",this.onping.bind(this)),eu.on(t,"data",this.ondata.bind(this)),eu.on(t,"error",this.onerror.bind(this)),eu.on(t,"close",this.onclose.bind(this)),eu.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){super.emit("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){super.emit("packet",t)}onerror(t){n("error",t),super.emit("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new nu.Socket(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return void n("socket %s is still active, skipping close",t)}this._close()}_packet(t){n("writing packet %j",t),t.query&&0===t.type&&(t.nsp+="?"+t.query);const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){n("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){n("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){n("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",super.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)n("reconnect failed"),this.backoff.reset(),super.emit("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();n("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const r=setTimeout((()=>{t.skipReconnect||(n("attempting reconnect"),super.emit("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(n("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),super.emit("reconnect_error",e)):(n("reconnect success"),t.onreconnect())})))}),e);this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),super.emit("reconnect",t)}}})),au=Ea(wa((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=e.io=e.Manager=e.protocol=void 0,Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return nu.Socket}});const n=ja("socket.io-client");t.exports=e=o;const r=e.managers={};function o(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const o=Fa.url(t),i=o.source,a=o.id,s=o.path,u=r[a]&&s in r[a].nsps;let c;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?(n("ignoring socket cache for %s",i),c=new iu.Manager(i,e)):(r[a]||(n("new io instance for %s",i),r[a]=new iu.Manager(i,e)),c=r[a]),o.query&&!e.query&&(e.query=o.query),c.socket(o.path,e)}e.io=o,Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return tu.protocol}}),e.connect=o;var i=iu;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return i.Manager}})})));au.Manager;const su=au("ws://localhost:4000");su.on("receiveMsg",(function(t){console.log("",t)}));const uu=t=>t();function cu(t,e=200){return function(t,e){return function(...n){t((()=>e.apply(this,n)),{fn:e,thisArg:this,args:n})}}(function(t){if(t<=0)return uu;let e;return n=>{e&&clearTimeout(e),e=setTimeout(n,t)}}(e),t)}const lu=new Map,fu=new Map;function pu(t){return null==t}const du=Sa.createInstance({name:"dragStore"}),hu=function(t,e,n){const{x:r,y:o,w:i,h:a,z:s}=e;t.style.position="absolute";const u=t.parentElement;if(!u)return;const{clientWidth:c,clientHeight:l}=u;pu(r)||(t.style.left=r/c*100+"%"),pu(o)||(t.style.top=o/l*100+"%"),pu(i)||(t.style.width=i+"px"),pu(a)||(t.style.height=a+"px"),pu(s)||(t.style.zIndex=s)};const vu=Sa.createInstance({name:"dragStore"});var gu=t.defineComponent({setup:()=>({...t.toRefs(_a)}),mounted(){},computed:{filePath(){return this.$slots.default?.[0].componentInstance?.$options.__file}},methods:{handleSave(){this.filePath&&vu.iterate(((t,e)=>{if(t instanceof Array&&t.length){const n=t[t.length-1];su.send({id:e,...n,path:this.filePath})}}))},async handleRestore(){let t=await vu.getItem("perv");if(t){let e=t.split(":")[0],n=await vu.getItem(e);if(n){let t=document.querySelector(`[data-v-id="${e}"]`);if(t){let r=n[n.length-2];t.style.left=r.x+"px",t.style.top=r.y+"px",t.style.width=r.w+"px",t.style.height=r.h+"px",t.style.zIndex=r.z,su.send({id:e,...r})}}}}}});function mu(t,e,n,r,o,i,a,s,u,c){"boolean"!=typeof a&&(u=s,s=a,a=!1);const l="function"==typeof n?n.options:n;let f;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),r&&(l._scopeId=r),i?(f=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,u(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=f):e&&(f=a?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),f)if(l.functional){const t=l.render;l.render=function(e,n){return f.call(n),t(e,n)}}else{const t=l.beforeCreate;l.beforeCreate=t?[].concat(t,f):[f]}return n}const bu="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function yu(t){return(t,e)=>function(t,e){const n=bu?e.media||"default":t,r=Eu[n]||(Eu[n]={ids:new Set,styles:[]});if(!r.ids.has(t)){r.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",e.media&&r.element.setAttribute("media",e.media),void 0===xu&&(xu=document.head||document.getElementsByTagName("head")[0]),xu.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const t=r.ids.size-1,e=document.createTextNode(n),o=r.element.childNodes;o[t]&&r.element.removeChild(o[t]),o.length?r.element.insertBefore(e,o[t]):r.element.appendChild(e)}}}(t,e)}let xu;const Eu={};const wu=gu;var Cu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"main"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"sidebar"},[n("button",{staticClass:"restore",staticStyle:{width:"100px",height:"60px","font-size":"30px"},on:{click:function(e){return e.stopPropagation(),t.handleRestore(e)}}},[t._v("")]),t._v(" "),n("div",{staticClass:"form"},[n("div",{staticClass:"field"},[n("span",{staticClass:"label"},[t._v("x")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.current.x,expression:"current.x",modifiers:{number:!0}}],domProps:{value:t.current.x},on:{input:function(e){e.target.composing||t.$set(t.current,"x",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"field"},[n("span",{staticClass:"label"},[t._v("y")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.current.y,expression:"current.y",modifiers:{number:!0}}],domProps:{value:t.current.y},on:{input:function(e){e.target.composing||t.$set(t.current,"y",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"field"},[n("span",{staticClass:"label"},[t._v("")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.current.w,expression:"current.w",modifiers:{number:!0}}],domProps:{value:t.current.w},on:{input:function(e){e.target.composing||t.$set(t.current,"w",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"field"},[n("span",{staticClass:"label"},[t._v("")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.current.h,expression:"current.h",modifiers:{number:!0}}],domProps:{value:t.current.h},on:{input:function(e){e.target.composing||t.$set(t.current,"h",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"field"},[n("span",{staticClass:"label"},[t._v("")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.current.z,expression:"current.z",modifiers:{number:!0}}],domProps:{value:t.current.z},on:{input:function(e){e.target.composing||t.$set(t.current,"z",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])])])};Cu._withStripped=!0;const Su=mu({render:Cu,staticRenderFns:[]},(function(t){t&&t("data-v-6c4a10ba_0",{source:".container[data-v-6c4a10ba] {\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n.container *[data-v-6c4a10ba] {\n  box-sizing: border-box;\n}\n.sidebar[data-v-6c4a10ba] {\n  width: 300px;\n  height: 100%;\n  color: #b9a5a6;\n  background-color: #463a3c;\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  padding: 20px 10px;\n}\n.restore[data-v-6c4a10ba] {\n  background-color: #463a3c;\n  color: #b9a5a6;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.15);\n}\n.form[data-v-6c4a10ba] {\n  margin-top: 20px;\n}\n.form .field[data-v-6c4a10ba] {\n  margin-bottom: 10px;\n  display: flex;\n}\n.form .field .label[data-v-6c4a10ba] {\n  width: 80px;\n}\n.form input[data-v-6c4a10ba] {\n  background-color: rgba(0, 0, 0, 0.2);\n  outline: none;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: #b9a5a6;\n}\n.main[data-v-6c4a10ba] {\n  flex: 1;\n  height: 100%;\n  position: relative;\n}\n\n/*# sourceMappingURL=MoveTool.vue.map */",map:{version:3,sources:["D:\\junshiguan-moblie\\movetool\\src\\components\\MoveTool.vue","MoveTool.vue"],names:[],mappings:"AAiGA;EACA,aAAA;EACA,WAAA;EACA,YAAA;AChGA;ADkGA;EACA,sBAAA;AC/FA;ADiGA;EACA,YAAA;EACA,YAAA;EACA,cAAA;EACA,yBAAA;EACA,aAAA;EACA,sBAAA;EACA,cAAA;EACA,kBAAA;AC9FA;ADgGA;EACA,yBAAA;EACA,cAAA;EACA,oCAAA;EACA,kBAAA;EACA,yCAAA;AC7FA;AD+FA;EACA,gBAAA;AC5FA;AD6FA;EACA,mBAAA;EACA,aAAA;AC3FA;AD4FA;EACA,WAAA;AC1FA;AD6FA;EACA,oCAAA;EACA,aAAA;EACA,oCAAA;EACA,cAAA;AC3FA;AD+FA;EACA,OAAA;EACA,YAAA;EACA,kBAAA;AC5FA;;AAEA,uCAAuC",file:"MoveTool.vue",sourcesContent:['<template>\r\n  <div class="container">\r\n    <div class="main">\r\n      <slot></slot>\r\n    </div>\r\n    <div class="sidebar">\r\n      <button\r\n        class="restore"\r\n        @click.stop="handleRestore"\r\n        style="width: 100px;height: 60px;font-size: 30px;"\r\n      ></button>\r\n      \x3c!-- <button\r\n        data-move-ignore\r\n        @click="handleSave"\r\n        v-id="\'44d49ec1\'"\r\n        style="width: 200px;height: 100px;font-size: 50px;"\r\n      ></button>--\x3e\r\n      <div class="form">\r\n        <div class="field">\r\n          <span class="label">x</span>\r\n          <input  v-model.number="current.x" />\r\n        </div>\r\n        <div class="field">\r\n          <span class="label">y</span>\r\n          <input  v-model.number="current.y" />\r\n        </div>\r\n        <div class="field">\r\n          <span class="label"></span>\r\n          <input  v-model.number="current.w" />\r\n        </div>\r\n        <div class="field">\r\n          <span class="label"></span>\r\n          <input  v-model.number="current.h" />\r\n        </div>\r\n        <div class="field">\r\n          <span class="label"></span>\r\n          <input  v-model.number="current.z" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang="ts">\r\nimport { defineComponent, toRefs } from "@vue/composition-api";\r\nimport { store } from \'@/utils/store\';\r\nimport localforage from "localforage"\r\nimport { socket } from \'@/utils/socket\';\r\nconst dragStore = localforage.createInstance({\r\n  name: "dragStore"\r\n});\r\nexport default defineComponent({\r\n  setup() {\r\n    return { ...toRefs(store) }\r\n  },\r\n  mounted() {\r\n  },\r\n  computed: {\r\n    filePath(): string | undefined {\r\n      // @ts-ignore\r\n      return this.$slots.default?.[0].componentInstance?.$options.__file\r\n    }\r\n  },\r\n  methods: {\r\n    handleSave() {\r\n      if (!this.filePath) {\r\n        return\r\n      }\r\n      dragStore.iterate((v, k) => {\r\n        if (v instanceof Array && v.length) {\r\n          const lastData = v[v.length - 1]\r\n          socket.send({ id: k, ...lastData, path: this.filePath })\r\n        }\r\n      })\r\n    },\r\n    async handleRestore() {\r\n      let perv = await dragStore.getItem<string>(\'perv\')\r\n      if (perv) {\r\n        let id = perv.split(\':\')[0]\r\n        let store = await dragStore.getItem<any[]>(id)\r\n        if (store) {\r\n          let el = document.querySelector(`[data-v-id="${id}"]`) as HTMLElement\r\n          if (el) {\r\n            let data = store[store.length - 2]\r\n            el.style.left = data.x + \'px\'\r\n            el.style.top = data.y + \'px\'\r\n            el.style.width = data.w + \'px\'\r\n            el.style.height = data.h + \'px\'\r\n            el.style.zIndex = data.z\r\n            socket.send({ id: id, ...data })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n})\r\n<\/script>\r\n<style lang="scss" scoped>\r\n.container {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.container * {\r\n  box-sizing: border-box;\r\n}\r\n.sidebar {\r\n  width: 300px;\r\n  height: 100%;\r\n  color: #b9a5a6;\r\n  background-color: #463a3c;\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-shrink: 0;\r\n  padding: 20px 10px;\r\n}\r\n.restore {\r\n  background-color: #463a3c;\r\n  color: #b9a5a6;\r\n  border: 1px solid rgba(0, 0, 0, 0.2);\r\n  border-radius: 3px;\r\n  box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.15);\r\n}\r\n.form {\r\n  margin-top: 20px;\r\n  .field {\r\n    margin-bottom: 10px;\r\n    display: flex;\r\n    .label{\r\n      width: 80px;\r\n    }\r\n  }\r\n  input {\r\n    background-color: rgba(0, 0, 0, 0.2);\r\n    outline: none;\r\n    border: 1px solid rgba(0, 0, 0, 0.2);\r\n    color: #b9a5a6;\r\n  }\r\n}\r\n\r\n.main {\r\n  flex: 1;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n</style>',".container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n\n.container * {\n  box-sizing: border-box;\n}\n\n.sidebar {\n  width: 300px;\n  height: 100%;\n  color: #b9a5a6;\n  background-color: #463a3c;\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  padding: 20px 10px;\n}\n\n.restore {\n  background-color: #463a3c;\n  color: #b9a5a6;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.15);\n}\n\n.form {\n  margin-top: 20px;\n}\n.form .field {\n  margin-bottom: 10px;\n  display: flex;\n}\n.form .field .label {\n  width: 80px;\n}\n.form input {\n  background-color: rgba(0, 0, 0, 0.2);\n  outline: none;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  color: #b9a5a6;\n}\n\n.main {\n  flex: 1;\n  height: 100%;\n  position: relative;\n}\n\n/*# sourceMappingURL=MoveTool.vue.map */"]},media:void 0})}),wu,"data-v-6c4a10ba",false,undefined,!1,yu,void 0,void 0),_u={install(e){!function(e){e.directive("pos",{bind:(t,e)=>{setTimeout((()=>{hu(t,e.value)}))}});let n=_a.current;const r=cu((()=>{su.send(_a.current)}),500);t.watch((()=>_a.current),(t=>{if(n===t){const e=document.querySelector(`[data-v-id="${t.id}"]`);e&&(hu(e,t),r())}n=t}),{deep:!0}),e.directive("id",{async inserted(t,e,n){const r=n.context?.$options.__file;if(!r)return;if(t.dataset.vId=e.value,Reflect.has(t.dataset,"moveIgnore"))return;let o=await du.getItem(e.value);o||(await du.setItem(e.value,[]),o=await du.getItem(e.value)),t.addEventListener("click",(e=>{const n=t.dataset.vId;o&&n&&(_a.current=o[o.length-1])}));const i=new ya(document.body,{target:t,draggable:!0,snappable:!0,resizable:!0,snapThreshold:10,isDisplaySnapDigit:!0,snapDistFormat:t=>t+"px",snapGap:!0,snapElement:!0,snapVertical:!0,snapHorizontal:!0,snapCenter:!1,snapDigit:20,keepRatio:!0});i.elementGuidelines=[...document.querySelectorAll("[data-v-id]")],window.addEventListener("resize",(()=>{i.updateRect()})),i.on("drag",(({target:e,left:n,top:r})=>{const o=t.parentElement;if(!o)return;const{clientWidth:i,clientHeight:a}=o;e.style.left=n/i*100+"%",e.style.top=r/a*100+"%"})).on("dragStart",(({target:t})=>{o&&o.length>5&&o.splice(0,1),du.setItem(e.value,o),t.style.position="absolute";let n=[],r=[];for(let[e,r]of lu)e!==t&&(n=[...n,...r]);for(let[e,n]of fu)e!==t&&(r=[...r,...n]);i.verticalGuidelines=n,i.horizontalGuidelines=r})).on("dragEnd",(({target:t,lastEvent:e})=>{if(!o)return;let{vId:n}=t.dataset;if(!e||!n)return;let{left:i,top:a}=e;i=i.toFixed(2),a=a.toFixed(2),du.setItem("perv",`${n}:drag`);const s=o[o.length-1];o?.push({...s,x:i,y:a,id:n}),du.setItem(n,o),su.send({...o[o.length-1],path:r})})),i.on("resizeStart",(({target:t,clientX:e,clientY:n})=>{console.log("onResizeStart",t)})).on("resize",(({target:t,width:e,height:n,dist:r,delta:o,clientX:i,clientY:a,direction:s,isPinch:u})=>{o[0]&&(t.style.width=`${e}px`),o[1]&&(t.style.height=`${n}px`)})).on("resizeEnd",(({target:t,isDrag:e,clientX:n,clientY:i,lastEvent:a})=>{if(!o)return;let{vId:s}=t.dataset;if(!a||!s)return;let{width:u,height:c}=a;du.setItem("perv",`${s}:resize`);const l=o[o.length-1];du.setItem(s,o),o.push({...l,w:u,h:c,id:t.dataset.vId}),su.send({...o[o.length-1],path:r})}))}})}(e),e.component("MoveTool",Su)}};module.exports=_u;
